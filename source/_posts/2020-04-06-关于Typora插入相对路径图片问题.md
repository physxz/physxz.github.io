---
title: 关于Typora插入相对路径图片问题
tags:
  - typora
  - blog
categories: 技术
index_img: /img/20200406-typora.png
abbrlink: 10006
date: 2020-04-06 18:33:16
---

本文主要解决hexo博客框架下，用绝对路径或相对路径，在typora文档中插入本地图片时博客和md文件不能都显示的问题。很多人已经写过这个问题，但有没必要之处，所以写此文指出，给后来者避坑。

<!-- more -->

### 解决方案

如前所述，这里有两个问题：

* 使用绝对路径（如`E:\blog\source\img\today.jpg`）时，md文件显示图片，而博客不显示；

* 使用相对路径（如`/img/tomorrow.jpg`）时，md不显示文件，而博客显示。

有什么可以兼顾两者的方案呢？

我搜索了一下，大概有两种解决方案：

* 开启根目录下的`post_assets_folder`，这样能在创建md文档的时候在同一文件夹下创建同名文件夹；

* 修改typora的设置，以此将博客所需路径和typora所需路径统一。

第1种方法感觉有点牛刀杀鸡，毕竟一般没有很多图片，而且文件夹多了比较乱，所以采用第2种方法。

### 两步走

现在是，hexo只认`source`根目录下的相对路径（应该可以改，但是这里不考虑），就是说这么一个文件结构`E:\blog\source\img\today.jpg`，那么hexo只能识别`source`目录下（与`img`同级）的文件夹里的图片，那么如果我在`img`下建文件夹是不行的。

所以，要么直接用`img`文件夹，要么新建文件夹，我选择新建文件夹，将文章首页缩略图存于`img`文件夹，而将文章内插图存入另外的文件夹。

- 在`source`目录下新建文件夹`ass`；

- 在typora主界面，`格式`→`图像`→`设置图像根目录`，选择`source`文件夹！注意！是`source`文件夹。

这时在文章开头YAML区多了一行`typora-root-url: ..`（这里其实也可以手打输入）。接着将`ass`文件夹下的图片拖入文章，这时图片格式为`![](/img/yesterday.jpg)`，大功告成！

提醒：

* 要插入图片的每篇文章都要这么设置；
* 老版本`设置图像目录`好像是在`编辑`里面，注意区分；
* 插入本地音频视频想用相对路径也要这样操作。

### 关于偏好设置

我搜了很多文章，都说要设置`偏好设置`→`图像`里的`插入图片时...`，这其实完全没必要，[官方文档](https://support.typora.io/Images/#when-insert-images)也没有给出这些操作，不知道是不是老版本的原因。这些设置倒是可以拷贝图片到特定文件夹，这里不在讨论。

一点想法，如有错误或不同意见，欢迎评论区讨论。