<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Linux系统下用VSCode玩Arduino</title>
    <link href="/posts/10019/"/>
    <url>/posts/10019/</url>
    
    <content type="html"><![CDATA[<p>今天把之前买的Arduino板子也移植到Linux系统下，虽然Arduino IDE有Linux版本，但是不够智能，用起来不爽。那么就要请出宇宙第一编辑器VSCode了。<span id="more"></span></p><h1 id="软件及插件">软件及插件</h1><p>下载<a href="https://www.arduino.cc/en/software">Linux 64bits</a>版，解压到合适路径下，一会配置会用到。貌似不用安装。由于我配置VSCode之前就已经安装过Arduino了，所以暂时没有明确需不需要安装，但是就后续配置来看，没有用到安装路径，而是用的解压后的文件夹的路径。所以先不用安装，如果需要安装后再再安也不迟。</p><p>下载安装VSCode。<code>Ctrl+Shift+X</code>搜索安装C/C++插件（Arduino插件依赖该插件），再搜索安装<code>Arduino</code>，两者都是带有Microsoft标志的。<code>Ctrl+Shift+P</code>打开命令面板并输入<code>settings.json</code>，打开<code>Preferences: Open Settings (JSON)</code>，添加或替换如下代码，注意路径改为刚才解压的文件夹的路径（一定是解压文件的路径而不是安装路径）</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-string">&quot;arduino.path&quot;</span>: <span class="hljs-string">&quot;/home/zhao/Downloads/arduino-1.8.19/&quot;</span>,<br></code></pre></td></tr></table></figure><p>保存后在左下方应该就会有一个<code>ARDUINO EXAMPLES</code>文件夹，打开会发现里面就是Arduino自带的一些示例。如果没有重启以下VSCode，如果还没有就是路径配置有问题，请重新检查路径。</p><h1 id="配置及debug">配置及Debug</h1><p>然后用USB连接Arduino到电脑，就可以配置Arduino开发板了。在VSCode下方状态栏靠右有三个选项需要选择，我们从由往左选，首先是串口<code>Slect Serial Port</code>，一般默认是<code>/dev/ttyACM0</code>，然后是开发板<code>Show Board Config</code>，我这里选择Arduino Uno开发板，再然后是烧录器<code>Select Programmer</code>，可以选择<code>avrisp mkii</code>或者<code>arduino as isp</code>都可以。这是你会发现当前工作目录下多了一个文件夹<code>.vscode</code>，里面有一个文件<code>arduino.json</code>，打开发现就是刚才选择的那些配置信息。</p><p>新建<code>.ino</code>文件或打开已有文件，写一段测试代码</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span><br></code></pre></td></tr></table></figure><p>首先，敲下两个字母就<code>Enter</code>的感觉太爽了，这要比在Arduino IDE下敲代码舒服得多。但是敲完<code>&lt;stdio.h&gt;</code>你就发现怎么没有自动补全，而且还出现了红色波浪线错误提示：<code>检测到 #include 错误。请更新 includePath</code>，这说明当前工作环境没有检测到这些<code>.h</code>头文件的存在，需要配置一些<code>C</code>的工作路径，<code>Ctrl+Shift+P</code>输入<code>Edit Configurations (JSON)</code>，添加以下第3行代码（参考了<a href="https://blog.csdn.net/wh201906/article/details/103878857">这篇文章</a>）</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-string">&quot;includePath&quot;</span>: [<br>    <span class="hljs-string">&quot;$&#123;workspaceFolder&#125;/**&quot;</span>,<br>    <span class="hljs-string">&quot;/home/zhao/Downloads/arduino-1.8.19/**&quot;</span><br>],<br></code></pre></td></tr></table></figure><p>路径也是刚才解压的文件夹，<code>**</code>表示搜索路径下所有子文件夹和文件。保存后就会发现红色波浪线消失了，又可以愉快的敲代码了。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>&#123;<br>    Serial.begin(<span class="hljs-number">9600</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>又出问题了！<code>Serial</code>红色波浪线提示<code>未定义标识符</code>，找到<a href="https://blog.csdn.net/weixin_45488643/article/details/105966613">这篇文章</a>完美解决了这个问题。</p><p><code>主要问题是头文件索引丢失，intellisense不能自动找到需要的头文件路径。需要在用户设置中强制*intellisense*使用*Tag Parser*,递归方式检索头文件。</code></p><p>还是在第一次添加路径的<code>Preferences: Open Settings (JSON)</code>文件内添加如下中间2行代码</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-string">&quot;C_Cpp.updateChannel&quot;</span>: <span class="hljs-string">&quot;Insiders&quot;</span>,<br><span class="hljs-string">&quot;C_Cpp.intelliSenseEngineFallback&quot;</span>: <span class="hljs-string">&quot;Disabled&quot;</span>,<br><span class="hljs-string">&quot;C_Cpp.intelliSenseEngine&quot;</span>: <span class="hljs-string">&quot;Tag Parser&quot;</span>,<br><span class="hljs-string">&quot;arduino.commandPath&quot;</span>: <span class="hljs-string">&quot;arduino&quot;</span><br></code></pre></td></tr></table></figure><p>至此，基本完成Linux下Arduino+VSCode的折腾。以后如遇到新问题再更新。</p>]]></content>
    
    
    <categories>
      
      <category>MCU</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VSCode</tag>
      
      <tag>Arduino</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linux系统下玩转51单片机</title>
    <link href="/posts/10018/"/>
    <url>/posts/10018/</url>
    
    <content type="html"><![CDATA[<p>自这台不舍得仍的老笔记本安装了Ubuntu，就开起了各种折腾之路。现在来折腾一下C51单片机吧。所用芯片为STR89C52RC。<span id="more"></span></p><h1 id="前言">前言</h1><h2 id="单片机简介">单片机简介</h2><p>单片机，属于微型控制器（MCU，Micrcontroller Unit）。51单片机是对兼容Intel 8051指令系统的单片机的统称，是8位单片机。主要品牌及产品有：</p><ul><li>Intel：80C31、80C51、87C51，80C32、80C52、87C52等；</li><li>Atmel：89C51、89C52、89C2051，89S51(RC)，89S52(RC)等；</li><li>Philips、华邦、Dallas（达拉斯）、Siemens等公司的许多产品；</li><li>STC（宏晶）：STC89C51、STC90C51、STC11系列、STC15系列、STC8系列等。</li></ul><p>国内的STC单片机有89/90/10/11/12/15这几个大系列，每个系列的特点如下：</p><ul><li>89系列是传统的8051单片机，烧录方法有区别，但是功能上可以和AT89系列兼容，属于12T（1个机器周期=12个时钟周期）单片机</li><li>90系列是89系列的改进型，12T单片机</li><li>10和11系列是1T单片机，有PWM，4态IO接口，EEPROM等功能，但都没有ADC</li><li>12系列是增强型功能的1T单片机，型号后缀<code>AD</code>的带ADC，后缀<code>S2</code>的除了ADC还带双串口</li><li>15系列是最新的产品，内部集成了高精度R/C时钟，不需要外部晶振</li></ul><h2 id="stc89c52系列参数">STC89C52系列参数</h2><p>宏晶<a href="https://www.stcmcudata.com/datasheet/STC89C52.pdf">官方文档</a>。</p><p>STC89C52和STC89C51的区别仅在于Flash和EEPROM大小，C51的Flash为4K而C52为8K，C51的EEPROM为9K而C52为5K。都有多种封装，常见的是体积较大的PDIP-40宽体双列</p><ul><li>Flash：8K bytes</li><li>SRAM：512 bytes</li><li>EEPROM：5KB</li><li>I/O数量：35-bit（PDIP-40封装）</li><li>看门狗定时器，MAX810复位电路</li><li>3个16-bit定时器</li><li>4个外部中断，一个7向量4级中断结构和全双工串行口</li><li>最高运作频率35MHz，6T/12T可选</li><li>UART串口：1个</li><li>工作电压Vcc：5V-3.8V</li></ul><p>如果需要ADC, 可以选 STC12C5A60S2 系列, 1T型的指令时钟速度比普通STC89系列(12T)快, 做定时时要注意。</p><p><img src="/ass/20220118-STC89C52RC.jpg" /></p><p>STC89C52系列单片机命名规则如下</p><p><img src="/ass/20220118-STC89C52RC-name.png" /></p><p>STC89C52系列通过单片机表面最下面一行最后几个字母区分90C版本及HD版本。</p><h1 id="工具安装">工具安装</h1><h3 id="安装编译工具sdcc">安装编译工具SDCC</h3><p>SDCC（Small Device C Compiler）是用于8位微控制器的免费开源软件，支持Windows, MacOS, Linux。<a href="http://sdcc.sourceforge.net/doc/sdccman.pdf">sdcc手册</a>。</p><ul><li><p>库安装</p><p>在终端输入<code>sudo apt install sdcc</code>安装，查看版本<code>sdcc -v</code>，返回版本为<code>3.8.0</code>，此方法安装的版本较老，可通过源码安装。</p></li><li><p>源码安装</p><ul><li><p><a href="https://sourceforge.net/projects/sdcc/files/">下载</a>最新版<code>4.1.0</code></p></li><li><p>解压<code>tar -xvjf sdcc-src-4.1.0.tar.bz2</code></p></li><li><p>进入解压后的文件夹配置<code>./configure</code></p><ul><li>报错1:<code>configure: error: Cannot find required program bison.</code></li><li>解决：<code>sudo apt install flex bison</code></li><li>报错2:<code>configure: error: boost library not found (boost/graph/adjacency_list.hpp).</code></li><li>解决：<code>sudo apt-get install libboost-date-time-dev libboost-program-options-dev libboost-system-dev libboost-filesystem-dev    libboost-iostreams-dev</code></li><li>报错3:<code>configure: error: ./configure failed for device/lib/pic14</code>及<code>configure: error: gputils (gpasm, gplink, and gplib) are required but not found.</code></li><li>解决：在配置时加上参数<code>--disable-pic14-port --disable-pic16-port</code></li></ul></li><li><p>再次配置<code>./configure --disable-pic14-port --disable-pic16-port</code></p></li><li><p>编译<code>make</code>，运行时间较长。</p><ul><li><p>报错1：终端返回的信息往上翻可能会有如下提示</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">WARNING: <span class="hljs-string">&#x27;makeinfo&#x27;</span> is missing <span class="hljs-keyword">on</span> <span class="hljs-title">your</span> <span class="hljs-title">system</span>.<br>         You should only need <span class="hljs-keyword">it</span> <span class="hljs-keyword">if</span> you modified <span class="hljs-keyword">a</span> <span class="hljs-string">&#x27;.texi&#x27;</span> <span class="hljs-built_in">file</span>, <span class="hljs-keyword">or</span><br>         <span class="hljs-keyword">any</span> other <span class="hljs-built_in">file</span> indirectly affecting <span class="hljs-keyword">the</span> aspect <span class="hljs-keyword">of</span> <span class="hljs-keyword">the</span> manual.<br>         You might want <span class="hljs-built_in">to</span> install <span class="hljs-keyword">the</span> Texinfo package:<br>         &lt;<span class="hljs-keyword">http</span>://www.gnu.org/software/texinfo/&gt;<br>         The spurious makeinfo call might also be <span class="hljs-keyword">the</span> consequence <span class="hljs-keyword">of</span><br>         <span class="hljs-keyword">using</span> <span class="hljs-keyword">a</span> buggy <span class="hljs-string">&#x27;make&#x27;</span> (AIX, DU, IRIX), <span class="hljs-keyword">in</span> which <span class="hljs-keyword">case</span> you might<br>         want <span class="hljs-built_in">to</span> install GNU make:<br>         &lt;<span class="hljs-keyword">http</span>://www.gnu.org/software/make/&gt;<br></code></pre></td></tr></table></figure></li><li><p>解决：<code>sudo apt install texinfo</code></p></li></ul></li><li><p>再次编译<code>make</code></p></li><li><p>安装<code>sudo make install</code></p></li><li><p>添加环境变量（可能需要）</p><p>在<code>vim /etc/profile</code>中添加代码<code>export PATH=/usr/local/bin:$PATH</code>，然后执行<code>source /etc/profile</code>使之生效。</p></li></ul></li><li><p>检查和测试</p><ul><li><p>查看版本号<code>sdcc -v</code>，应该输出版本<code>4.1.0</code></p></li><li><p>查看库文件的位置<code>sdcc --print-search-dirs</code>，默认的8051库的位置是<code>/usr/local/share/sdcc/include/mcs51/</code></p></li><li><p>测试代码<code>vim test01.c</code></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">char</span> test;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span> </span>&#123;<br>test = <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>编译</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 产生test01.asm等文件</span><br>zhao@zhao-laptop:~/Documents/STC89C52RC/test01$ sdcc -c test01.c <br>zhao@zhao-laptop:~/Documents/STC89C52RC/test01$ tree .<br>.<br>├── test01.asm<br>├── test01.c<br>├── test01.lst<br>├── test01.rel<br>└── test01.sym<br><br>0 directories, 5 files<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 产生test01.ihx等文件</span><br>zhao@zhao-laptop:~/Documents/STC89C52RC/test01$ sdcc test01.c<br>zhao@zhao-laptop:~/Documents/STC89C52RC/test01$ tree .<br>.<br>├── test01.asm<br>├── test01.c<br>├── test01.ihx<br>├── test01.lk<br>├── test01.lst<br>├── test01.map<br>├── test01.mem<br>├── test01.rel<br>├── test01.rst<br>└── test01.sym<br><br>0 directories, 10 files<br></code></pre></td></tr></table></figure><ul><li>或者使用一行命令<code>sdcc test02.c -o test02.ihx</code></li></ul></li></ul></li><li><p>卸载<code>sudo make uninstall</code></p></li></ul><h3 id="安装烧录工具stcgal">安装烧录工具stcgal</h3><p>根据Github上<a href="https://github.com/grigorig/stcgal">项目首页</a>的说明, 直接用<code>pip3 install stcgal</code>安装, 然后执行<code>stcgal -h</code>查看输出。</p><h1 id="编译链接与烧录">编译链接与烧录</h1><p>编写test02.c点亮P1.0的LED灯。<a href="https://github.com/hungtcs-lab/8051-examples">这是</a>一个很好的8051单片机示例项目。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;mcs51/8051.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LED1 P1_0</span><br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function">    LED1 </span>= <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="编译和链接">编译和链接</h3><h4 id="单个文件">单个文件</h4><p>可以这样直接编译</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sdcc test02.c -o test02.ihx<br></code></pre></td></tr></table></figure><h4 id="多个文件">多个文件</h4><p>C或者C++程序在运行过程中，首先要生成<code>.obj</code>（windows）或<code>.o</code>（Unix）等目标文件，这就是编译（compile）。然后把这些文件合成执行文件的动作就叫链接（link）。这两个过程完成后才会产生可执行文件。</p><p>对于SDCC来说，编译生成中间文件<code>.rel</code>文件，然后链接生成<code>.ihx</code>文件。sdcc不支持多文件同时编译多个源文件，多个文件时，需要单个编译再链接。</p><ul><li><p>编译（生成<code>.rel</code>文件，其中<code>-c</code>参数表示<code>compile only</code>）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs bash">zhao@zhao-laptop:~/Projects/STC89C52RC/JiangKeDa/00-test$ tree<br>.<br>├── delay.c<br>├── delay.h<br>├── main.c<br>├── Makefile<br>├── SegmentDisplay.c<br>└── SegmentDisplay.h<br><br>0 directories, 6 files<br>zhao@zhao-laptop:~/Projects/STC89C52RC/JiangKeDa/00-test$ sdcc -c main.c &amp;&amp; sdcc -c delay.c &amp;&amp; sdcc -c SegmentDisplay.c<br>zhao@zhao-laptop:~/Projects/STC89C52RC/JiangKeDa/00-test$ tree<br>.<br>├── delay.asm<br>├── delay.c<br>├── delay.h<br>├── delay.lst<br>├── delay.rel<br>├── delay.sym<br>├── main.asm<br>├── main.c<br>├── main.lst<br>├── main.rel<br>├── main.sym<br>├── Makefile<br>├── SegmentDisplay.asm<br>├── SegmentDisplay.c<br>├── SegmentDisplay.h<br>├── SegmentDisplay.lst<br>├── SegmentDisplay.rel<br>└── SegmentDisplay.sym<br><br>0 directories, 18 files<br></code></pre></td></tr></table></figure></li><li><p>链接（生成<code>.ihx</code>文件）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs bash">zhao@zhao-laptop:~/Projects/STC89C52RC/JiangKeDa/00-test$ sdcc main.rel delay.rel SegmentDisplay.rel <br>zhao@zhao-laptop:~/Projects/STC89C52RC/JiangKeDa/00-test$ tre<br>tred  tree  <br>zhao@zhao-laptop:~/Projects/STC89C52RC/JiangKeDa/00-test$ tree<br>.<br>├── delay.asm<br>├── delay.c<br>├── delay.h<br>├── delay.lst<br>├── delay.rel<br>├── delay.rst<br>├── delay.sym<br>├── main.asm<br>├── main.c<br>├── main.ihx<br>├── main.lk<br>├── main.lst<br>├── main.map<br>├── main.mem<br>├── main.rel<br>├── main.rst<br>├── main.sym<br>├── Makefile<br>├── SegmentDisplay.asm<br>├── SegmentDisplay.c<br>├── SegmentDisplay.h<br>├── SegmentDisplay.lst<br>├── SegmentDisplay.rel<br>├── SegmentDisplay.rst<br>└── SegmentDisplay.sym<br><br>0 directories, 25 files<br></code></pre></td></tr></table></figure></li></ul><h3 id="烧录">烧录</h3><p>使用<code>-P</code>指定协议（Protocals）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">stcgal -P stc89 test02.ihx<br></code></pre></td></tr></table></figure><p>提示<code>Waiting for MCU, please cycle power:</code>关闭电源开关再打开</p><p>默认波特率是19200，写入较慢，可以使用<code>-b</code>指定波特率</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">stcgal -P stc89 -b 115200 test002.ihx<br></code></pre></td></tr></table></figure><p>端口一般不用指定（应该是<code>/dev/ttyUSB0</code>），会自动识别，如果同时有多个端口，使用<code>-p</code>指定端口</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">stcgal -P stc89 -b 115200 dist/89/89.hex -p /dev/ttyUSB1<br></code></pre></td></tr></table></figure><p>使用<code>-D</code>显示串口交互信息</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">stcgal -D -P stc89 -b 115200 test002.ihx<br></code></pre></td></tr></table></figure><h3 id="出现的问题及解决办法">出现的问题及解决办法</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">stcgal -P stc89 test02.ihx<br><span class="hljs-comment"># 运行上述烧录命令提示以下错误信息</span><br>/dev/ttyUSB0 permission denied<br><span class="hljs-comment"># 加上sudo后，提示以下信息</span><br>sudo: stcgal: <span class="hljs-built_in">command</span> not found.<br></code></pre></td></tr></table></figure><p>查看串口权限</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">zhao@zhao-laptop:/dev$ ls -la ttyUSB0<br>crw-rw---- 1 root dialout 188, 0 1月  18 21:35 ttyUSB0<br></code></pre></td></tr></table></figure><p>发现串口属于<code>dialout</code>群组，通过几个命令查询群组</p><p>查看自己所在的群组<code>groups</code></p><p>查看所有可用群组<code>compgen -g</code></p><p>应该可以看到自己不属于<code>dialout</code>群组，将自己加入这个群组获得权限</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo usermod -a -G dialout zhao<br></code></pre></td></tr></table></figure><p>可能需要重启计算机，然后再执行烧录命令就可以了。</p><h1 id="sdcc与keil的区别以及注意事项">SDCC与Keil的区别以及注意事项</h1><p><a href="https://hackaday.io/project/170540-adventures-with-a-stc89c52-development-board/log/177065-notes-on-converting-keil-8051-c-to-sdcc-c">这是</a>SDCC和Keil的不同之处。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//头文件调用</span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;8052.h&gt;</span> <span class="hljs-comment">//sdcc</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;reg52.h&gt;</span> <span class="hljs-comment">//keil</span></span><br><br><span class="hljs-comment">//定义引脚</span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> pin P0_0 <span class="hljs-comment">//sdcc，注意没有分号</span></span><br>sbit pin=P0^<span class="hljs-number">0</span>; <span class="hljs-comment">//keil，有分号</span><br><br><span class="hljs-comment">//定义中断函数</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Timer0</span><span class="hljs-params">()</span> __interrupt 1<span class="hljs-comment">//sdcc</span></span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Timer0</span><span class="hljs-params">()</span> interrupt 1<span class="hljs-comment">//keil</span></span><br><span class="hljs-function"></span><br><span class="hljs-function"><span class="hljs-comment">//关键字data、bdata、idata、xdata、code等</span></span><br><span class="hljs-function">__code <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span> table[] </span>= &#123;&#125; <span class="hljs-comment">//sdcc</span><br><span class="hljs-keyword">unsigned</span> code <span class="hljs-keyword">char</span> table[] = &#123;&#125; <span class="hljs-comment">//keil</span><br><br><span class="hljs-comment">//sdcc需要自定义_nop_()函数（通过嵌入汇编语言）</span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> _nop_() __asm NOP __endasm <span class="hljs-comment">//然后使用_nop_()函数即可</span></span><br>_nop_() <span class="hljs-comment">//keil在引用intrins.h头文件后直接使用_nop_()即可</span><br><br><span class="hljs-comment">//sdcc默认char是unsigned的，如需有符号char需要特定声明</span><br><span class="hljs-keyword">signed</span> <span class="hljs-keyword">char</span> <span class="hljs-comment">//sdcc 详见sdccman.pdf page8</span><br><span class="hljs-keyword">char</span> <span class="hljs-comment">//keil</span><br></code></pre></td></tr></table></figure><ul><li>取反和非操作的区别<ul><li><code>!</code>符号是非，是位取反（是“位”），只针对位变量。</li><li><code>~</code>符号是按位取反（是“按位”），针对字节变量</li></ul></li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//定义P1脚8个led灯</span><br>Pin1 = !Pin1; <span class="hljs-comment">//只控制P1_1脚的led灯开关</span><br>Pin1 = ~Pin1; <span class="hljs-comment">//控制P1的8个led灯开关</span><br><span class="hljs-comment">//定义P1.0一个led灯时，~有时不正常工作，需使用!</span><br>Pin10 = !Pin10; <span class="hljs-comment">//</span><br></code></pre></td></tr></table></figure><h1 id="配合vscode使用">配合VSCode使用</h1><p>参考<a href="https://github.com/hungtcs-lab/8051-examples">1</a>，<a href="https://github.com/haozewu/C51">2</a>。</p><p>首先要安装<a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.cpptools">C/C++</a>插件。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;mcs51/8051.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LED1 P1_0</span><br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>  LED1 = <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>使用VSCode打开test02.c所在工程目录，<code>#include &lt;mcs51/8051.h&gt;</code>部分会提示<code>cannot open source file "mcs51/8051.h"</code>，将光标移动到该行，<code>Ctrl+.</code>然后点击<code>Edit "includePath" setting</code>，然后在工程目录下会生成<code>.vscode</code>文件夹，修改其下文件<code>c_cpp_properties.json</code>文件（只改<code>includePath</code>和<code>compilerPath</code>应该就可以）</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>    <span class="hljs-attr">&quot;configurations&quot;</span>: [<br>        &#123;<br>            <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;Linux&quot;</span>,<br>            <span class="hljs-attr">&quot;includePath&quot;</span>: [<br>                <span class="hljs-string">&quot;/usr/local/share/sdcc/include/&quot;</span>,<br>                <span class="hljs-string">&quot;$&#123;workspaceFolder&#125;/**&quot;</span><br>            ],<br>            <span class="hljs-attr">&quot;defines&quot;</span>: [],<br>            <span class="hljs-attr">&quot;compilerPath&quot;</span>: <span class="hljs-string">&quot;/usr/local/bin/sdcc&quot;</span>,<br>            <span class="hljs-attr">&quot;cStandard&quot;</span>: <span class="hljs-string">&quot;c11&quot;</span>,<br>            <span class="hljs-attr">&quot;cppStandard&quot;</span>: <span class="hljs-string">&quot;c++17&quot;</span>,<br>            <span class="hljs-attr">&quot;intelliSenseMode&quot;</span>: <span class="hljs-string">&quot;$&#123;default&#125;&quot;</span><br>        &#125;<br>    ],<br>    <span class="hljs-attr">&quot;version&quot;</span>: <span class="hljs-number">4</span><br>&#125;<br></code></pre></td></tr></table></figure><p>再看源文件，<code>LED1</code>处提示以下错误</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs actionscript">identifier <span class="hljs-string">&quot;P1_0&quot;</span> <span class="hljs-keyword">is</span> undefinedC/C++(<span class="hljs-number">20</span>)<br></code></pre></td></tr></table></figure><p>查了半天资料，语法应该没有错误，是可以烧录进单片机并点亮P1.0的LED灯的。猜测可能是SDCC跟标准C之间的一些差异。不在乎这个错误提示的可以留着，想去掉的将光标移动到提示错误的地方，<code>Ctrl+.</code>选择<code>Disable error squiggles</code>，就会发现<code>.vscode</code>文件夹下多了一个<code>settings.json</code>文件。</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>    <span class="hljs-attr">&quot;C_Cpp.errorSquiggles&quot;</span>: <span class="hljs-string">&quot;Disabled&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="编写makefile文件">编写Makefile文件</h2><p>每次运行都要输入编译与烧录命令比较麻烦，可以编写<code>makefile</code>文件节省时间</p><h3 id="单文件">单文件</h3><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs makefile">BUILD_DIR = build/<span class="hljs-comment"># 存放生成文件的文件夹</span><br>SRC_DIR= ./<br>INPUT=main.c<span class="hljs-comment"># 输入文件</span><br>OUTPUT=*.ihx<span class="hljs-comment"># 输出目标文件</span><br>PROTOCOL=stc89<span class="hljs-comment"># 协议</span><br>BaudRate=115200<span class="hljs-comment"># 波特率</span><br>DEVICE=/dev/ttyUSB0<span class="hljs-comment"># 串口号（一般不用指定），如需指定，在烧录指令行最后加上 -p $&#123;DEVICE&#125;</span><br><br><span class="hljs-section">build: $&#123;OUTPUT&#125;# 执行$&#123;OUTPUT&#125;指令（即创建文件夹并编译）</span><br><br><span class="hljs-section">flash: build# 烧录并执行build指令</span><br>stcgal -P $&#123;PROTOCOL&#125; -b $&#123;BaudRate&#125; $&#123;BUILD_DIR&#125;$&#123;OUTPUT&#125;<br><br><span class="hljs-section">$&#123;OUTPUT&#125;:# 创建文件夹并编译</span><br>mkdir build &amp;&amp; sdcc -o <span class="hljs-variable">$(BUILD_DIR)</span> $&#123;SRC_DIR&#125;$&#123;INPUT&#125;<br><br><span class="hljs-section">clean:# 清除存放生成文件的文件夹</span><br>rm -rf $&#123;BUILD_DIR&#125;<br></code></pre></td></tr></table></figure><p>直接输入<code>make clean &amp;&amp; make flash</code>即可清理文件并编译烧录程序。但这样仍然要在每一个项目下添加<code>makefile</code>文件，暂时没有找到更好的方法解决这一问题。</p><h3 id="多文件">多文件</h3><p>参考文章<a href="https://www.cnworkshop.xyz/Electronic/C8051F%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/">1</a>，<a href="https://seisman.github.io/how-to-write-makefile/index.html">2</a>，<a href="https://adamsq.github.io/blog/2015/05/04/sdcc2/">3</a>。多文件只能依次编译，不同项目需要更改Makefile的编译和链接部分。</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs makefile">BLD_DIR = build/<br><br><span class="hljs-section">download: main.ihx</span><br>stcgal -P stc89 <span class="hljs-variable">$(BLD_DIR)</span>main.ihx<br><span class="hljs-comment">#烧录</span><br><br><span class="hljs-section">main.ihx: main.rel delay.rel SegmentDisplay.rel</span><br>sdcc main.rel delay.rel SegmentDisplay.rel ;\<br>mkdir <span class="hljs-variable">$(BLD_DIR)</span> ;\<br>mv *.lk *.asm *.lst *.mem *.rst *.rel *.sym *.ihx *.map <span class="hljs-variable">$(BLD_DIR)</span><br><span class="hljs-comment">#多文件链接并将生成文件移入build文件夹</span><br><br><span class="hljs-section">main.rel: main.c</span><br>sdcc -c main.c<br><span class="hljs-section">delay.rel: delay.c</span><br>sdcc -c delay.c<br><span class="hljs-section">SegmentDisplay.rel: SegmentDisplay.c</span><br>sdcc -c SegmentDisplay.c<br><span class="hljs-comment">#多文件编译编译</span><br><br>.PHONY : clean<br><span class="hljs-section">clean:</span><br>-rm -rf <span class="hljs-variable">$(BLD_DIR)</span><br><span class="hljs-comment">#-rm -rf *.lk *.asm *.lst *.mem *.rst *.rel *.sym *.ihx *.map</span><br><span class="hljs-comment">#清除生成文件</span><br></code></pre></td></tr></table></figure><h1 id="串口调试">串口调试</h1><p>与单片机打交道经常需要串口通信，这就需要串口工具。在VScode里找到一个串口调试工具，但是目前还不支持Linux系统，只能找独立软件，搜索一番后，<a href="https://gitlab.com/cutecom/cutecom/-/releases">CuteCom</a>是个不错的的选择。</p><p>可以直接<code>sudo apt install cutecom</code>，但是版本很老，是5年前的0.30.3版本，我们还是用源码安装（虽然源码也是3年前的。。。）。</p><p>从项目地址下载最新版后解压</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">tar -xzvf cutecom-master.tar.gz cutecom-master/<br></code></pre></td></tr></table></figure><p>进入文件夹并<code>cmake</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> cutecom-master/<br>cmake .<br></code></pre></td></tr></table></figure><p>有可能会提示错误<code>Could not find a package configuration file provided by "Qt5Widgets" with any of the following names: Qt5WidgetsConfig.cmake / qt5widgets-config.cmake</code>。需要安装<code>qt5</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt install qtbase5-dev<br>sudo apt install libqt5serialport5-dev<br></code></pre></td></tr></table></figure><p>再次执行<code>cmake</code>，成功。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">zhao@zhao-laptop:~/Downloads/cutecom-master$ cmake .<br>-- Configuring <span class="hljs-keyword">done</span><br>-- Generating <span class="hljs-keyword">done</span><br>-- Build files have been written to: /home/zhao/Downloads/cutecom-master<br></code></pre></td></tr></table></figure><p>然后再执行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo make<br>sudo make install<br></code></pre></td></tr></table></figure><p>检查是否安装正确</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">zhao@zhao-laptop:~/Downloads/cutecom-master$ cutecom -h<br>Usage: cutecom [options]<br>CuteCom - Serial Terminal 0.51.0<br><br>Options:<br>  -h, --<span class="hljs-built_in">help</span>               Displays this <span class="hljs-built_in">help</span>.<br>  -s, --session &lt;session&gt;  Open a named &lt;session&gt;<br></code></pre></td></tr></table></figure><p>可以看到0.51.0版本已安装完毕。打开软件</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">cutecom</span><br></code></pre></td></tr></table></figure><p><img src="/ass/20220118-cutecom.png" /></p><p>点击右侧<code>Settings</code>可以打开串口设置界面，选择串口号，选择程序中对应的波特率，点击<code>Open</code>就可以打开串口进行通信了。要发送数据给串口设备，就在<code>Input</code>中输入数据，如果是数字要选用16进制<code>Hex</code>，如果是文本格式要选用<code>None</code>。如果程序要再次编译运行，需要先点击<code>Close</code>停止CuteCom。</p><h1 id="一些问题">一些问题</h1><h2 id="单片机的存储器">51单片机的存储器</h2><p><a href="https://blog.csdn.net/qq_37324376/article/details/119968934">参考</a>。</p><p><a href="https://zhuanlan.zhihu.com/p/38339306">ROM, FLASH和RAM的区别</a>。</p><h2 id="时序图">时序图</h2><p><a href="https://www.cnblogs.com/qsyll0916/p/7711098.html">看懂时序图</a>。</p><p><a href="https://www.eet-china.com/mp/a8203.html">参考</a>。</p><h2 id="波特率初值表">波特率初值表</h2><figure><img src="/ass/20220209-baud-rate-initial-value.png" alt="img" /><figcaption aria-hidden="true">img</figcaption></figure><h2 id="c语言知识点">C语言知识点</h2><p><a href="https://blog.csdn.net/liuchunjie11/article/details/80041472">单引号vs双引号</a>。</p><p><a href="https://blog.csdn.net/leonharetd/article/details/8665363">参考</a>。</p><h1 id="参考资料">参考资料</h1><p>感谢<a href="https://www.cnblogs.com/milton/p/14994533.html">这篇文章</a>，讲的很详细。</p><p>还有这个大佬写的<a href="http://www.51hei.com/bbs/dpj-190291-1.html">一篇</a>，补充了安装SDCC的一些细节。</p><p>还有<a href="https://www.cnworkshop.xyz/Electronic/C8051F%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/">一篇</a>。</p><p><a href="https://stackoverflow.com/questions/64994189/how-does-c-programming-work-with-no-headers">printf and putchar</a>。</p><p>汇编相关<a href="https://blog.csdn.net/Neutionwei/article/details/118116078?utm_medium=distribute.pc_aggpage_search_result.none-task-blog-2~aggregatepage~first_rank_ecpm_v1~rank_v31_ecpm-3-118116078.pc_agg_new_rank&amp;utm_term=%E5%BE%AE%E7%A7%92%E7%BA%A7%E5%BB%B6%E6%97%B6%E5%87%BD%E6%95%B0&amp;spm=1000.2123.3001.4430">1</a>, <a href="https://blog.csdn.net/Neutionwei/article/details/117899311">2</a>。</p>]]></content>
    
    
    <categories>
      
      <category>硬件</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VSCode</tag>
      
      <tag>C51</tag>
      
      <tag>SDCC</tag>
      
      <tag>STR89C52RC</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>关于人生未来之路的一点思考</title>
    <link href="/posts/10017/"/>
    <url>/posts/10017/</url>
    
    <content type="html"><![CDATA[<p>人一旦失去了目标或者做一些自己觉得没有意义的事情，人就会感到迷茫。博三的我一如大一大二的我。<span id="more"></span></p><p>刚才自己瞎写了一首小诗，记录一下自己的心：</p><hr /><p>我生有反骨，骨子里有一颗不安分的心。</p><p>偏生在安分人家，有一副犹疑懦弱的皮。</p><p>我想折腾，想不忌于俗世，不安于礼节。</p><p>又恐于现在未来，狂吠不已。</p><hr /><p>对于未来，我在考研时是明确的，写在知乎简介上的3个目标，我如今只实现了第1个，第2个和第3个我已不再奢求甚至有了厌恶。</p><p>如今人生之路走了已有三分之一，却仍然迷茫不知所措。想来倒也可笑，以前追求的现在想拼命逃离，或许是一开始就选错了方向。人生，确实在于选择。</p><p>我近来时常在想，人与人的活法到底有什么不同。顶层的真正的理想之士、有为之士自不必说，那是我永远的追求和达不到的目标。中层的有学识却平庸的人可能是未来的大部分。底层的劳苦大众或安于现状，或苦于现实。</p><p>那我能成为什么人？我一直觉得自己是个有野心无实力的家伙。内心渴望着建功立业，现实中却深陷泥沼。承认自己的平庸是痛苦的，但也只有承认自己的平庸，才能明确自己的定位。</p><p>但清楚了自己的定位并不能帮助你在细节上作出抉择。一路走来，觉得自己的选择一直是对的，也许大方向是对的，考研读博没错，但是方向上对了吗？我现在表示怀疑。科研远没有中学课本中描绘的那么理想，或者他是理想的，但只对某些合适的人或某些合适的专业。</p><p>博三的我居然在考虑转行，转到我目前自认为喜欢的专业，甚至想放弃学位从头再来。这一切有些疯狂。但转念一想，无非就是受人冷眼与聒噪，周遭的人看不起你罢了。有时想想也没啥，心放宽一切都没啥了。出去随便找一份悠闲的工作，闲暇时搞自己的兴趣爱好也没啥不可。唯一放不下的是将来的老婆孩子父母，可能自己的树荫不足以庇护它们。</p><p>一时沮丧之言，生活还要继续，奋斗就不迷茫。</p>]]></content>
    
    
    <categories>
      
      <category>随笔</category>
      
    </categories>
    
    
    <tags>
      
      <tag>感悟</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>算法基础</title>
    <link href="/posts/10016/"/>
    <url>/posts/10016/</url>
    
    <content type="html"><![CDATA[<p>Grokking Algorithms, by Aditya Bhargava<span id="more"></span>。本书代码<a href="https://github.com/egonSchiele/grokking_algorithms">地址</a>。</p><h1 id="算法简介">1 算法简介</h1><h2 id="二分法">二分法</h2><p>对于包含n个元素的列表，简单查找法最多需要n步（线性时间），而二分法查找最多需要<span class="math inline">\(log_2\ n\)</span>步（简写为<span class="math inline">\(log\ n\)</span>）（对数时间 / l<span class="math inline">\(og\)</span>时间）。</p><p>仅当列表是有序的时候，二分查找才管用。</p><h2 id="大o表示法big-o-notation运行时间">大O表示法（Big <em>O</em> notation）——运行时间</h2><p>简单查找法编写起来容易，出bug可能性小，但运行时间慢。二分法相反。大O表示法给出的运行时间是最大运行时间。</p><p>常见大O运行时间</p><ul><li><span class="math inline">\(O(log\ n)\)</span>，对数时间，包括二分查找</li><li><span class="math inline">\(O(n)\)</span>，线性时间，包括简单查找</li><li><span class="math inline">\(O(n\ log\ n)\)</span>，包括快速排序——一种速度较快的排序算法，以及合并排序</li><li><span class="math inline">\(O(n^2)\)</span>，包括选择排序——一种速度较慢的排序算法</li><li><span class="math inline">\(O(n!)\)</span>，包括后续的旅行商问题的解决方案——一种非常慢的算法</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 二分法 #################################</span><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">binary_search</span>(<span class="hljs-params">numList,item</span>):</span><br>    low = <span class="hljs-number">0</span><br>    high = <span class="hljs-built_in">len</span>(numList) - <span class="hljs-number">1</span><br>    <span class="hljs-keyword">while</span> low &lt;= high:<br>        mid = (low + high) // <span class="hljs-number">2</span><br>        guess = numList[mid]<br>        <span class="hljs-keyword">if</span> guess &lt; item:<br>            low = mid + <span class="hljs-number">1</span><br>        <span class="hljs-keyword">elif</span> guess &gt; item:<br>            high = mid -<span class="hljs-number">1</span><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">return</span> guess<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br><br>numList = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,<span class="hljs-number">100</span>))<br>guess = binary_search(numList,<span class="hljs-number">34</span>)<br><span class="hljs-built_in">print</span>(guess)<br><br><span class="hljs-comment"># exercise #################################</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string"># 1.1,1.2</span><br><span class="hljs-string">import math</span><br><span class="hljs-string"></span><br><span class="hljs-string">print(math.log(128,2)) # 7步</span><br><span class="hljs-string">print(math.log(128*2,2)) # 8步</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">1.3 O(log n)</span><br><span class="hljs-string">1.4 O(n)</span><br><span class="hljs-string">1.5 O(n)</span><br><span class="hljs-string">1.6 O(n)</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-comment"># 阶乘 ##################</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">import math</span><br><span class="hljs-string">print(math.factorial(5)) # 120</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br></code></pre></td></tr></table></figure><h1 id="选择排序">2 选择排序</h1><h2 id="数组和链表">数组和链表</h2><ul><li><p>数组元素在内存中都是相连的（紧靠在一起）。</p><p>分配的内存空间如果小于元素个数，就需要转移位置。为了避免这一点，可以申请预留位置，但这样造成了内存的浪费。元素个数大于申请预留位置的个数后还要转移位置。但数组可以直接访问任何元素。在同一数组中，所有元素的类型都必须相同（都为int、double等）。</p><p><strong>数组的优势在读取元素方面，数组支持随机访问。</strong></p></li><li><p>链表中的元素可以存储在内存中的任何地方。</p><p>链表中的每个元素都存储了下一个元素的地址，从而使一系列随机的内存串在一起。但是正因为这个特点，链表不能跳跃访问中间的元素，而必须从第一个元素开始向后一级一级访问。</p><p><strong>链表的优势在插入和删除元素方面，链表只支持顺序访问。</strong></p></li></ul><table><thead><tr class="header"><th></th><th>数组</th><th>链表</th></tr></thead><tbody><tr class="odd"><td>读取</td><td>O(1)</td><td>O(n)</td></tr><tr class="even"><td>插入</td><td>O(n)</td><td>O(1)</td></tr><tr class="odd"><td>删除</td><td>O(n)</td><td>O(1)</td></tr></tbody></table><h2 id="选择排序-1">选择排序</h2><p>遍历列表（n个元素），依次找出最大值、次大值......最小值，存储到新列表中。每个值遍历一遍，要遍历n遍，每一遍里面要查找n、n-1......1次。平均每次查找0.5xn次，因此运行时间为O(nx0.5xn)，但大O表示法省略0.5这样的常数，因此简单的写作O(n<sup>2</sup>)。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 找到最小值的索引 ########################</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">findSmallest</span>(<span class="hljs-params">arr</span>):</span><br>    smallest = arr[<span class="hljs-number">0</span>]<br>    smallest_index = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-built_in">len</span>(arr)): <span class="hljs-comment"># 不包含0位置处的值（len()也不包含最后一个值，数值是0到len()-1）</span><br>        <span class="hljs-keyword">if</span> arr[i] &lt; smallest:<br>            smallest = arr[i]<br>            smallest_index = i<br>    <span class="hljs-keyword">return</span> smallest_index<br><br><span class="hljs-comment"># 选择排序算法</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">selectionSort</span>(<span class="hljs-params">arr</span>):</span><br>    newArr = []<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(arr)):<br>        smallest = findSmallest(arr)<br>        newArr.append(arr.pop(smallest))<br>        <span class="hljs-comment"># 最开始总数是n，第一次遍历，将arr中选出来的最小值删除，总数为n-1，第二次遍历再删掉，总数为n-2，依次递归</span><br>        <span class="hljs-comment"># [pop()函数删除列表中的值并！！返回被删除的值！！]</span><br>        <span class="hljs-comment"># arr.pop()将arr中的值删除并返回这个值，这里也就是最小值，然后这个值被append函数添加到newArr中</span><br>        <span class="hljs-comment"># 也就是说第一次遍历添加的是n个数中的最小值，第二次添加的是n-1个数中的最小值</span><br>    <span class="hljs-keyword">return</span> newArr<br>    <br>arr = [<span class="hljs-number">5</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>]<br>newArr = selectionSort(arr)<br><span class="hljs-built_in">print</span>(newArr)<br><br><span class="hljs-comment"># excerice #############################</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">问题:如果从第一个元素处插入元素，则后面的元素都要后移一位，这样运行时间就是O(n)</span><br><span class="hljs-string">2.1 链表</span><br><span class="hljs-string">2.2 链表</span><br><span class="hljs-string">2.3 有序数组</span><br><span class="hljs-string">2.4 慢，如果用二分法查找用户名，数组必须是有序的，加入一个A开头的名字注册用户，这个用户名将插入到数组末尾。因此必须对数组排序</span><br><span class="hljs-string">2.5 查找时速度比数组慢，但比链表快；而插入时速度比数组快，但预链表相当。</span><br><span class="hljs-string">    Facobook使用的是基于众多不同的数据结构（散列表，B树等）的数据库。</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br></code></pre></td></tr></table></figure><h1 id="递归">3 递归</h1><p>从套娃盒子中拿出钥匙的两种方法</p><ul><li><p>while循环（自己创建盒子堆）</p><ul><li>创建一个要查找的盒子堆</li><li>从盒子堆取出一个盒子，在里面找。</li><li>如果找到的是盒子，就将其加入盒子堆中，以便以后再查找。</li><li>如果找到钥匙，则大功告成！</li><li>如果没找到钥匙，回到第二步。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">look_for_key</span>(<span class="hljs-params">main_box</span>):</span><br>    pile = main_box.make_a_pile_to_look_through()<br>    <span class="hljs-keyword">while</span> pile <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> empty:<br>        box = pile.grab_a_box()<br>        <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> box:<br>            <span class="hljs-keyword">if</span> item.is_a_box():<br>            pile.append(item)<br>            <span class="hljs-keyword">elif</span> item.is_a_key():<br>            <span class="hljs-built_in">print</span> <span class="hljs-string">&quot;found the key!&quot;</span><br></code></pre></td></tr></table></figure></li><li><p>递归——函数调用自己（盒子堆存储在栈中）</p><ul><li>检查盒子中的每样东西</li><li>如果是盒子，就回到第一步</li><li>如果是钥匙，就大功告成！</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">look_for_key</span>(<span class="hljs-params">box</span>):</span><br>    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> box:<br>        <span class="hljs-keyword">if</span> item.is_a_box():<br>        look_for_key(item) <span class="hljs-comment"># 递归</span><br>        <span class="hljs-keyword">elif</span> item.is_a_key():<br>        <span class="hljs-built_in">print</span> <span class="hljs-string">&quot;found the key!&quot;</span><br></code></pre></td></tr></table></figure></li></ul><p><strong>如果使用循环，程序的性能可能更高；如果使用递归，程序可能更容易理解。</strong>如何选择要看什么对你来说更重要。<a href="http://stackoverflow.com/a/72694/139117">参见</a>。</p><h2 id="基线条件和递归条件">基线条件和递归条件</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">countdown</span>(<span class="hljs-params">i</span>):</span><br>    <span class="hljs-built_in">print</span>(i)<br>    <span class="hljs-keyword">if</span> i &lt;=<span class="hljs-number">0</span>: <span class="hljs-comment"># 基线条件，何时停止，函数不再调用自己</span><br>        <span class="hljs-keyword">return</span><br>    <span class="hljs-keyword">else</span>: <span class="hljs-comment"># 递归条件，函数调用自己</span><br>        countdown(i-<span class="hljs-number">1</span>)<br><br>countdown(<span class="hljs-number">3</span>) <span class="hljs-comment"># 调用函数</span><br></code></pre></td></tr></table></figure><h2 id="栈调用栈call-stack">栈、调用栈（call stack）</h2><p>栈只有两种操作：压入（插入）和弹出（删除并读取）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">greet</span>(<span class="hljs-params">name</span>):</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;hello,&#x27;</span>,name+<span class="hljs-string">&#x27;!&#x27;</span>)<br>    greet2(name)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;greeting ready to say bye...&#x27;</span>)<br>    bye()<br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">greet2</span>(<span class="hljs-params">name</span>):</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;how are you,&#x27;</span>,name+<span class="hljs-string">&#x27;?&#x27;</span>)<br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">bye</span>():</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;ok bye!&#x27;</span>)<br><br>greet(<span class="hljs-string">&#x27;zhao&#x27;</span>)<br></code></pre></td></tr></table></figure><p>递归调用栈</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">fact</span>(<span class="hljs-params">x</span>):</span><br>    <span class="hljs-keyword">if</span> x &lt;= <span class="hljs-number">1</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span> x * fact(x-<span class="hljs-number">1</span>)<br><br><span class="hljs-built_in">print</span>(fact(<span class="hljs-number">3</span>))<br></code></pre></td></tr></table></figure><p>回到最开始的套娃盒子问题，while循环需要自己创建盒子堆，而递归不需要，因为盒子堆存储在栈中。这样使得使用栈很方便，但是这样可能会占用大量内存，如果栈很高，计算机就存储了大量函数调用的信息，这样可以重新编写代码转而使用循环，或者使用尾递归。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">3.1 首先调用了greet函数，函数未执行完成，又调用了greet2函数</span><br><span class="hljs-string">3.2 栈溢出。栈将不断地增大。每个程序可使用的调用栈空间都有限，</span><br><span class="hljs-string">    程序用完这些空间（终将如此）后，将因栈溢出而终止。</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br></code></pre></td></tr></table></figure><h1 id="快速排序">4 快速排序</h1><h2 id="分而治之divide-and-conquer-dc">分而治之（divide and conquer, D&amp;C）</h2><p>使用D&amp;C解决问题的两个步骤</p><ul><li>找出基线条件，这种条件必须尽可能简单</li><li>不断将问题分解（或者说所小规模），直到符合基线条件</li></ul><p>练习</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 4.1 循环</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sum</span>(<span class="hljs-params">arr</span>):</span><br>    total = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> arr:<br>        total += i<br>    <span class="hljs-keyword">return</span> total<br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">sum</span>([<span class="hljs-number">5</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]))<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 4.1 递归</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sum</span>(<span class="hljs-params">arr</span>):</span><br>    <span class="hljs-keyword">if</span> arr == []: <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>    <span class="hljs-keyword">return</span> arr[<span class="hljs-number">0</span>] + <span class="hljs-built_in">sum</span>(arr[<span class="hljs-number">1</span>:])<br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">sum</span>([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>]))<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 4.2</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">num_of_items</span>(<span class="hljs-params">arr</span>):</span><br>    <span class="hljs-keyword">if</span> arr == []: <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> + num_of_items(arr[<span class="hljs-number">1</span>:])<br><br><span class="hljs-built_in">print</span>(num_of_items([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>]))<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 4.3</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">max</span>(<span class="hljs-params"><span class="hljs-built_in">list</span></span>):</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(<span class="hljs-built_in">list</span>) == <span class="hljs-number">2</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">list</span>[<span class="hljs-number">0</span>] <span class="hljs-keyword">if</span> <span class="hljs-built_in">list</span>[<span class="hljs-number">0</span>] &gt; <span class="hljs-built_in">list</span>[<span class="hljs-number">1</span>] <span class="hljs-keyword">else</span> <span class="hljs-built_in">list</span>[<span class="hljs-number">1</span>]<br>    sub_max = <span class="hljs-built_in">max</span>(<span class="hljs-built_in">list</span>[<span class="hljs-number">1</span>:])<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">list</span>[<span class="hljs-number">0</span>] <span class="hljs-keyword">if</span> <span class="hljs-built_in">list</span>[<span class="hljs-number">0</span>] &gt; sub_max <span class="hljs-keyword">else</span> sub_max<br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">max</span>([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>]))<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 基线条件是数组中只剩一个元素。</span><br><span class="hljs-comment"># 递归条件是将数组分成两半，将其中一半丢弃，再对另一半执行二分查找</span><br></code></pre></td></tr></table></figure><h2 id="快速排序-1">快速排序</h2><p>快速排序的工作原理</p><ul><li>首先，从数组中选择一个元素作为基准值（pivot）</li><li>然后，找出比基准值小的元素以及比基准值大的元素，这一步叫分区，数组被分成三分<ul><li>一个所有小于基准值的数构成的子数组</li><li>基准值</li><li>一个所有大于基准值的数构成的子数组</li></ul></li><li>递归</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 快速排序算法</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">quicksort</span>(<span class="hljs-params">array</span>):</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(array) &lt; <span class="hljs-number">2</span>: <span class="hljs-keyword">return</span> array<br>    <span class="hljs-keyword">else</span>:<br>        pivot = array[<span class="hljs-number">0</span>]<br>        less = [i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> array[<span class="hljs-number">1</span>:] <span class="hljs-keyword">if</span> i &lt;= pivot]<br>        greater = [i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> array[<span class="hljs-number">1</span>:] <span class="hljs-keyword">if</span> i &gt;= pivot]<br>        <span class="hljs-keyword">return</span> quicksort(less) + [pivot] + quicksort(greater)<br><br><span class="hljs-built_in">print</span>(quicksort([<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">9</span>,<span class="hljs-number">0</span>]))<br></code></pre></td></tr></table></figure><h2 id="再谈大o表示法">再谈大O表示法</h2><p>快速排序和合并排序比较</p><ul><li>快速排序的平均运行时间为<span class="math inline">\(O(n\ log\ n)\)</span>，最糟糕情况为<span class="math inline">\(O(n^2)\)</span></li><li>快速排序的常量比合并排序的常量小</li><li>快速排序遇到平均情况的可能性比最糟糕情况大的多</li><li>因此，快速查找一般更快</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">4.5 O(n)</span><br><span class="hljs-string">4.6 O(n)</span><br><span class="hljs-string">4.7 O(1)</span><br><span class="hljs-string">4.8 O(n^2)</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br></code></pre></td></tr></table></figure><h1 id="散列表hash-tables">5 散列表（Hash Tables）</h1><h2 id="散列函数hash哈希函数">散列函数（Hash哈希函数）</h2><p>散列函数是将输入映射到数字的函数。散列表也使用数组来存储数据。Python提供的散列表实现为字典。散列表是无序的。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">5.1 是</span><br><span class="hljs-string">5.2 否</span><br><span class="hljs-string">5.3 否</span><br><span class="hljs-string">5.4 是</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br></code></pre></td></tr></table></figure><h2 id="应用案例">应用案例</h2><h3 id="用于查找">用于查找</h3><p>模拟映射关系，将键映射到值。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">phone_book = &#123;&#125;<br>phone_book[<span class="hljs-string">&quot;Jenny&quot;</span>] = <span class="hljs-number">238725</span><br>phone_book[<span class="hljs-string">&quot;Emergency&quot;</span>] = <span class="hljs-number">911</span><br><span class="hljs-built_in">print</span>(phone_book[<span class="hljs-string">&quot;Emergency&quot;</span>])<br></code></pre></td></tr></table></figure><h3 id="防止重复">防止重复</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">check_voter</span>(<span class="hljs-params">name</span>):</span><br>    voted = &#123;&#125;<br>    voted[<span class="hljs-string">&quot;abc&quot;</span>] = <span class="hljs-number">123</span><br>    <span class="hljs-keyword">if</span> voted.get(name): <span class="hljs-comment"># dict.get(key,default=None)</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Kick them out!&quot;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Let the vote&quot;</span>)<br><br>check_voter(<span class="hljs-string">&quot;abc&quot;</span>)<br></code></pre></td></tr></table></figure><h3 id="用作缓存">用作缓存</h3><p>缓存的数据存储在散列表中。网站一般将页面url映射到页面数据</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python">cache = &#123;&#125;<br>cache[<span class="hljs-string">&quot;https://babblingme.gitee.io&quot;</span>] = <span class="hljs-number">123</span><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_page</span>(<span class="hljs-params">url</span>):</span><br>    <span class="hljs-keyword">if</span> cache.get(url):<br>        <span class="hljs-keyword">return</span> cache[url]<br>    <span class="hljs-keyword">else</span>:<br>        data = get_data_from_server(url)<br>        cache[url] = data<br>        <span class="hljs-keyword">return</span> data<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_data_from_server</span>(<span class="hljs-params">url</span>):</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;This is data&quot;</span><br><br><span class="hljs-built_in">print</span>(get_page(<span class="hljs-string">&quot;https://babblingme.gitee.io&quot;</span>))<br></code></pre></td></tr></table></figure><h2 id="冲突与性能">冲突与性能</h2><p>在同一位置处存储不同的键值对就会产生冲突，需要在该位置处添加指向另一位置处的链表解决冲突。如果链表很长就会影响性能。</p><table><thead><tr class="header"><th></th><th>散列表（平均）</th><th>散列表（最坏）</th><th>数组</th><th>链表</th></tr></thead><tbody><tr class="odd"><td>查找</td><td>O(1)</td><td>O(n)</td><td>O(1)</td><td>O(n)</td></tr><tr class="even"><td>插入</td><td>O(1)</td><td>O(n)</td><td>O(n)</td><td>O(1)</td></tr><tr class="odd"><td>删除</td><td>O(1)</td><td>O(n)</td><td>O(n)</td><td>O(1)</td></tr></tbody></table><p>要避免冲突，需要有较低的装填因子和良好的散列函数。</p><p>装填因子=数列表包含的元素数/位置总数。装填因子度量的是散列表中有多少位置是空的。一旦装填因子增大（一般大于0.7就需要调整，大于1意味着有些位置会有两个键值，就需要创建链表），就需要在散列表中添加位置，即调整长度。</p><p>良好的散列函数让数组中的值呈均匀分布。糟糕的散列函数让值扎堆，导致大量冲突。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string"># 感觉答案不太对头</span><br><span class="hljs-string">5.5 D</span><br><span class="hljs-string">5.6 B</span><br><span class="hljs-string">5.7 CD</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br></code></pre></td></tr></table></figure><h1 id="广度优先搜索breadth-first-search">6 广度优先搜索（Breadth-First Search）</h1><h2 id="图简介">图简介</h2><p>解决最短路径问题（shorterst-path problem）的算法被称为广度优先搜索。需要两个步骤</p><ul><li>使用图来建立问题模型</li><li>使用广度优先搜索解决问题</li></ul><p>图模拟一组连接。图由节点（node）和边（edge）组成，一个节点可能与众多节点直接相连，这些节点被称为邻居。</p><h2 id="广度优先搜索">广度优先搜索</h2><p>广度优先搜索是一种用于图的查找算法，可以帮助回答两类问题</p><ul><li>从节点A出发，有前往节点B的路径吗？</li><li>从节点A出发，前往节点B的哪条路径最短？</li></ul><p>广度优先搜索先检查一度关系，再检查二度关系。</p><p>实现按添加顺序检查的数据结构就是队列（queue）。队列类似于栈，不能随机地访问队列中的元素。队列只支持两种操作：入队和出队。队列是一种先进先出（First In First Out，FIFO）的数据结构，而栈是一种后进先出（Last In First Out，LIFO）的数据结构。可以比较形象的理解为，队列是前后堆叠，而栈是上下堆叠。</p><h3 id="实现图">实现图</h3><p><img src="/ass/20220104-map.png" /></p><p>Anuj、Peggy、Thom和Jonny都没有邻居，这是因为虽然有指向它们的箭头但是没有从它们出发指向别人的箭头，这种叫有向图（directed graph），其关系是单向的。因此Anuj是Bob的邻居，但Bob不是Anuj的邻居。无向图（undirected graph）没有箭头，直接相连的节点互为邻居。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python">graph = &#123;&#125;<br>graph[<span class="hljs-string">&quot;You&quot;</span>] = [<span class="hljs-string">&quot;alice&quot;</span>,<span class="hljs-string">&quot;bob&quot;</span>,<span class="hljs-string">&quot;claire&quot;</span>] <span class="hljs-comment"># you被映射到一个包含其所有邻居的数组</span><br>graph[<span class="hljs-string">&quot;bob&quot;</span>] = [<span class="hljs-string">&quot;anuj&quot;</span>,<span class="hljs-string">&quot;peggy&quot;</span>]<br>graph[<span class="hljs-string">&quot;alice&quot;</span>] = [<span class="hljs-string">&quot;peggy&quot;</span>]<br>graph[<span class="hljs-string">&quot;claire&quot;</span>] = [<span class="hljs-string">&quot;jonny&quot;</span>,<span class="hljs-string">&quot;thom&quot;</span>]<br>graph[<span class="hljs-string">&quot;anuj&quot;</span>] = []<br>graph[<span class="hljs-string">&quot;peggy&quot;</span>] = []<br>graph[<span class="hljs-string">&quot;thom&quot;</span>] = []<br>graph[<span class="hljs-string">&quot;jonny&quot;</span>] = []<br><span class="hljs-comment"># 散列表是无序的，因此添加键值对的顺序无关紧要</span><br><span class="hljs-comment"># 但是后面的搜索列表必须要按先后顺序进行搜索，所以采用队列</span><br></code></pre></td></tr></table></figure><h3 id="实现算法">实现算法</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> deque<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">person_is_seller</span>(<span class="hljs-params">name</span>):</span><br>    <span class="hljs-keyword">return</span> name[-<span class="hljs-number">1</span>] == <span class="hljs-string">&quot;m&quot;</span> <span class="hljs-comment"># 最后一个字母是m返回真</span><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">search</span>(<span class="hljs-params">name</span>):</span><br>    search_queue = deque() <span class="hljs-comment"># 创建双端队列，搜索列表必须是队列，以保证按加入顺序搜索列表中的人</span><br>    search_queue += graph[name]<br>    searched = []<br>    <span class="hljs-keyword">while</span> search_queue:<br>        person = search_queue.popleft() <span class="hljs-comment"># pop用于stack，popleft用于collections</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> person <span class="hljs-keyword">in</span> searched: <span class="hljs-comment"># 对于检查过的人不必重复检查</span><br>            <span class="hljs-keyword">if</span> person_is_seller(person):<br>                <span class="hljs-built_in">print</span>(person+<span class="hljs-string">&quot; is a mango seller!&quot;</span>)<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>            <span class="hljs-keyword">else</span>:<br>                search_queue += graph[person]<br>                searched.append(person)<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;No mango seller&quot;</span>)<br><br>search(<span class="hljs-string">&quot;claire&quot;</span>)<br></code></pre></td></tr></table></figure><h3 id="运行时间">运行时间</h3><p>广度优先搜索的运行时间是O(人数+边数)，O(V+E)，V是顶点数vertice，E是边数edge。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">6.3 B可行</span><br><span class="hljs-string">6.4 # 拓扑排序，A任务依赖于B，在列表中A就必须在B后边</span><br><span class="hljs-string">1) 起床</span><br><span class="hljs-string">2) 锻炼</span><br><span class="hljs-string">3) 刷牙</span><br><span class="hljs-string">4) 打包午餐</span><br><span class="hljs-string">5) 洗澡</span><br><span class="hljs-string">6) 吃早餐</span><br><span class="hljs-string">7) 穿衣服</span><br><span class="hljs-string">6.5 AC # 树是图的子集</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br></code></pre></td></tr></table></figure><h1 id="迪克斯特拉算法">7 迪克斯特拉算法</h1><h2 id="简介">简介</h2><p>带权重的图称为加权图（weighted graph），不带权重的图称为非加权图（unweighted graph）。广度优先搜索可计算非加权图中的最短路径。迪克斯特拉算法（Dijkstra's algorithm）可计算加权图中的最短（也就是最快，或总权重最小）路径。</p><p>从一个节点出发，走一圈后又回到这个节点，这就是一个环。环增加了权重，绕环的路径不可能是最短路径。无向图是两个节点彼此指向对方，其实就是环。在无向图中，每条边都是一个环。迪克斯特拉算法只适用于有向无环图（directed acyclic graph, DAG）。</p><p>迪克斯特拉算法的四个步骤：</p><ul><li>找出最便宜的节点，即可在最短时间内前往的节点。</li><li>对于该节点的邻居，检查是否有前往它们的更短路径，如果有，就更新其开销。</li><li>重复这个过程，直到对图中的每个节点都这样做了（除终点）。</li><li>计算最终路径。</li></ul><h2 id="换钢琴">换钢琴</h2><p>Rama，想拿一本乐谱换架钢琴。</p><p>Alex说：“这是我最喜欢的乐队Destroyer的海报，我愿意拿它换你的乐谱。如果你再加5美元，还可拿乐谱换我这张稀有的Rick Astley黑胶唱片。”</p><p>Amy说：“哇，我听说这张黑胶唱片里有首非常好听的歌曲，我愿意拿我的吉他或架子鼓换这张海报或黑胶唱片。”</p><p>Beethoven惊呼：“我一直想要吉他，我愿意拿我的钢琴换Amy的吉他或架子鼓。“</p><p><img src="/ass/20220105-piano.png" /></p><table><thead><tr class="header"><th>父节点</th><th>节点</th><th>开销</th></tr></thead><tbody><tr class="odd"><td><strong>乐谱</strong></td><td><strong>黑胶唱片</strong></td><td><strong>5</strong></td></tr><tr class="even"><td><strong><em>乐谱</em></strong></td><td><strong><em>海报</em></strong></td><td><strong><em>0</em></strong></td></tr><tr class="odd"><td>-</td><td>低音吉他</td><td><span class="math inline">\(\infty\)</span></td></tr><tr class="even"><td>-</td><td>架子鼓</td><td><span class="math inline">\(\infty\)</span></td></tr><tr class="odd"><td>-</td><td>钢琴</td><td><span class="math inline">\(\infty\)</span></td></tr></tbody></table><p>注：无穷大代表暂时不知道如何从起点前往这些节点。</p><ul><li><p>第一步：找出最便宜的节点。换海报最便宜</p></li><li><p>第二步：计算前往该节点的各个邻居的开销。</p></li></ul><table><thead><tr class="header"><th>父节点</th><th>节点</th><th>开销</th></tr></thead><tbody><tr class="odd"><td>乐谱</td><td>黑胶唱片</td><td>5</td></tr><tr class="even"><td>乐谱</td><td>海报</td><td>0</td></tr><tr class="odd"><td><strong><em>海报</em></strong></td><td><strong><em>低音吉他</em></strong></td><td><strong><em>30</em></strong></td></tr><tr class="even"><td><strong>海报</strong></td><td><strong>架子鼓</strong></td><td><strong>35</strong></td></tr><tr class="odd"><td>-</td><td>钢琴</td><td><span class="math inline">\(\infty\)</span></td></tr></tbody></table><ul><li>再执行第一步：下一个最便宜的节点是黑胶唱片——需要额外支付5美元。</li><li>再执行第二部：更新黑胶唱片的各个邻居的开销。</li></ul><table><thead><tr class="header"><th>父节点</th><th>节点</th><th>开销</th></tr></thead><tbody><tr class="odd"><td>乐谱</td><td>黑胶唱片</td><td>5</td></tr><tr class="even"><td>乐谱</td><td>海报</td><td>0</td></tr><tr class="odd"><td><strong><em>黑胶唱片</em></strong></td><td><strong><em>低音吉他</em></strong></td><td><strong><em>20</em></strong></td></tr><tr class="even"><td><strong>黑胶唱片</strong></td><td><strong>架子鼓</strong></td><td><strong>25</strong></td></tr><tr class="odd"><td>-</td><td>钢琴</td><td><span class="math inline">\(\infty\)</span></td></tr></tbody></table><p>注：开销价格为途径的总价格。经“黑胶唱片”前往“低音吉他”和“架子鼓”的开销比经“海报”前往这两个节点要低。所以将这两个节点的父节点改为“黑胶唱片”</p><p>最便宜的是低音吉他，先更新其开销</p><table><thead><tr class="header"><th>父节点</th><th>节点</th><th>开销</th></tr></thead><tbody><tr class="odd"><td>乐谱</td><td>黑胶唱片</td><td>5</td></tr><tr class="even"><td>乐谱</td><td>海报</td><td>0</td></tr><tr class="odd"><td>黑胶唱片</td><td>低音吉他</td><td>20</td></tr><tr class="even"><td>黑胶唱片</td><td>架子鼓</td><td>25</td></tr><tr class="odd"><td><strong><em>低音吉他</em></strong></td><td><strong><em>钢琴</em></strong></td><td><strong><em>40</em></strong></td></tr></tbody></table><p>然后未处理节点中最便宜的是架子鼓，更新其开销</p><table><thead><tr class="header"><th>父节点</th><th>节点</th><th>开销</th></tr></thead><tbody><tr class="odd"><td>乐谱</td><td>黑胶唱片</td><td>5</td></tr><tr class="even"><td>乐谱</td><td>海报</td><td>0</td></tr><tr class="odd"><td>黑胶唱片</td><td>低音吉他</td><td>20</td></tr><tr class="even"><td>黑胶唱片</td><td>架子鼓</td><td>25</td></tr><tr class="odd"><td><strong><em>架子鼓</em></strong></td><td><strong><em>钢琴</em></strong></td><td><strong><em>35</em></strong></td></tr></tbody></table><p>这里经架子鼓到达钢琴开销更低，因此更新钢琴父节点为架子鼓。最终路径就可以确定下来了</p><p>钢琴的父节点是架子鼓，架子鼓的父节点是黑胶唱片，黑胶唱片的父节点是乐谱。</p><h2 id="负权边">负权边</h2><p>迪克斯特拉算法假设：对于处理过的海报节点，没有前往该节点的更短路径。这种假设仅在没有负权边时才成立。因此，不能将迪克斯特拉算法用于包含负权边的图。包含负权边的图，可以用贝尔曼-福德算法（Bellman-Ford algorithm）。</p><h2 id="算法实现">算法实现</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 散列表-图</span><br>graph = &#123;&#125;<br>graph[<span class="hljs-string">&quot;start&quot;</span>] = &#123;&#125;<br>graph[<span class="hljs-string">&quot;start&quot;</span>][<span class="hljs-string">&quot;a&quot;</span>] = <span class="hljs-number">6</span><br>graph[<span class="hljs-string">&quot;start&quot;</span>][<span class="hljs-string">&quot;b&quot;</span>] = <span class="hljs-number">2</span><br>graph[<span class="hljs-string">&quot;a&quot;</span>] = &#123;&#125;<br>graph[<span class="hljs-string">&quot;a&quot;</span>][<span class="hljs-string">&quot;fin&quot;</span>] = <span class="hljs-number">1</span><br>graph[<span class="hljs-string">&quot;b&quot;</span>] = &#123;&#125;<br>graph[<span class="hljs-string">&quot;b&quot;</span>][<span class="hljs-string">&quot;a&quot;</span>] = <span class="hljs-number">3</span><br>graph[<span class="hljs-string">&quot;b&quot;</span>][<span class="hljs-string">&quot;fin&quot;</span>] = <span class="hljs-number">5</span><br>graph[<span class="hljs-string">&quot;fin&quot;</span>] = &#123;&#125;<br><br><span class="hljs-comment"># 散列表-开销</span><br>infinity = <span class="hljs-built_in">float</span>(<span class="hljs-string">&quot;inf&quot;</span>)<br>costs = &#123;&#125;<br>costs[<span class="hljs-string">&quot;a&quot;</span>] = <span class="hljs-number">6</span><br>costs[<span class="hljs-string">&quot;b&quot;</span>] = <span class="hljs-number">2</span><br>costs[<span class="hljs-string">&quot;fin&quot;</span>] = infinity<br><br><span class="hljs-comment"># 散列表-父节点</span><br>parents = &#123;&#125;<br>parents[<span class="hljs-string">&quot;a&quot;</span>] = <span class="hljs-string">&quot;start&quot;</span><br>parents[<span class="hljs-string">&quot;b&quot;</span>] = <span class="hljs-string">&quot;start&quot;</span><br>parents[<span class="hljs-string">&quot;fin&quot;</span>] = <span class="hljs-literal">None</span><br><br><span class="hljs-comment"># 数组-处理过的节点</span><br>processed = []<br><br><span class="hljs-comment"># 找到最小开销的节点</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">find_lowest_cost_node</span>(<span class="hljs-params">costs</span>):</span><br>    lowest_cost = <span class="hljs-built_in">float</span>(<span class="hljs-string">&quot;inf&quot;</span>)<br>    lowest_cost_node = <span class="hljs-literal">None</span><br>    <span class="hljs-keyword">for</span> node <span class="hljs-keyword">in</span> costs:<br>        cost = costs[node]<br>        <span class="hljs-keyword">if</span> cost &lt; lowest_cost <span class="hljs-keyword">and</span> node <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> processed:<br>            lowest_cost = cost<br>            lowest_cost_node = node<br>    <span class="hljs-keyword">return</span> lowest_cost_node<br><br><span class="hljs-comment"># 迪克斯特拉算法</span><br>node = find_lowest_cost_node(costs) <span class="hljs-comment"># 找出开销最低的节点</span><br><span class="hljs-keyword">while</span> node <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:<br>    cost = costs[node] <span class="hljs-comment"># 获取该节点的开销及邻居</span><br>    neighbors = graph[node]<br>    <span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> neighbors.keys(): <span class="hljs-comment"># 遍历邻居</span><br>        new_cost = cost + neighbors[n] <span class="hljs-comment"># 新开销</span><br>        <span class="hljs-keyword">if</span> costs[n] &gt; new_cost: <span class="hljs-comment"># 新旧开销对比</span><br>            costs[n] = new_cost <span class="hljs-comment"># 新开销更低就更新开销</span><br>            parents[n] = node <span class="hljs-comment"># 更新父节点</span><br>    processed.append(node)<br>    node = find_lowest_cost_node(costs)<br><span class="hljs-built_in">print</span>(parents)<br></code></pre></td></tr></table></figure><p>练习题，顺便简化了散列表的创建</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">7.1 A 8, B 60, C 4 但无法用迪克斯特拉算法求解</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-comment"># 7.1 A</span><br><span class="hljs-comment">#######################直接创建字典</span><br><span class="hljs-comment"># 散列表-图</span><br>graph = &#123;<span class="hljs-string">&quot;start&quot;</span>:&#123;<span class="hljs-string">&quot;a&quot;</span>:<span class="hljs-number">5</span>,<span class="hljs-string">&quot;b&quot;</span>:<span class="hljs-number">2</span>&#125;,<span class="hljs-string">&quot;a&quot;</span>:&#123;<span class="hljs-string">&quot;c&quot;</span>:<span class="hljs-number">2</span>,<span class="hljs-string">&quot;d&quot;</span>:<span class="hljs-number">4</span>&#125;,<br>        <span class="hljs-string">&quot;b&quot;</span>:&#123;<span class="hljs-string">&quot;a&quot;</span>:<span class="hljs-number">8</span>,<span class="hljs-string">&quot;c&quot;</span>:<span class="hljs-number">7</span>&#125;,<span class="hljs-string">&quot;c&quot;</span>:&#123;<span class="hljs-string">&quot;fin&quot;</span>:<span class="hljs-number">1</span>&#125;,<br>        <span class="hljs-string">&quot;d&quot;</span>:&#123;<span class="hljs-string">&quot;c&quot;</span>:<span class="hljs-number">6</span>,<span class="hljs-string">&quot;fin&quot;</span>:<span class="hljs-number">3</span>&#125;,<span class="hljs-string">&quot;fin&quot;</span>:&#123;&#125;&#125;<br><br><span class="hljs-comment"># 散列表-开销</span><br>infinity = <span class="hljs-built_in">float</span>(<span class="hljs-string">&quot;inf&quot;</span>)<br>costs = &#123;<span class="hljs-string">&quot;a&quot;</span>:<span class="hljs-number">5</span>,<span class="hljs-string">&quot;b&quot;</span>:<span class="hljs-number">2</span>,<span class="hljs-string">&quot;c&quot;</span>:infinity,<span class="hljs-string">&quot;d&quot;</span>:infinity,<span class="hljs-string">&quot;fin&quot;</span>:infinity&#125;<br><br><span class="hljs-comment"># 散列表-父节点</span><br>parents = &#123;<span class="hljs-string">&quot;a&quot;</span>:<span class="hljs-string">&quot;start&quot;</span>,<span class="hljs-string">&quot;b&quot;</span>:<span class="hljs-string">&quot;start&quot;</span>,<span class="hljs-string">&quot;c&quot;</span>:<span class="hljs-literal">None</span>,<span class="hljs-string">&quot;d&quot;</span>:<span class="hljs-literal">None</span>,<span class="hljs-string">&quot;fin&quot;</span>:<span class="hljs-literal">None</span>&#125;<br><br><span class="hljs-comment"># 数组-处理过的节点</span><br>processed = []<br><span class="hljs-comment">##############################调用迪克斯特拉算法</span><br><span class="hljs-built_in">print</span>(parents)<br><span class="hljs-comment"># 输出结果： &#123;&#x27;a&#x27;: &#x27;start&#x27;, &#x27;b&#x27;: &#x27;start&#x27;, &#x27;c&#x27;: &#x27;a&#x27;, &#x27;d&#x27;: &#x27;a&#x27;, &#x27;fin&#x27;: &#x27;c&#x27;&#125;</span><br><span class="hljs-comment"># 通过父节点推断除最短路径，fin-&gt;c-&gt;a-&gt;start，然后权重相加得到8</span><br></code></pre></td></tr></table></figure><h1 id="贪婪算法贪心算法">8 贪婪算法（贪心算法）</h1><h2 id="教室调度和背包问题">教室调度和背包问题</h2><p>贪婪算法：每步都选择局部最优解，得到的就是全局最优解。</p><p>有如下课表，将尽可能多的课程安排在一间教室</p><p><img src="/ass/20220105-class.png" /></p><ul><li>选出结束最早的课，也就是这间教室上的第一节课。</li><li>然后选择第一节课结束之后才开始的课。重复以上步骤就可以了。</li></ul><p>小偷背着可装入一定重量的背包，在商场盗窃各种商品装入背包，如何利益最大化</p><ul><li>盗窃可装入背包的最贵商品</li><li>再盗窃还可装入背包的最贵商品，以此类推。</li></ul><p>这样贪婪算法找到的并不是最优解，只是接近最优解。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">8.1 1)找到最大程度贴合卡车尺寸的箱子，2)在装入能装入卡车的最大尺寸的箱子。不能</span><br><span class="hljs-string">8.2 1)找出最大价值的旅行，2)找出剩余天数内能进行的最大价值旅行。不能</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br></code></pre></td></tr></table></figure><h2 id="集合覆盖问题set-covering-problem">集合覆盖问题（set covering problem）</h2><ul><li>列出每个可能的广播台集合，这被称为幂集（power set），可能的子集有2<sup>2</sup>个（<a href="https://www.shuxuele.com/sets/power-set.html">详见</a>）。</li><li>在这些集合中，选出覆盖全美50个州的最小集合。</li></ul><p>因为有2<sup>n</sup>个可能的集合，所以运行时间为<span class="math inline">\(O(2^n)\)</span>。运行时间太长了。可以通过贪婪算法近似求解。</p><h3 id="近似算法">近似算法</h3><ul><li>选出一个覆盖最多未覆盖州的广播台。</li><li>重复第一步，直到覆盖了所有州。</li></ul><p>这是一种近似算法（approximation algorithm），在获得精确解需要的时间太长时，可使用近似算法。判断近似算法优劣的标准如下：</p><ul><li>速度有多快。</li><li>得到的近似解与最优解的接近程度。</li></ul><p>在上个例子中，贪婪算法的运行时间为<span class="math inline">\(O(n^2)\)</span>，其中<span class="math inline">\(n\)</span>为广播台数量。下面看看解决在这个问题的代码，这里做了简化。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 近似算法</span><br>states_needed = <span class="hljs-built_in">set</span>([<span class="hljs-string">&quot;mt&quot;</span>,<span class="hljs-string">&quot;wa&quot;</span>,<span class="hljs-string">&quot;or&quot;</span>,<span class="hljs-string">&quot;id&quot;</span>,<span class="hljs-string">&quot;nv&quot;</span>,<span class="hljs-string">&quot;ut&quot;</span>,<span class="hljs-string">&quot;ca&quot;</span>,<span class="hljs-string">&quot;az&quot;</span>]) <span class="hljs-comment"># 需要覆盖的州。这是集合，类似于列表，但集合不能包含重复的元素</span><br>stations = &#123;&#125;<br>stations[<span class="hljs-string">&quot;knoe&quot;</span>] = <span class="hljs-built_in">set</span>([<span class="hljs-string">&quot;id&quot;</span>,<span class="hljs-string">&quot;nv&quot;</span>,<span class="hljs-string">&quot;ut&quot;</span>])<br>stations[<span class="hljs-string">&quot;ktwo&quot;</span>] = <span class="hljs-built_in">set</span>([<span class="hljs-string">&quot;wa&quot;</span>,<span class="hljs-string">&quot;id&quot;</span>,<span class="hljs-string">&quot;mt&quot;</span>])<br>stations[<span class="hljs-string">&quot;kthree&quot;</span>] = <span class="hljs-built_in">set</span>([<span class="hljs-string">&quot;or&quot;</span>,<span class="hljs-string">&quot;nv&quot;</span>,<span class="hljs-string">&quot;ca&quot;</span>])<br>stations[<span class="hljs-string">&quot;kfour&quot;</span>] = <span class="hljs-built_in">set</span>([<span class="hljs-string">&quot;nv&quot;</span>,<span class="hljs-string">&quot;ut&quot;</span>])<br>stations[<span class="hljs-string">&quot;kfive&quot;</span>] = <span class="hljs-built_in">set</span>([<span class="hljs-string">&quot;ca&quot;</span>,<span class="hljs-string">&quot;az&quot;</span>])<br>finall_stations = <span class="hljs-built_in">set</span>()<br><br><span class="hljs-keyword">while</span> states_needed:<br>    best_station = <span class="hljs-literal">None</span> <span class="hljs-comment"># 可覆盖最多未覆盖州的广播台</span><br>    states_covered = <span class="hljs-built_in">set</span>() <span class="hljs-comment"># 包含该广播台覆盖的所有未覆盖州</span><br>    <span class="hljs-keyword">for</span> station, states <span class="hljs-keyword">in</span> stations.items(): <span class="hljs-comment"># 取出stations的两个元素（键值），第一个是广播台，第二个是该广播台覆盖的州</span><br>        covered = states_needed &amp; states<br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(covered) &gt; <span class="hljs-built_in">len</span>(states_covered): <span class="hljs-comment"># 只有没完全覆盖就进入循环</span><br>            best_station = station<br>            states_covered = covered<br>    states_needed -= states_covered <span class="hljs-comment"># 减掉以覆盖州</span><br>    finall_stations.add(best_station) <span class="hljs-comment"># 选出来的最适合的广播台（每次运行结果不一样）</span><br><br><span class="hljs-built_in">print</span>(finall_stations)<br></code></pre></td></tr></table></figure><p>交集、差集和并集</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">fruits = <span class="hljs-built_in">set</span>([<span class="hljs-string">&quot;avocado&quot;</span>,<span class="hljs-string">&quot;tomato&quot;</span>,<span class="hljs-string">&quot;banana&quot;</span>])<br>vegetables = <span class="hljs-built_in">set</span>([<span class="hljs-string">&quot;beets&quot;</span>,<span class="hljs-string">&quot;carrots&quot;</span>,<span class="hljs-string">&quot;tomato&quot;</span>])<br>test = fruits - vegetables <span class="hljs-comment"># 交集&amp;，并集|，差集-（差集是剔除前者集合中后者集合含有的元素）</span><br><span class="hljs-built_in">print</span>(test)<br></code></pre></td></tr></table></figure><p>练习题</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">8.3 不是</span><br><span class="hljs-string">8.4 是，贪心算法是先找到局部最优解，而广度优先搜索及迪克斯特拉算法每一步都是找到最短路径（局部最优解），因此属于贪心算法。</span><br><span class="hljs-string">8.5 是</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br></code></pre></td></tr></table></figure><h2 id="np完全问题">NP完全问题</h2><p>旅行商问题和集合覆盖问题有一些共同指出：需要计算所有解，并从中挑出最小/最短的那个。这两个问题都属于NP完全问题。NP完全问题的意思是多项式复杂程度的非确定性问题（Non-deterministic Polynomial Complete），其简单定义就是以难解著称的问题。NP完全问题基本不可能快速求解，只能近似求解。贪婪算法是不错的近似算法。</p><h3 id="如何识别np完全问题">如何识别NP完全问题</h3><p>无法直接判断问题是不是NP完全问题，只有一些细节值得注意</p><ul><li>元素较少时算法的运行速度非常快，但随着元素数量的增加，速度会变得非常慢。</li><li>涉及“所有组合”的问题通常是NP完全问题。</li><li>不能将问题分成小问题，必须考虑各种可能的情况。这可能是NP完全问题。</li><li>如果问题涉及序列（如旅行商问题中的城市序列）且难以解决，它可能就是NP完全问题。</li><li>如果问题涉及集合（如广播台集合）且难以解决，它可能就是NP完全问题。</li><li>如果问题可转换为集合覆盖问题或旅行商问题，那它肯定是NP完全问题。</li></ul><p>练习题</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">8.6 是，经由几个点的最短路径问题，就是旅行商问题</span><br><span class="hljs-string">8.7 是，集合覆盖问题？</span><br><span class="hljs-string">8.8 是，集合覆盖问题</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br></code></pre></td></tr></table></figure><h1 id="动态规划">9 动态规划</h1><h2 id="背包问题">背包问题</h2><p>小偷背着一个可装4磅东西的背包，可盗窃的商品有：</p><table><thead><tr class="header"><th>商品</th><th>价格</th><th>重量</th></tr></thead><tbody><tr class="odd"><td>音响</td><td>3000美元</td><td>4磅</td></tr><tr class="even"><td>笔记本电脑</td><td>2000美元</td><td>3磅</td></tr><tr class="odd"><td>吉他</td><td>1500美元</td><td>1磅</td></tr></tbody></table><p>如何让盗取的商品价值最高？</p><h3 id="简单算法">简单算法</h3><p>排列组合有2<sup>n</sup>种情况，运行时间太慢，贪心算法可以得到近似解，但不一定是最优解。</p><h3 id="动态规划-1">动态规划</h3><p>动态规划先解决子问题，再逐步解决大问题。每个动态规划算法都从一个网格开始，背包问题的网格如下。</p><table><thead><tr class="header"><th></th><th>1</th><th>2</th><th>3</th><th>4</th></tr></thead><tbody><tr class="odd"><td>吉他</td><td>1500G</td><td>1500G</td><td>1500G</td><td>1500G</td></tr><tr class="even"><td>音响</td><td>1500G</td><td>1500G</td><td>1500G</td><td>3000S</td></tr><tr class="odd"><td>笔记本电脑</td><td>1500G</td><td>1500G</td><td><strong>2000L</strong></td><td><strong><em>3500L G</em></strong></td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">cell[i][j] = cell[i-<span class="hljs-number">1</span>][j] <span class="hljs-keyword">or</span> value + cell[i-<span class="hljs-number">1</span>][j-weight] <span class="hljs-comment"># value是当前商品的价值，weight是当前商品重量</span><br><span class="hljs-comment"># 当前单元格的值=上一个单元格的值 或者 当前商品的价值+剩余空间的价值</span><br></code></pre></td></tr></table></figure><h2 id="背包问题faq">背包问题FAQ</h2><ul><li>4件商品</li></ul><p>第4件商品iPhone：2000美元，1磅</p><table><thead><tr class="header"><th></th><th>1</th><th>2</th><th>3</th><th>4</th></tr></thead><tbody><tr class="odd"><td>吉他</td><td>1500G</td><td>1500G</td><td>1500G</td><td>1500G</td></tr><tr class="even"><td>音响</td><td>1500G</td><td>1500G</td><td>1500G</td><td>3000S</td></tr><tr class="odd"><td>笔记本电脑</td><td>1500G</td><td>1500G</td><td>2000L</td><td>3500L G</td></tr><tr class="even"><td>iPhone</td><td><strong>2000I</strong></td><td><strong>3500G I</strong></td><td><strong>3500G I</strong></td><td><strong><em>4000L I</em></strong></td></tr></tbody></table><ul><li>5件商品</li></ul><p>第5件商品MP3：1000美元，1磅</p><table><thead><tr class="header"><th></th><th>1</th><th>2</th><th>3</th><th>4</th></tr></thead><tbody><tr class="odd"><td>吉他</td><td>1500G</td><td>1500G</td><td>1500G</td><td>1500G</td></tr><tr class="even"><td>音响</td><td>1500G</td><td>1500G</td><td>1500G</td><td>3000S</td></tr><tr class="odd"><td>笔记本电脑</td><td>1500G</td><td>1500G</td><td>2000L</td><td>3500L G</td></tr><tr class="even"><td>iPhone</td><td>2000I</td><td>3500G I</td><td>3500G I</td><td>4000L I</td></tr><tr class="odd"><td>MP3</td><td>2000I</td><td>3500G I</td><td>3500G I</td><td>4000L I</td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 9.1 不偷</span><br></code></pre></td></tr></table></figure><ul><li>行的排列顺序发生变化</li></ul><p>行的排列顺序发生变化时，最终答案不变，即各行的排列顺序无关紧要。</p><table><thead><tr class="header"><th></th><th>1</th><th>2</th><th>3</th><th>4</th></tr></thead><tbody><tr class="odd"><td>音响</td><td>-</td><td>-</td><td>-</td><td>3000S</td></tr><tr class="even"><td>笔记本电脑</td><td>-</td><td>-</td><td>2000L</td><td>3000S</td></tr><tr class="odd"><td>吉他</td><td>1500G</td><td>1500G</td><td>2000L</td><td>3500G L</td></tr></tbody></table><p>逐列填充网格可能会有影响</p><ul><li>增加一件更小的商品</li></ul><p>比如一条项链：1000美元，0.5磅。这需要将网格细化，每列最小刻度为0.5。</p><ul><li>偷商品的一部分</li></ul><p>动态规划没办法处理连续性问题，只能处理分立问题。这种情况可以用贪婪算法处理。（1）尽可能多的拿价值最高的商品，（2）如果拿光了，再尽可能多的拿价值次高的商品，以此类推。</p><ul><li>旅游行程最优化</li></ul><p>你有两天假期，旅游地点及时间如下</p><table><thead><tr class="header"><th>名胜</th><th>时间</th><th>评分</th></tr></thead><tbody><tr class="odd"><td>威斯敏斯特教堂</td><td>0.5天</td><td>7</td></tr><tr class="even"><td>环球剧场</td><td>0.5天</td><td>6</td></tr><tr class="odd"><td>英国国家美术馆</td><td>1天</td><td>9</td></tr><tr class="even"><td>大英博物馆</td><td>2天</td><td>9</td></tr><tr class="odd"><td>圣保罗大教堂</td><td>0.5天</td><td>8</td></tr></tbody></table><p>如何确定旅游行程？绘制动态规划网格如下</p><table><thead><tr class="header"><th></th><th>0.5</th><th>1</th><th>1.5</th><th>2</th></tr></thead><tbody><tr class="odd"><td>威斯敏斯特教堂W</td><td>7W</td><td>7W</td><td>7W</td><td>7W</td></tr><tr class="even"><td>环球剧场T</td><td>7W</td><td>13W T</td><td>13W T</td><td>13W T</td></tr><tr class="odd"><td>英国国家美术馆A</td><td>7W</td><td>13W T</td><td>16W A</td><td>22W A T</td></tr><tr class="even"><td>大英博物馆</td><td>7W</td><td>13W T</td><td>16W A</td><td>22W A T</td></tr><tr class="odd"><td>圣保罗大教堂S</td><td>8S</td><td>15W S</td><td>17S A</td><td>24W S A</td></tr></tbody></table><p>旅游行程为：威斯敏斯特教堂-&gt;圣保罗大教堂-&gt;英国国家美术馆</p><ul><li>处理相互依赖的情况</li></ul><p>仅当每个子问题都是离散的，即不依赖于其他子问题时，动态规划才管用。</p><ul><li>计算最终的解时不会涉及两个以上子背包</li></ul><p>最多只需要合并两个子背包，即根本不会涉及两个以上的子背包。不过这些子背包可能又包含子背包。</p><ul><li>最优解可能导致背包没装满</li></ul><p>练习9.2</p><table><thead><tr class="header"><th></th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th></tr></thead><tbody><tr class="odd"><td>水W</td><td>-</td><td>-</td><td>10W</td><td>10W</td><td>10W</td><td>10W</td></tr><tr class="even"><td>书B</td><td>3B</td><td>3B</td><td>10W</td><td>13BW</td><td>13BW</td><td>13BW</td></tr><tr class="odd"><td>食物F</td><td>3B</td><td>9F</td><td>12FB</td><td>13BW</td><td>19FW</td><td>22FBW</td></tr><tr class="even"><td>夹克J</td><td>3B</td><td>9F</td><td>12FB</td><td>14JW</td><td>19FW</td><td>22FBW</td></tr><tr class="odd"><td>相机C</td><td>6C</td><td>9CB</td><td>15CF</td><td>18CFB</td><td>20CJF</td><td>25CFW</td></tr></tbody></table><p>应该带水、食物和相机</p><h2 id="最长公共子串">最长公共子串</h2><p>费曼算法（滑稽）</p><ul><li>将问题写下来</li><li>好好思考</li><li>将答案写下来</li></ul><p>一个输错的单词hish，更像fish还是fosh？</p><table><thead><tr class="header"><th></th><th>h</th><th>i</th><th>s</th><th>h</th></tr></thead><tbody><tr class="odd"><td>f</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr class="even"><td>i</td><td>0</td><td>1</td><td>0</td><td>0</td></tr><tr class="odd"><td>s</td><td>0</td><td>0</td><td>2</td><td>0</td></tr><tr class="even"><td>h</td><td>0</td><td>0</td><td>0</td><td>3</td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">if</span> word_a[i] == word_b[j]:<br>    cell[i][j] = cell[i-<span class="hljs-number">1</span>][j-<span class="hljs-number">1</span>] + <span class="hljs-number">1</span><br><span class="hljs-keyword">else</span>:<br>    cell[i][j] = <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><p>最长公共子串：两个字符串中连续相同的部分。</p><p>最长公共子序列：两个字符串中都有的序列包含的字母数。</p><p>两者的区别是：子串要求在原字符串中是连续的，而子序列则只需保持相对顺序，并不要求连续。</p><table><thead><tr class="header"><th></th><th>f</th><th>o</th><th>s</th><th>h</th></tr></thead><tbody><tr class="odd"><td>f</td><td>1</td><td>1</td><td>1</td><td>1</td></tr><tr class="even"><td>i</td><td>1</td><td>1</td><td>1</td><td>1</td></tr><tr class="odd"><td>s</td><td>1</td><td>1</td><td>2</td><td>2</td></tr><tr class="even"><td>h</td><td>1</td><td>1</td><td>2</td><td>3</td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">if</span> word_a[i] == word_b[j]:<br>    cell[i][j] = cell[i-<span class="hljs-number">1</span>][j-<span class="hljs-number">1</span>] + <span class="hljs-number">1</span><br><span class="hljs-keyword">else</span>:<br>    cell[i][j] = <span class="hljs-built_in">max</span>(cell[i-<span class="hljs-number">1</span>][j], cell[i][j-<span class="hljs-number">1</span>])<br></code></pre></td></tr></table></figure><p>练习9.3</p><table><thead><tr class="header"><th></th><th>b</th><th>l</th><th>u</th><th>e</th></tr></thead><tbody><tr class="odd"><td>c</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr class="even"><td>l</td><td>0</td><td>1</td><td>0</td><td>0</td></tr><tr class="odd"><td>u</td><td>0</td><td>0</td><td>2</td><td>0</td></tr><tr class="even"><td>e</td><td>0</td><td>0</td><td>0</td><td>3</td></tr><tr class="odd"><td>s</td><td>0</td><td>0</td><td>0</td><td>0</td></tr></tbody></table><p>动态规划的实际应用</p><ul><li>根据最长公共序列确定DNA链的相似性。</li><li><code>git diff</code>指出两个文件的差异。</li><li>编辑距离（levenshtein distance）指出两个字符串的相似程度，使用了动态规划。编辑距离算法用于拼写检查，判断用户上传资料是否为盗版等。</li><li>Microsoft Word等的断字功能。</li></ul><p>动态规划小结</p><ul><li>需要再给定约束条件下优化某种指标时，动态规划很有用。</li><li>问题可分解为离散子问题时，可使用动态规划来解决。</li><li>每种动态规划解决方案都涉及网格。</li><li><strong>单元格中的值通常就是你要优化的值。</strong></li><li>每个单元格都是一个子问题，因此你需要考虑如何将问题分解为子问题。</li><li><strong>没有放之四海皆准的计算动态规划解决方案的公式。</strong></li></ul><h1 id="k最近邻算法">10 K最近邻算法</h1><p>要对东西进行分类时，可首先尝试K最近邻（k-nearest neighbours, KNN，k代表多个）算法。</p><h2 id="创建推荐系统">创建推荐系统</h2><p>为用户Priyanka创建一个电影推荐系统，这本质上是分类问题，将Priyanka归类到喜好相近的人群中，然后将这群人喜好的电影推荐给他就好了。</p><h3 id="特征抽取">特征抽取</h3><p>特征抽取意味着将物品转换为一系列可比较的数字。用户注册时，要求他们指出对各种电影的喜好程度。这样，对于每位用户都将获得一组数字。</p><table><thead><tr class="header"><th></th><th>Priyanka</th><th>Justin</th><th>Morpheus</th></tr></thead><tbody><tr class="odd"><td>喜剧片</td><td>3</td><td>4</td><td>2</td></tr><tr class="even"><td>动作片</td><td>4</td><td>3</td><td>5</td></tr><tr class="odd"><td>生活片</td><td>4</td><td>5</td><td>1</td></tr><tr class="even"><td>恐怖片</td><td>1</td><td>1</td><td>3</td></tr><tr class="odd"><td>爱情片</td><td>4</td><td>5</td><td>1</td></tr></tbody></table><p>毕达哥拉斯公式：<span class="math inline">\(\sqrt{(x_1-x_2)^2+(y_1-y_2)^2+...}\)</span></p><p>Priyanka和Justin的距离为2，Priyanka和Morpheus的距离为<span class="math inline">\(\sqrt{24}\)</span>。所以Priyanka喜好更接近Justin，以后可以将Justin喜欢的电影推荐给Priyanka。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">10.1 归一化</span><br><span class="hljs-string">10.2 意见领袖权重大</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br></code></pre></td></tr></table></figure><h3 id="回归">回归</h3><p>如果不仅要向Priyanka推荐电影，还要预测她将给这部电影打多少分。先看下最近邻打多少分</p><table><thead><tr class="header"><th>Justin</th><th>5</th></tr></thead><tbody><tr class="odd"><td>Jc</td><td>4</td></tr><tr class="even"><td>Joet</td><td>4</td></tr><tr class="odd"><td>Lance</td><td>5</td></tr><tr class="even"><td>Chris</td><td>3</td></tr></tbody></table><p>求平均为4.2，这就是回归（regression）。KNN的两项基本工作——分类和回归。</p><ul><li>分类就是编组。</li><li>回归就是预测结果（如数字）。</li></ul><p>预测应该烤多少条面包，首先需要一组特征</p><ul><li>天气指数1~5（1表示很糟，5表示很好）</li><li>是不是周末或节假日（是1，否0）</li><li>有没有活动（有1，无0）</li></ul><p>还需要一些历史数据，记录各种不同日子里售出的面包数量。</p><table><thead><tr class="header"><th>第一列</th><th>第二列</th></tr></thead><tbody><tr class="odd"><td><strong>A(5,1,0) = 300</strong></td><td><strong>B(3,1,1) = 225</strong></td></tr><tr class="even"><td>C(1,1,0) = 75</td><td><strong>D(4,0,1) = 200</strong></td></tr><tr class="odd"><td><strong>E(4,0,0) = 150</strong></td><td>F(2,0,0) = 50</td></tr></tbody></table><p>今天时周末，天气不错，即(4,1,0)。使用KNN算法，其中K设为4。首先，找出今天的4个最近邻。LA=1，LB=<span class="math inline">\(\sqrt{2}\)</span>，LC=3，LD=<span class="math inline">\(\sqrt{2}\)</span>，LE=1，LF=<span class="math inline">\(\sqrt{5}\)</span>。因此，4个最近邻为ABDE。求回归，即取平均为(300+225+200+150)/4=218.75条。这就是预测的今天应烤的面包数。</p><h4 id="余弦相似度">余弦相似度</h4><p>余弦相似度（cosine similarity）不计算两个矢量的距离，而是比较它们的角度。更适合处理品味类似但打分保守程度不一致的情况。<a href="https://www.cnblogs.com/bymo/p/8489037.html">详见</a></p><h3 id="挑选合适的特征">挑选合适的特征</h3><p>在挑选合适的特征方面，没有放之四海皆准的原则，必须要考虑多种需要考虑的因素。能否挑选合适的特征事关KNN算法的成败。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 10.3 太少了。经验规则：如果有N位用户，应考虑sqrt(N)个邻居。</span><br></code></pre></td></tr></table></figure><h2 id="机器学习简介">机器学习简介</h2><p>机器学习旨在让计算机更聪明。创建推荐系统就是机器学习的一个例子。</p><h3 id="ocr">OCR</h3><p>OCR是指光学字符识别（optical character recognition）。语音识别和人脸识别也是用相同的理念。可使用KNN算法，</p><ul><li>浏览大量的数字图像，将这些数字的特征提取出来。这一步称之为训练（training）</li><li>遇到新图像时，提取该图像的特征，再找出它的最近邻。</li></ul><h3 id="创建垃圾邮件过滤器">创建垃圾邮件过滤器</h3><p>垃圾邮件过滤器使用一种简单算法——朴素贝叶斯分类器（Naive Bayes Classifier）。首先使用一些数据对这个分类器进行训练，即拿垃圾邮件和非垃圾邮件的主题喂食计算机。有新邮件时，分析主题中的每个单词再垃圾邮件中出现的概率。</p><h3 id="预测股票市场">预测股票市场</h3><p>不好挑选合适的特征。几乎是难以完成的任务。</p><h1 id="十种算法简介">11 十种算法简介</h1><h2 id="树">树</h2><p>二叉查找树（binary search tree）。对于其中的每个节点，左子节点的值都比它小，而右子节点的值都比它大。</p><p><img src="/ass/20220106-tree.png" /></p><p>在二叉查找树查找节点时，平均运行时间为O(log n)，但在最糟糕的情况下所需时间为O(n)。而在有序数组中查找时，最糟糕情况下也只有O(log n)。但是二叉查找树的插入和删除操作的速度快得多。但二叉查找树不能随机访问元素。</p><table><thead><tr class="header"><th></th><th>数组</th><th>二叉查找树</th></tr></thead><tbody><tr class="odd"><td>查找</td><td>O(log n)</td><td>O(log n)</td></tr><tr class="even"><td>插入</td><td>O(n)</td><td>O(log n)</td></tr><tr class="odd"><td>删除</td><td>O(n)</td><td>O(log n)</td></tr></tbody></table><p>其他数据结构：B树，红黑树，堆，伸展树。</p><h2 id="反向索引">反向索引</h2><p>反向索引（inverted index）常用于创建搜索引擎。创建一个散列表，将单词（键）映射到包含他的页面（值），搜索单词即可给出包含他的页面。</p><h2 id="傅立叶变换">傅立叶变换</h2><p>信号分析领域。</p><h2 id="并行算法">并行算法</h2><p>并行算法设计起来很难，要确保它们能够正确地工作并实现期望的速度提升也很难。而且速度的提升并非线性的，其中的原因有两个。</p><ul><li>并行性管理开销。任务的分配与合并也是需要时间的。</li><li>负载均衡。分配给每个内核的任务难度可能不一样。</li></ul><p>要改善性能和可扩展性，并行算法可能是个不错的选择。</p><h2 id="mapreduce">MapReduce</h2><p>MapReduce是一种流行的分布式算法，可以通过流行的开源工具Apache Hadoop来使用它。</p><p>分布式算法非常适合用于在段时间内完成海量工作，其中的MapReduce基于两个简单的理念：映射（map）函数和归并（reduce）函数。</p><h3 id="映射函数">映射函数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">arr1 = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>]<br>arr2 = <span class="hljs-built_in">map</span>(<span class="hljs-keyword">lambda</span> x: <span class="hljs-number">2</span>*x, arr1) <span class="hljs-comment"># 数组元素翻倍</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(arr2)) <span class="hljs-comment"># 转换为列表打印</span><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">arr1 = <span class="hljs-comment"># A list of URLs</span><br>arr2 = <span class="hljs-built_in">map</span>(download_page, arr1) <span class="hljs-comment"># 下载页面存储在arr2中</span><br></code></pre></td></tr></table></figure><h3 id="归并函数">归并函数</h3><p>归并是将一个数组转换为一个元素。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">arr1 = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>]<br>reduce(<span class="hljs-keyword">lambda</span> x,y: x+y, arr1) <span class="hljs-comment"># 将所有元素相加</span><br></code></pre></td></tr></table></figure><h2 id="布隆过滤器和hyperloglog">布隆过滤器和HyperLogLog</h2><p>布隆过滤器是一种概率型数据结构，它提供的答案有可能不对，但很可能是正确的。为判断网页是否已搜集过，可不使用散列表（占用空间大），而使用布隆过滤器使用散列表时，答案绝对可靠，而使用布隆过滤器时，答案却是很可能是正确的。</p><ul><li>可能出现错报的情况，即Google可能指出“这个网站已搜集”，但实际上并没有搜集。</li><li>不可能出现漏报的情况，即如果布隆过滤器说“这个网站未搜集”，就肯定未搜集。</li></ul><p>布隆过滤器的优点在于占用的存储空间很少。使用散列表时，必须存储Google搜集过的所有URL，但使用布隆过滤器时不用这样做。布隆过滤器非常适合用于不要求答案绝对准确的情况，前面所有的示例都是这样的。对bit.ly而言，这样说完全可行：“我们认为这个网站可能是恶意的， 请倍加小心。”</p><h3 id="hyperloglog">HyperLogLog</h3><p>HyperLogLog是一种类似于布隆过滤器的算法。HyperLogLog近似地计算集合中不同的元素数，与布隆过滤器一样，它不能给出准确的答案，但也八九不离十，而占用的内存空间却少得多。</p><h2 id="sha算法">SHA算法</h2><h3 id="比较文件">比较文件</h3><p>另一种散列函数是安全散列算法（secure hash algorithm，SHA）函数。给定一个字符串， SHA返回其散列值（哈希值）。可以使用SHA来判断两个文件是否相同，这在比较超大型文件时很有用。</p><h3 id="检查密码">检查密码</h3><p>Google存储的并非密码，而是密码的SHA散列值！你输入密码时，Google计算其散列值，并将结果同其数据库中的散列值进行比较。这种 散列算法是单向的。你可根据字符串计算出散列值。但你无法根据散列值推断出原始字符串。</p><p>SHA实际上是一系列算法： SHA-0、 SHA-1、 SHA-2和SHA-3。本书编写期间， SHA-0和SHA-1已被发现存在一些缺陷。如果你要使用SHA算法来计算密码的散列值，请使用<strong>SHA-2</strong>或<strong>SHA-3</strong>。当前，最安全的密码散列函数是<strong>bcrypt</strong>，但没有任何东西是万无一失的。</p><h2 id="局部敏感的散列算法">局部敏感的散列算法</h2><p>SHA是局部不敏感的，即一个字符串，只改变其中一个字符，哈希值就完全不同。而Simhash是一种局部敏感的散列函数，即对字符串做细微的修改，其哈希值也只发生细微的改变。</p><ul><li>Google使用Simhash来判断网页是否已搜集。</li><li>老师可以使用Simhash来判断学生的论文是否是从网上抄的。</li><li>Scribd允许用户上传文档或图书，以便与人分享，但不希望用户上传有版权的内容！这个网站可使用Simhash来检查上传的内容是否与小说《哈利·波特》类似，如果类似，就自动拒绝。</li></ul><p>需要<strong>检查两项内容的相似程度</strong>时，Simhash很有用。</p><h2 id="diffie-hellman密钥交换">Diffie-Hellman密钥交换</h2><p>Diffie-Hellman算法解决了如下两个问题。</p><ul><li>双方无需知道加密算法。他们不必会面协商要使用的加密算法。</li><li>要破解加密的消息比登天还难。</li></ul><p>Diffie-Hellman使用两个密钥：公钥和私钥。有人要向你发送消息时，他使用公钥对其进行加密。加密后的消息只有使用私钥才能解密。只要只有你知道私钥，就只有你才能解密消息！</p><p>类似算法还要RSA。</p><h2 id="线性规划">线性规划</h2><p>线性规划用于在给定约束条件下最大限度地改善指定的指标。</p><p>线性规划使用Simplex算法</p>]]></content>
    
    
    <categories>
      
      <category>笔记</category>
      
    </categories>
    
    
    <tags>
      
      <tag>algorithm</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>OpenCV项目实战</title>
    <link href="/posts/10015/"/>
    <url>/posts/10015/</url>
    
    <content type="html"><![CDATA[<p>跟着YouTube大佬学了几个实战项目。<span id="more"></span></p><h1 id="虚拟绘画">1 虚拟绘画</h1><p>笔记本摄像头突然坏了，所以通过局域网使用手机摄像头，具体可以看<a href="/posts/10012/#网络摄像头">这里</a>。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># project1 virtual paint</span><br><span class="hljs-keyword">import</span> cv2 <span class="hljs-keyword">as</span> cv<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><br>frameWidth = <span class="hljs-number">640</span><br>frameHeight = <span class="hljs-number">480</span><br><br>ipCameraUrl = <span class="hljs-string">&#x27;http://zhao:raspberrypi@192.168.156.93:8081/&#x27;</span><br>cap = cv.VideoCapture(ipCameraUrl)<br>cap.<span class="hljs-built_in">set</span>(<span class="hljs-number">3</span>,frameWidth)<br>cap.<span class="hljs-built_in">set</span>(<span class="hljs-number">4</span>,frameHeight)<br>cap.<span class="hljs-built_in">set</span>(<span class="hljs-number">10</span>,<span class="hljs-number">50</span>)<br><br>myColors = [[<span class="hljs-number">10</span>,<span class="hljs-number">122</span>,<span class="hljs-number">159</span>,<span class="hljs-number">43</span>,<span class="hljs-number">255</span>,<span class="hljs-number">255</span>],<br>            [<span class="hljs-number">0</span>,<span class="hljs-number">137</span>,<span class="hljs-number">146</span>,<span class="hljs-number">10</span>,<span class="hljs-number">255</span>,<span class="hljs-number">255</span>],<br>            [<span class="hljs-number">131</span>,<span class="hljs-number">102</span>,<span class="hljs-number">88</span>,<span class="hljs-number">165</span>,<span class="hljs-number">255</span>,<span class="hljs-number">255</span>]]<br>myColorValues = [[<span class="hljs-number">0</span>,<span class="hljs-number">200</span>,<span class="hljs-number">255</span>],[<span class="hljs-number">60</span>,<span class="hljs-number">0</span>,<span class="hljs-number">255</span>],[<span class="hljs-number">255</span>,<span class="hljs-number">150</span>,<span class="hljs-number">255</span>]] <span class="hljs-comment"># BGR</span><br><br>myPoints = [] <span class="hljs-comment"># [x,y,colorID]</span><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">findColor</span>(<span class="hljs-params">img,myColors,myColorValues</span>):</span><br>    imgHSV = cv.cvtColor(img,cv.COLOR_BGR2HSV)<br>    count = <span class="hljs-number">0</span><br>    newPoints = []<br>    <span class="hljs-keyword">for</span> color <span class="hljs-keyword">in</span> myColors:<br>        lower = np.array(color[<span class="hljs-number">0</span>:<span class="hljs-number">3</span>])<br>        upper = np.array(color[<span class="hljs-number">3</span>:<span class="hljs-number">6</span>])<br>        mask = cv.inRange(imgHSV,lower,upper)<br>        x,y = getContours(mask)<br>        cv.circle(imgResult,(x,y),<span class="hljs-number">10</span>,myColorValues[count],cv.FILLED)<br>        <span class="hljs-comment"># cv.imshow(str(color[0]),mask)</span><br>        <span class="hljs-keyword">if</span> x!= <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> y != <span class="hljs-number">0</span>:<br>            newPoints.append([x,y,count])<br>        count += <span class="hljs-number">1</span><br>    <span class="hljs-keyword">return</span> newPoints<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getContours</span>(<span class="hljs-params">img</span>):</span><br>    contours,hierarchy = cv.findContours(img,cv.RETR_EXTERNAL,cv.CHAIN_APPROX_NONE)<br>    x,y,w,h = <span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> cnt <span class="hljs-keyword">in</span> contours:<br>        area = cv.contourArea(cnt) <span class="hljs-comment"># 计算contour面积</span><br>        <span class="hljs-keyword">if</span> area &gt; <span class="hljs-number">500</span>:<br>            <span class="hljs-comment"># cv.drawContours(imgResult,cnt,-1,(255,0,0),9) # -1是画出所有contour</span><br>            peri = cv.arcLength(cnt,<span class="hljs-literal">True</span>) <span class="hljs-comment"># 计算曲线长度</span><br>            approx = cv.approxPolyDP(cnt,<span class="hljs-number">0.02</span>*peri,<span class="hljs-literal">True</span>) <span class="hljs-comment"># 拐点，中间值是分辨率</span><br>            x,y,w,h = cv.boundingRect(approx) <span class="hljs-comment"># 边界框</span><br>    <span class="hljs-keyword">return</span> x+w//<span class="hljs-number">2</span>,y<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">drawOnCanvas</span>(<span class="hljs-params">myPoints,myColorValues</span>):</span><br>    <span class="hljs-keyword">for</span> point <span class="hljs-keyword">in</span> myPoints:<br>        cv.circle(imgResult,(point[<span class="hljs-number">0</span>],point[<span class="hljs-number">1</span>]),<span class="hljs-number">10</span>,myColorValues[point[<span class="hljs-number">2</span>]],cv.FILLED)<br><br><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>    success,img = cap.read()<br>    imgResult = img.copy()<br>    newPoints = findColor(img,myColors,myColorValues)<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(newPoints) != <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">for</span> newP <span class="hljs-keyword">in</span> newPoints:<br>            myPoints.append(newP)<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(myPoints) != <span class="hljs-number">0</span>:<br>        drawOnCanvas(myPoints,myColorValues)<br>        <br>    cv.imshow(<span class="hljs-string">&quot;Original&quot;</span>,imgResult)<br>    <span class="hljs-keyword">if</span> cv.waitKey(<span class="hljs-number">1</span>) &amp; <span class="hljs-number">0xFF</span> == <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;q&#x27;</span>):<br>        <span class="hljs-keyword">break</span><br></code></pre></td></tr></table></figure><p><img src="/ass/20211230-virtual-paint.gif" /></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># project1 color picker</span><br><span class="hljs-keyword">import</span> cv2 <span class="hljs-keyword">as</span> cv<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><br>frameWidth = <span class="hljs-number">640</span><br>frameHeight = <span class="hljs-number">480</span><br>ipCameraUrl = <span class="hljs-string">&#x27;http://zhao:raspberrypi@192.168.156.93:8081/&#x27;</span><br>cap = cv.VideoCapture(ipCameraUrl)<br>cap.<span class="hljs-built_in">set</span>(<span class="hljs-number">3</span>,frameWidth)<br>cap.<span class="hljs-built_in">set</span>(<span class="hljs-number">4</span>,frameHeight)<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">empty</span>(<span class="hljs-params">a</span>):</span><br>    <span class="hljs-keyword">pass</span><br><br><span class="hljs-comment"># 组图程序</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">stackImages</span>(<span class="hljs-params">scale,imgArray</span>):</span><br>    rows = <span class="hljs-built_in">len</span>(imgArray)<br>    cols = <span class="hljs-built_in">len</span>(imgArray[<span class="hljs-number">0</span>])<br>    rowsAvailable = <span class="hljs-built_in">isinstance</span>(imgArray[<span class="hljs-number">0</span>], <span class="hljs-built_in">list</span>)<br>    width = imgArray[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>].shape[<span class="hljs-number">1</span>]<br>    height = imgArray[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>].shape[<span class="hljs-number">0</span>]<br>    <span class="hljs-keyword">if</span> rowsAvailable:<br>        <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span> ( <span class="hljs-number">0</span>, rows):<br>            <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, cols):<br>                <span class="hljs-keyword">if</span> imgArray[x][y].shape[:<span class="hljs-number">2</span>] == imgArray[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>].shape [:<span class="hljs-number">2</span>]:<br>                    imgArray[x][y] = cv.resize(imgArray[x][y], (<span class="hljs-number">0</span>, <span class="hljs-number">0</span>), <span class="hljs-literal">None</span>, scale, scale)<br>                <span class="hljs-keyword">else</span>:<br>                    imgArray[x][y] = cv.resize(imgArray[x][y], (imgArray[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>].shape[<span class="hljs-number">1</span>], imgArray[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>].shape[<span class="hljs-number">0</span>]), <span class="hljs-literal">None</span>, scale, scale)<br>                <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(imgArray[x][y].shape) == <span class="hljs-number">2</span>: imgArray[x][y]= cv.cvtColor( imgArray[x][y], cv.COLOR_GRAY2BGR)<br>        imageBlank = np.zeros((height, width, <span class="hljs-number">3</span>), np.uint8)<br>        hor = [imageBlank]*rows<br>        hor_con = [imageBlank]*rows<br>        <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, rows):<br>            hor[x] = np.hstack(imgArray[x])<br>        ver = np.vstack(hor)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, rows):<br>            <span class="hljs-keyword">if</span> imgArray[x].shape[:<span class="hljs-number">2</span>] == imgArray[<span class="hljs-number">0</span>].shape[:<span class="hljs-number">2</span>]:<br>                imgArray[x] = cv.resize(imgArray[x], (<span class="hljs-number">0</span>, <span class="hljs-number">0</span>), <span class="hljs-literal">None</span>, scale, scale)<br>            <span class="hljs-keyword">else</span>:<br>                imgArray[x] = cv.resize(imgArray[x], (imgArray[<span class="hljs-number">0</span>].shape[<span class="hljs-number">1</span>], imgArray[<span class="hljs-number">0</span>].shape[<span class="hljs-number">0</span>]), <span class="hljs-literal">None</span>,scale, scale)<br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(imgArray[x].shape) == <span class="hljs-number">2</span>: imgArray[x] = cv.cvtColor(imgArray[x], cv.COLOR_GRAY2BGR)<br>        hor= np.hstack(imgArray)<br>        ver = hor<br>    <span class="hljs-keyword">return</span> ver<br><br>[<span class="hljs-number">0</span>,<span class="hljs-number">84</span>,<span class="hljs-number">180</span>,<span class="hljs-number">15</span>,<span class="hljs-number">255</span>,<span class="hljs-number">255</span>]<br>cv.namedWindow(<span class="hljs-string">&#x27;TrackBars&#x27;</span>)<br>cv.resizeWindow(<span class="hljs-string">&#x27;TrackBars&#x27;</span>, <span class="hljs-number">640</span>, <span class="hljs-number">240</span>)<br>cv.createTrackbar(<span class="hljs-string">&#x27;Hue Min&#x27;</span>, <span class="hljs-string">&#x27;TrackBars&#x27;</span>, <span class="hljs-number">0</span>, <span class="hljs-number">179</span>, empty)<br>cv.createTrackbar(<span class="hljs-string">&#x27;Hue Max&#x27;</span>, <span class="hljs-string">&#x27;TrackBars&#x27;</span>, <span class="hljs-number">15</span>, <span class="hljs-number">179</span>, empty)<br>cv.createTrackbar(<span class="hljs-string">&#x27;Sat Min&#x27;</span>, <span class="hljs-string">&#x27;TrackBars&#x27;</span>, <span class="hljs-number">84</span>, <span class="hljs-number">255</span>, empty)<br>cv.createTrackbar(<span class="hljs-string">&#x27;Sat Max&#x27;</span>, <span class="hljs-string">&#x27;TrackBars&#x27;</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, empty)<br>cv.createTrackbar(<span class="hljs-string">&#x27;Val Min&#x27;</span>, <span class="hljs-string">&#x27;TrackBars&#x27;</span>, <span class="hljs-number">180</span>, <span class="hljs-number">255</span>, empty)<br>cv.createTrackbar(<span class="hljs-string">&#x27;Val Max&#x27;</span>, <span class="hljs-string">&#x27;TrackBars&#x27;</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, empty)<br><br><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>    success,img = cap.read()<br>    imgHSV = cv.cvtColor(img, cv.COLOR_BGR2HSV)<br>    h_min = cv.getTrackbarPos(<span class="hljs-string">&#x27;Hue Min&#x27;</span>, <span class="hljs-string">&#x27;TrackBars&#x27;</span>)<br>    h_max = cv.getTrackbarPos(<span class="hljs-string">&#x27;Hue Max&#x27;</span>, <span class="hljs-string">&#x27;TrackBars&#x27;</span>)<br>    s_min = cv.getTrackbarPos(<span class="hljs-string">&#x27;Sat Min&#x27;</span>, <span class="hljs-string">&#x27;TrackBars&#x27;</span>)<br>    s_max = cv.getTrackbarPos(<span class="hljs-string">&#x27;Sat Max&#x27;</span>, <span class="hljs-string">&#x27;TrackBars&#x27;</span>)<br>    v_min = cv.getTrackbarPos(<span class="hljs-string">&#x27;Val Min&#x27;</span>, <span class="hljs-string">&#x27;TrackBars&#x27;</span>)<br>    v_max = cv.getTrackbarPos(<span class="hljs-string">&#x27;Val Max&#x27;</span>, <span class="hljs-string">&#x27;TrackBars&#x27;</span>)<br>    <span class="hljs-built_in">print</span>(h_min, h_max, s_min, s_max, v_min, v_max)<br>    lower = np.array([h_min, s_min, v_min])<br>    upper = np.array([h_max, s_max, v_max])<br>    mask = cv.inRange(imgHSV, lower, upper)<br>    imgResult = cv.bitwise_and(img,img,mask=mask)<br><br>    cv.imshow(<span class="hljs-string">&#x27;Original&#x27;</span>, img)<br>    cv.imshow(<span class="hljs-string">&#x27;ImageHSV&#x27;</span>, imgHSV)<br>    cv.imshow(<span class="hljs-string">&#x27;Mask&#x27;</span>, mask)<br>    cv.imshow(<span class="hljs-string">&#x27;Result&#x27;</span>, imgResult)<br>    imgStack = stackImages(<span class="hljs-number">0.5</span>,([img,imgHSV],[mask,imgResult]))<br>    cv.imshow(<span class="hljs-string">&#x27;Stacked Images&#x27;</span>,imgStack)<br>    <span class="hljs-keyword">if</span> cv.waitKey(<span class="hljs-number">1</span>) &amp; <span class="hljs-number">0xFF</span> == <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;q&#x27;</span>):<br>        <span class="hljs-keyword">break</span><br></code></pre></td></tr></table></figure><h1 id="纸张扫描">2 纸张扫描</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># project2 document scanner</span><br><span class="hljs-keyword">import</span> cv2 <span class="hljs-keyword">as</span> cv<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><br>widthImg = <span class="hljs-number">640</span><br>heightImg = <span class="hljs-number">480</span><br><br>ipCameraUrl = <span class="hljs-string">&#x27;http://zhao:raspberrypi@192.168.156.93:8081/&#x27;</span><br>cap = cv.VideoCapture(ipCameraUrl)<br>cap.<span class="hljs-built_in">set</span>(<span class="hljs-number">3</span>,widthImg)<br>cap.<span class="hljs-built_in">set</span>(<span class="hljs-number">4</span>,heightImg)<br>cap.<span class="hljs-built_in">set</span>(<span class="hljs-number">10</span>,<span class="hljs-number">50</span>)<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">preProcessing</span>(<span class="hljs-params">img</span>):</span><br>    imgGray = cv.cvtColor(img,cv.COLOR_BGR2GRAY)<br>    imgBlur = cv.GaussianBlur(imgGray,(<span class="hljs-number">5</span>,<span class="hljs-number">5</span>),<span class="hljs-number">1</span>)<br>    imgCanny = cv.Canny(imgBlur,<span class="hljs-number">200</span>,<span class="hljs-number">200</span>)<br>    kernel = np.ones((<span class="hljs-number">5</span>,<span class="hljs-number">5</span>))<br>    imgDial = cv.dilate(imgCanny,kernel,iterations=<span class="hljs-number">2</span>)<br>    imgThres = cv.erode(imgDial,kernel,iterations=<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">return</span> imgThres<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getContours</span>(<span class="hljs-params">img</span>):</span><br>    biggest = np.array([])<br>    maxArea = <span class="hljs-number">0</span><br>    contours,hierarchy = cv.findContours(img,cv.RETR_EXTERNAL,cv.CHAIN_APPROX_NONE)<br>    <span class="hljs-keyword">for</span> cnt <span class="hljs-keyword">in</span> contours:<br>        area = cv.contourArea(cnt) <span class="hljs-comment"># 计算contour面积</span><br>        <span class="hljs-keyword">if</span> area &gt; <span class="hljs-number">5000</span>:<br>            <span class="hljs-comment"># cv.drawContours(imgContour,cnt,-1,(255,0,0),9) # -1是画出所有contour</span><br>            peri = cv.arcLength(cnt,<span class="hljs-literal">True</span>) <span class="hljs-comment"># 计算曲线长度</span><br>            approx = cv.approxPolyDP(cnt,<span class="hljs-number">0.02</span>*peri,<span class="hljs-literal">True</span>) <span class="hljs-comment"># 拐点，中间值是分辨率</span><br>            <span class="hljs-keyword">if</span> area &gt; maxArea <span class="hljs-keyword">and</span> <span class="hljs-built_in">len</span>(approx) == <span class="hljs-number">4</span>:<br>                biggest = approx<br>                maxArea = area<br>    cv.drawContours(imgContour,biggest,-<span class="hljs-number">1</span>,(<span class="hljs-number">255</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>),<span class="hljs-number">20</span>) <span class="hljs-comment"># -1是画出所有contour</span><br>    <span class="hljs-keyword">return</span> biggest<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">reorder</span>(<span class="hljs-params">myPoints</span>):</span><br>    myPoints = myPoints.reshape((<span class="hljs-number">4</span>,<span class="hljs-number">2</span>))<br>    myPointsNew = np.zeros((<span class="hljs-number">4</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>),np.int32)<br>    add = myPoints.<span class="hljs-built_in">sum</span>(<span class="hljs-number">1</span>)<br>    <span class="hljs-comment"># print(&quot;add&quot;,add)</span><br><br>    myPointsNew[<span class="hljs-number">0</span>] = myPoints[np.argmin(add)]<br>    myPointsNew[<span class="hljs-number">3</span>] = myPoints[np.argmax(add)]<br>    diff = np.diff(myPoints,axis=<span class="hljs-number">1</span>)<br>    myPointsNew[<span class="hljs-number">1</span>] = myPoints[np.argmin(diff)]<br>    myPointsNew[<span class="hljs-number">2</span>] = myPoints[np.argmax(diff)]<br>    <span class="hljs-comment"># print(&quot;NewPoints&quot;,myPointsNew)</span><br>    <span class="hljs-keyword">return</span> myPointsNew<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getWarp</span>(<span class="hljs-params">img,biggest</span>):</span><br>    biggest = reorder(biggest)<br>    <span class="hljs-comment"># print(biggest)</span><br>    pts1 = np.float32(biggest)<br>    pts2 = np.float32([[<span class="hljs-number">0</span>,<span class="hljs-number">0</span>],[widthImg,<span class="hljs-number">0</span>],[<span class="hljs-number">0</span>,heightImg],[widthImg,heightImg]])<br>    matrix = cv.getPerspectiveTransform(pts1,pts2)<br>    imgOutput = cv.warpPerspective(img,matrix,(widthImg,heightImg))<br>    imgCropped = imgOutput[<span class="hljs-number">15</span>:imgOutput.shape[<span class="hljs-number">0</span>]-<span class="hljs-number">15</span>,<span class="hljs-number">15</span>:imgOutput.shape[<span class="hljs-number">1</span>]-<span class="hljs-number">15</span>]<br>    imgCropped = cv.resize(imgCropped,(widthImg,heightImg))<br>    <span class="hljs-keyword">return</span> imgCropped<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">stackImages</span>(<span class="hljs-params">scale,imgArray</span>):</span><br>    rows = <span class="hljs-built_in">len</span>(imgArray)<br>    cols = <span class="hljs-built_in">len</span>(imgArray[<span class="hljs-number">0</span>])<br>    rowsAvailable = <span class="hljs-built_in">isinstance</span>(imgArray[<span class="hljs-number">0</span>], <span class="hljs-built_in">list</span>)<br>    width = imgArray[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>].shape[<span class="hljs-number">1</span>]<br>    height = imgArray[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>].shape[<span class="hljs-number">0</span>]<br>    <span class="hljs-keyword">if</span> rowsAvailable:<br>        <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span> ( <span class="hljs-number">0</span>, rows):<br>            <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, cols):<br>                <span class="hljs-keyword">if</span> imgArray[x][y].shape[:<span class="hljs-number">2</span>] == imgArray[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>].shape [:<span class="hljs-number">2</span>]:<br>                    imgArray[x][y] = cv.resize(imgArray[x][y], (<span class="hljs-number">0</span>, <span class="hljs-number">0</span>), <span class="hljs-literal">None</span>, scale, scale)<br>                <span class="hljs-keyword">else</span>:<br>                    imgArray[x][y] = cv.resize(imgArray[x][y], (imgArray[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>].shape[<span class="hljs-number">1</span>], imgArray[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>].shape[<span class="hljs-number">0</span>]), <span class="hljs-literal">None</span>, scale, scale)<br>                <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(imgArray[x][y].shape) == <span class="hljs-number">2</span>: imgArray[x][y]= cv.cvtColor( imgArray[x][y], cv.COLOR_GRAY2BGR)<br>        imageBlank = np.zeros((height, width, <span class="hljs-number">3</span>), np.uint8)<br>        hor = [imageBlank]*rows<br>        hor_con = [imageBlank]*rows<br>        <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, rows):<br>            hor[x] = np.hstack(imgArray[x])<br>        ver = np.vstack(hor)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, rows):<br>            <span class="hljs-keyword">if</span> imgArray[x].shape[:<span class="hljs-number">2</span>] == imgArray[<span class="hljs-number">0</span>].shape[:<span class="hljs-number">2</span>]:<br>                imgArray[x] = cv.resize(imgArray[x], (<span class="hljs-number">0</span>, <span class="hljs-number">0</span>), <span class="hljs-literal">None</span>, scale, scale)<br>            <span class="hljs-keyword">else</span>:<br>                imgArray[x] = cv.resize(imgArray[x], (imgArray[<span class="hljs-number">0</span>].shape[<span class="hljs-number">1</span>], imgArray[<span class="hljs-number">0</span>].shape[<span class="hljs-number">0</span>]), <span class="hljs-literal">None</span>,scale, scale)<br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(imgArray[x].shape) == <span class="hljs-number">2</span>: imgArray[x] = cv.cvtColor(imgArray[x], cv.COLOR_GRAY2BGR)<br>        hor= np.hstack(imgArray)<br>        ver = hor<br>    <span class="hljs-keyword">return</span> ver<br><br><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>    success,img = cap.read()<br>    img = cv.resize(img,(widthImg,heightImg))<br>    imgContour = img.copy()<br>    imgThres = preProcessing(img)<br>    biggest = getContours(imgThres)<br>    <span class="hljs-keyword">if</span> biggest.size != <span class="hljs-number">0</span>:<br>        <span class="hljs-comment"># print(biggest)</span><br>        imgWarped = getWarp(img,biggest)<br>    <span class="hljs-keyword">else</span>:<br>        imgArray = ([img,imgThres],[img,img])<br><br>    imgArray = ([img,imgThres],[imgContour,imgWarped])<br>    stackedImages = stackImages(<span class="hljs-number">0.6</span>,imgArray)<br><br>    cv.imshow(<span class="hljs-string">&quot;WorkFlow&quot;</span>,stackedImages)<br>    cv.imshow(<span class="hljs-string">&quot;Warped Image&quot;</span>,imgWarped)<br>    <span class="hljs-keyword">if</span> cv.waitKey(<span class="hljs-number">1</span>) &amp; <span class="hljs-number">0xFF</span> == <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;q&#x27;</span>):<br>        <span class="hljs-keyword">break</span><br></code></pre></td></tr></table></figure><p><img src="/ass/20211230-paper-detection.gif" /></p><h1 id="车牌检测">3 车牌检测</h1><p>图片来源网络，侵删。</p><p><img src="/ass/20211230-cars.gif" /></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># project3 number plate detection</span><br><span class="hljs-keyword">import</span> cv2 <span class="hljs-keyword">as</span> cv<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><br><span class="hljs-comment">##########################################</span><br>widthImg = <span class="hljs-number">640</span><br>heightImg = <span class="hljs-number">480</span><br>path = <span class="hljs-string">&quot;/usr/local/share/opencv4/haarcascades/haarcascade_russian_plate_number.xml&quot;</span><br>nplateCascade = cv.CascadeClassifier(path)<br>miniArea = <span class="hljs-number">500</span><br>color = (<span class="hljs-number">255</span>,<span class="hljs-number">0</span>,<span class="hljs-number">255</span>)<br><span class="hljs-comment">##############################################</span><br><br>ipCameraUrl = <span class="hljs-string">&#x27;http://zhao:raspberrypi@192.168.156.93:8081/&#x27;</span><br>cap = cv.VideoCapture(ipCameraUrl)<br>cap.<span class="hljs-built_in">set</span>(<span class="hljs-number">3</span>,widthImg)<br>cap.<span class="hljs-built_in">set</span>(<span class="hljs-number">4</span>,heightImg)<br>cap.<span class="hljs-built_in">set</span>(<span class="hljs-number">10</span>,<span class="hljs-number">50</span>)<br>count = <span class="hljs-number">0</span><br><br><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>    success,img = cap.read()<br><br>    imgGray = cv.cvtColor(img,cv.COLOR_BGR2GRAY)<br>    nymberPlates = nplateCascade.detectMultiScale(imgGray,<span class="hljs-number">1.3</span>,<span class="hljs-number">4</span>)<br>    <span class="hljs-keyword">for</span> (x,y,w,h) <span class="hljs-keyword">in</span> nymberPlates:<br>        area = w*h<br>        <span class="hljs-keyword">if</span> area &gt; miniArea:<br>            cv.rectangle(img,(x,y),(x+w,y+h),(<span class="hljs-number">255</span>,<span class="hljs-number">0</span>,<span class="hljs-number">255</span>),<span class="hljs-number">2</span>)<br>            cv.putText(img,<span class="hljs-string">&quot;Number Plate&quot;</span>,(x,y-<span class="hljs-number">5</span>),cv.FONT_HERSHEY_COMPLEX_SMALL,<span class="hljs-number">1</span>,color,<span class="hljs-number">2</span>)<br>            imgRoi = img[y:y+h,x:x+w] <span class="hljs-comment"># region of interest</span><br>            cv.imshow(<span class="hljs-string">&quot;Roi&quot;</span>,imgRoi)<br><br>    cv.imshow(<span class="hljs-string">&quot;Original&quot;</span>,img)<br>    <span class="hljs-keyword">if</span> cv.waitKey(<span class="hljs-number">1</span>) &amp; <span class="hljs-number">0xFF</span> == <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;s&#x27;</span>):<br>        cv.imwrite(<span class="hljs-string">&quot;./Scanned/NoPlate_&quot;</span>+<span class="hljs-built_in">str</span>(count)+<span class="hljs-string">&quot;.jpg&quot;</span>,imgRoi)<br>        cv.rectangle(img,(<span class="hljs-number">0</span>,<span class="hljs-number">200</span>),(<span class="hljs-number">640</span>,<span class="hljs-number">300</span>),(<span class="hljs-number">0</span>,<span class="hljs-number">255</span>,<span class="hljs-number">0</span>),cv.FILLED)<br>        cv.putText(img,<span class="hljs-string">&quot;Sacn Saved&quot;</span>,(<span class="hljs-number">150</span>,<span class="hljs-number">265</span>),cv.FONT_HERSHEY_DUPLEX,<span class="hljs-number">2</span>,(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">255</span>),<span class="hljs-number">2</span>)<br>        cv.imshow(<span class="hljs-string">&quot;Result&quot;</span>,img)<br>        cv.waitKey(<span class="hljs-number">500</span>)<br>        count += <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p><img src="/ass/20211230-number-plate.png" /></p><h1 id="手部跟踪">4 手部跟踪</h1><p>使用框架是Google开发的<a href="https://github.com/google/mediapipe">MediaPipe</a>。以Python包使用mediapipe只需要运行</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">pip <span class="hljs-keyword">install</span> mediapipe<br></code></pre></td></tr></table></figure><p><img src="/ass/20211231-mediapipe.gif" /></p><p>手部跟踪需要完成两部分动作：</p><ul><li><p>手掌检测</p></li><li><p>关键点标识</p><p>给出的手部关键点有21个，为了给出这21个关键点，团队手动标记了30000张不同的手部图片用于训练。</p><p><img src="/ass/20211231-hand_landmarks.png" /></p></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><br></code></pre></td></tr></table></figure><h1 id="机械手臂">5 机械手臂</h1><p>很好的一个融合Arduino和OpenCV的项目。</p>]]></content>
    
    
    <categories>
      
      <category>技术</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>opencv</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>OpenCV基础学习</title>
    <link href="/posts/10014/"/>
    <url>/posts/10014/</url>
    
    <content type="html"><![CDATA[<p>人脸识别、物体检测太有趣了，搭配小小的树莓派可以做很多事情呀<span id="more"></span></p><h1 id="安装与引言">0 安装与引言</h1><p>安装参见<a href="/posts/10012/#安装opencv">这篇文章</a>和<a href="https://www.youtube.com/watch?v=WQeoO7MI0Bs">这个视频</a>。</p><h2 id="图像介绍">图像介绍</h2><p>VGA=640×480(weight×height, pixels, 左上(0,0), 右下(640,480))</p><p>HD=1280×720</p><p>FHD=1920×1080</p><p>4K=3840×2160</p><p>灰度值<span class="math inline">\(0-2^8\)</span>，0为黑，<span class="math inline">\(2^8\)</span>为纯白，中间有256个levels（8bits）。比如2levels就是非黑即白（Binary Image），而256levels的图片理论上会包含有0-256个值，即除了黑（0）白（256），中间还有254种颜色（灰色）（灰度值254），也就是说有黑白2种颜色加上254种灰色一共256种颜色。</p><p><img src="/ass/20211229-gray.jpg" /></p><p>对于一张彩色图片，由三张具有R、G、B色彩的图片构成，即3通道。所以一张彩色VGA图片：RGB VGA=640×480×3</p><p><img src="/ass/20211229-RGB.jpg" /></p><h1 id="读取图片视频和网络摄像头">1 读取图片、视频和网络摄像头</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># chapter1 read images, videos and webcam</span><br><span class="hljs-keyword">import</span> cv2 <span class="hljs-keyword">as</span> cv<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Package Imported&quot;</span>)<br><br><span class="hljs-comment"># 读取图片</span><br><span class="hljs-comment"># img = cv.imread(&#x27;friends.jpg&#x27;)</span><br><span class="hljs-comment"># cv.imshow(&#x27;img&#x27;,img)</span><br><span class="hljs-comment"># cv.waitKey(1000)</span><br><br><span class="hljs-comment"># 读取视频</span><br><span class="hljs-comment"># cap = cv.VideoCapture(&quot;friends.mp4&quot;)</span><br><span class="hljs-comment"># while True:</span><br><span class="hljs-comment">#     success, img = cap.read()</span><br><span class="hljs-comment">#     cv.imshow(&quot;Video&quot;,img)</span><br><span class="hljs-comment">#     if cv.waitKey(1) &amp; 0xFF == ord(&#x27;q&#x27;):</span><br><span class="hljs-comment">#         break</span><br><span class="hljs-comment"># cv.waitKey(1)相当于粗水管(输出值可能大于8bit)，</span><br><span class="hljs-comment"># 0xFF相当于细水管(输出值是0b11111111)</span><br><span class="hljs-comment"># 两个&#x27;与&#x27;起来的意思是只要cv.waitKey(1)的对应0xFF的部分</span><br><span class="hljs-comment"># 所以这条语句就是判断键盘输入的前8bit是否是&#x27;q&#x27;</span><br><br><span class="hljs-comment"># 读取摄像头（webcam）</span><br>cap = cv.VideoCapture(<span class="hljs-number">0</span>)<br>cap.<span class="hljs-built_in">set</span>(<span class="hljs-number">3</span>,<span class="hljs-number">640</span>) <span class="hljs-comment"># 宽，3是id，640是像素</span><br>cap.<span class="hljs-built_in">set</span>(<span class="hljs-number">4</span>,<span class="hljs-number">480</span>) <span class="hljs-comment"># 高</span><br>cap.<span class="hljs-built_in">set</span>(<span class="hljs-number">10</span>,<span class="hljs-number">100</span>) <span class="hljs-comment"># 调节亮度，10是id</span><br><br><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>    success, img = cap.read()<br>    cv.imshow(<span class="hljs-string">&quot;Video&quot;</span>,img)<br>    <span class="hljs-keyword">if</span> cv.waitKey(<span class="hljs-number">1</span>) &amp; <span class="hljs-number">0xFF</span> == <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;q&#x27;</span>):<br>        <span class="hljs-keyword">break</span><br></code></pre></td></tr></table></figure><p><img src="/ass/20211229-webcam-hand.png" /></p><h1 id="基本函数">2 基本函数</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># chapter2 basic functions</span><br><span class="hljs-keyword">import</span> cv2 <span class="hljs-keyword">as</span> cv<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><br>img = cv.imread(<span class="hljs-string">&quot;friends.jpg&quot;</span>)<br>kernel = np.ones((<span class="hljs-number">5</span>,<span class="hljs-number">5</span>),np.uint8)<br>imgGray = cv.cvtColor(img,cv.COLOR_RGB2GRAY)<br>imgBlur = cv.GaussianBlur(imgGray,(<span class="hljs-number">7</span>,<span class="hljs-number">7</span>),<span class="hljs-number">0</span>)<br>imgCanny = cv.Canny(img,<span class="hljs-number">50</span>,<span class="hljs-number">500</span>) <span class="hljs-comment"># 值越大，轮廓越少</span><br>imgDialation = cv.dilate(imgCanny,kernel,iterations=<span class="hljs-number">1</span>)<br>imgEroded = cv.erode(imgDialation,kernel,iterations=<span class="hljs-number">1</span>)<br><br>cv.imshow(<span class="hljs-string">&quot;Image&quot;</span>,img)<br>cv.imshow(<span class="hljs-string">&quot;Gray Image&quot;</span>,imgGray)<br>cv.imshow(<span class="hljs-string">&quot;Blur Image&quot;</span>,imgBlur)<br>cv.imshow(<span class="hljs-string">&quot;Canny Image&quot;</span>,imgCanny)<br>cv.imshow(<span class="hljs-string">&quot;Dialation Image&quot;</span>,imgDialation)<br>cv.imshow(<span class="hljs-string">&quot;Eroded Image&quot;</span>,imgEroded)<br>cv.waitKey(<span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure><p><img src="/ass/20211229-friends-blur.png" /></p><p><img src="/ass/20211229-friends-canny.png" /></p><h1 id="调整并裁剪图片大小">3 调整并裁剪图片大小</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># chapter3 resizing and cropping</span><br><span class="hljs-keyword">import</span> cv2 <span class="hljs-keyword">as</span> cv<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><br>img = cv.imread(<span class="hljs-string">&#x27;friends.jpg&#x27;</span>)<br><span class="hljs-built_in">print</span>(img.shape) <span class="hljs-comment"># 输出结果(1000,680,3) （高，宽，通道）</span><br><br>imgResize = cv.resize(img,(<span class="hljs-number">300</span>,<span class="hljs-number">200</span>))<br><span class="hljs-built_in">print</span>(imgResize.shape) <span class="hljs-comment"># (200,300,3)</span><br><br>imgCropped = img[<span class="hljs-number">50</span>:<span class="hljs-number">235</span>,<span class="hljs-number">165</span>:<span class="hljs-number">305</span>] <span class="hljs-comment"># Joey&#x27;s face</span><br><span class="hljs-built_in">print</span>(imgCropped.shape) <span class="hljs-comment"># (185, 140, 3)</span><br><br>cv.imshow(<span class="hljs-string">&#x27;Image&#x27;</span>,img)<br>cv.imshow(<span class="hljs-string">&#x27;Image Resize&#x27;</span>,imgResize)<br>cv.imshow(<span class="hljs-string">&#x27;Image Cropped&#x27;</span>,imgCropped)<br>cv.waitKey(<span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure><p><img src="/ass/20211229-friends-cropping.png" /></p><h1 id="形状及文本">4 形状及文本</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># chapter4 shapes and texts</span><br><span class="hljs-keyword">import</span> cv2 <span class="hljs-keyword">as</span> cv<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><br>img = np.zeros((<span class="hljs-number">512</span>,<span class="hljs-number">512</span>,<span class="hljs-number">3</span>),np.uint8)<br><span class="hljs-built_in">print</span>(img.shape) <span class="hljs-comment"># 大小</span><br><span class="hljs-comment"># print(img) # 矩阵</span><br><span class="hljs-comment"># img[:] = 255,0,0 # ：意思是整张图一个颜色</span><br><span class="hljs-comment"># img[100:300,200:300] = 255,0,0 # 指定区域</span><br><br>cv.line(img,(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>),(img.shape[<span class="hljs-number">1</span>],img.shape[<span class="hljs-number">0</span>]),(<span class="hljs-number">0</span>,<span class="hljs-number">255</span>,<span class="hljs-number">0</span>),<span class="hljs-number">1</span>) <span class="hljs-comment"># 起点坐标，终点坐标(矩阵)，颜色，线宽</span><br>cv.rectangle(img,(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>),(<span class="hljs-number">200</span>,<span class="hljs-number">300</span>),(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">255</span>),<span class="hljs-number">2</span>) <span class="hljs-comment"># 最后是线宽，替换为cv.FILLED是填充</span><br>cv.circle(img,(<span class="hljs-number">400</span>,<span class="hljs-number">50</span>),<span class="hljs-number">30</span>,(<span class="hljs-number">255</span>,<span class="hljs-number">255</span>,<span class="hljs-number">0</span>),<span class="hljs-number">5</span>) <span class="hljs-comment"># 圆心，半径，颜色，线宽</span><br>cv.putText(img,<span class="hljs-string">&quot;OpenCV&quot;</span>,(<span class="hljs-number">300</span>,<span class="hljs-number">200</span>),cv.FONT_HERSHEY_COMPLEX,<span class="hljs-number">0.5</span>,(<span class="hljs-number">255</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>),<span class="hljs-number">2</span>) <span class="hljs-comment"># 坐标，字体，字体比例大小，颜色，线宽</span><br><br>cv.imshow(<span class="hljs-string">&#x27;Image&#x27;</span>,img)<br>cv.waitKey(<span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure><p><img src="/ass/20211229-shapestexts.png" /></p><h1 id="透视变换">5 透视变换</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># chapter5 warp perspective</span><br><span class="hljs-keyword">import</span> cv2 <span class="hljs-keyword">as</span> cv<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><br>img = cv.imread(<span class="hljs-string">&quot;poker.jpg&quot;</span>)<br><br>width,height = <span class="hljs-number">250</span>,<span class="hljs-number">350</span><br>pts1 = np.float32([[<span class="hljs-number">1100</span>,<span class="hljs-number">402</span>],[<span class="hljs-number">1387</span>,<span class="hljs-number">730</span>],[<span class="hljs-number">596</span>,<span class="hljs-number">868</span>],[<span class="hljs-number">905</span>,<span class="hljs-number">1209</span>]])<br>pts2 = np.float32([[<span class="hljs-number">0</span>,<span class="hljs-number">0</span>],[width,<span class="hljs-number">0</span>],[<span class="hljs-number">0</span>,height],[width,height]])<br>matrix = cv.getPerspectiveTransform(pts1,pts2)<br>imgOutput = cv.warpPerspective(img,matrix,(width,height))<br><br>cv.imshow(<span class="hljs-string">&#x27;Image&#x27;</span>,img)<br>cv.imshow(<span class="hljs-string">&#x27;Image Output&#x27;</span>,imgOutput)<br>cv.waitKey(<span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure><p><img src="/ass/20211229-poker-warp.png" /></p><h1 id="合并图片">6 合并图片</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># chapter6 Joining images</span><br><span class="hljs-keyword">import</span> cv2 <span class="hljs-keyword">as</span> cv<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><br><span class="hljs-comment"># img = cv.imread(&quot;poker.jpg&quot;)</span><br><span class="hljs-comment"># imgHor = np.hstack((img,img))</span><br><span class="hljs-comment"># imgVer = np.vstack((img,img))</span><br><span class="hljs-comment"># # 两个问题：1不能调整合并图的大小；</span><br><span class="hljs-comment"># # 2该函数属于numpy库，是两个矩阵的拼接，所以如果两个图片通道不同，不能合并</span><br><br><span class="hljs-comment"># cv.imshow(&#x27;Horizontal&#x27;,imgHor)</span><br><span class="hljs-comment"># cv.imshow(&#x27;Vertical&#x27;,imgVer)</span><br><span class="hljs-comment"># cv.waitKey(0)</span><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">stackImages</span>(<span class="hljs-params">scale,imgArray</span>):</span><br>    rows = <span class="hljs-built_in">len</span>(imgArray)<br>    cols = <span class="hljs-built_in">len</span>(imgArray[<span class="hljs-number">0</span>])<br>    rowsAvailable = <span class="hljs-built_in">isinstance</span>(imgArray[<span class="hljs-number">0</span>], <span class="hljs-built_in">list</span>)<br>    width = imgArray[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>].shape[<span class="hljs-number">1</span>]<br>    height = imgArray[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>].shape[<span class="hljs-number">0</span>]<br>    <span class="hljs-keyword">if</span> rowsAvailable:<br>        <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span> ( <span class="hljs-number">0</span>, rows):<br>            <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, cols):<br>                <span class="hljs-keyword">if</span> imgArray[x][y].shape[:<span class="hljs-number">2</span>] == imgArray[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>].shape [:<span class="hljs-number">2</span>]:<br>                    imgArray[x][y] = cv.resize(imgArray[x][y], (<span class="hljs-number">0</span>, <span class="hljs-number">0</span>), <span class="hljs-literal">None</span>, scale, scale)<br>                <span class="hljs-keyword">else</span>:<br>                    imgArray[x][y] = cv.resize(imgArray[x][y], (imgArray[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>].shape[<span class="hljs-number">1</span>], imgArray[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>].shape[<span class="hljs-number">0</span>]), <span class="hljs-literal">None</span>, scale, scale)<br>                <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(imgArray[x][y].shape) == <span class="hljs-number">2</span>: imgArray[x][y]= cv.cvtColor( imgArray[x][y], cv.COLOR_GRAY2BGR)<br>        imageBlank = np.zeros((height, width, <span class="hljs-number">3</span>), np.uint8)<br>        hor = [imageBlank]*rows<br>        hor_con = [imageBlank]*rows<br>        <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, rows):<br>            hor[x] = np.hstack(imgArray[x])<br>        ver = np.vstack(hor)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, rows):<br>            <span class="hljs-keyword">if</span> imgArray[x].shape[:<span class="hljs-number">2</span>] == imgArray[<span class="hljs-number">0</span>].shape[:<span class="hljs-number">2</span>]:<br>                imgArray[x] = cv.resize(imgArray[x], (<span class="hljs-number">0</span>, <span class="hljs-number">0</span>), <span class="hljs-literal">None</span>, scale, scale)<br>            <span class="hljs-keyword">else</span>:<br>                imgArray[x] = cv.resize(imgArray[x], (imgArray[<span class="hljs-number">0</span>].shape[<span class="hljs-number">1</span>], imgArray[<span class="hljs-number">0</span>].shape[<span class="hljs-number">0</span>]), <span class="hljs-literal">None</span>,scale, scale)<br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(imgArray[x].shape) == <span class="hljs-number">2</span>: imgArray[x] = cv.cvtColor(imgArray[x], cv.COLOR_GRAY2BGR)<br>        hor= np.hstack(imgArray)<br>        ver = hor<br>    <span class="hljs-keyword">return</span> ver<br><br>img = cv.imread(<span class="hljs-string">&#x27;friends.jpg&#x27;</span>)<br>imgGray = cv.cvtColor(img,cv.COLOR_BGR2GRAY)<br><br>imgStack = stackImages(<span class="hljs-number">0.5</span>,([img,imgGray,img],[img,img,img]))<br><br>cv.imshow(<span class="hljs-string">&quot;ImageStack&quot;</span>,imgStack)<br><br>cv.waitKey(<span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure><p><img src="/ass/20211229-friends-joining.png" /></p><h1 id="颜色检测">7 颜色检测</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># chapter7 color detection</span><br><span class="hljs-keyword">import</span> cv2 <span class="hljs-keyword">as</span> cv<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">empty</span>(<span class="hljs-params">a</span>):</span><br>    <span class="hljs-keyword">pass</span><br><br><span class="hljs-comment"># 组图程序</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">stackImages</span>(<span class="hljs-params">scale,imgArray</span>):</span><br>    rows = <span class="hljs-built_in">len</span>(imgArray)<br>    cols = <span class="hljs-built_in">len</span>(imgArray[<span class="hljs-number">0</span>])<br>    rowsAvailable = <span class="hljs-built_in">isinstance</span>(imgArray[<span class="hljs-number">0</span>], <span class="hljs-built_in">list</span>)<br>    width = imgArray[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>].shape[<span class="hljs-number">1</span>]<br>    height = imgArray[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>].shape[<span class="hljs-number">0</span>]<br>    <span class="hljs-keyword">if</span> rowsAvailable:<br>        <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span> ( <span class="hljs-number">0</span>, rows):<br>            <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, cols):<br>                <span class="hljs-keyword">if</span> imgArray[x][y].shape[:<span class="hljs-number">2</span>] == imgArray[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>].shape [:<span class="hljs-number">2</span>]:<br>                    imgArray[x][y] = cv.resize(imgArray[x][y], (<span class="hljs-number">0</span>, <span class="hljs-number">0</span>), <span class="hljs-literal">None</span>, scale, scale)<br>                <span class="hljs-keyword">else</span>:<br>                    imgArray[x][y] = cv.resize(imgArray[x][y], (imgArray[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>].shape[<span class="hljs-number">1</span>], imgArray[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>].shape[<span class="hljs-number">0</span>]), <span class="hljs-literal">None</span>, scale, scale)<br>                <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(imgArray[x][y].shape) == <span class="hljs-number">2</span>: imgArray[x][y]= cv.cvtColor( imgArray[x][y], cv.COLOR_GRAY2BGR)<br>        imageBlank = np.zeros((height, width, <span class="hljs-number">3</span>), np.uint8)<br>        hor = [imageBlank]*rows<br>        hor_con = [imageBlank]*rows<br>        <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, rows):<br>            hor[x] = np.hstack(imgArray[x])<br>        ver = np.vstack(hor)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, rows):<br>            <span class="hljs-keyword">if</span> imgArray[x].shape[:<span class="hljs-number">2</span>] == imgArray[<span class="hljs-number">0</span>].shape[:<span class="hljs-number">2</span>]:<br>                imgArray[x] = cv.resize(imgArray[x], (<span class="hljs-number">0</span>, <span class="hljs-number">0</span>), <span class="hljs-literal">None</span>, scale, scale)<br>            <span class="hljs-keyword">else</span>:<br>                imgArray[x] = cv.resize(imgArray[x], (imgArray[<span class="hljs-number">0</span>].shape[<span class="hljs-number">1</span>], imgArray[<span class="hljs-number">0</span>].shape[<span class="hljs-number">0</span>]), <span class="hljs-literal">None</span>,scale, scale)<br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(imgArray[x].shape) == <span class="hljs-number">2</span>: imgArray[x] = cv.cvtColor(imgArray[x], cv.COLOR_GRAY2BGR)<br>        hor= np.hstack(imgArray)<br>        ver = hor<br>    <span class="hljs-keyword">return</span> ver<br><br>path = <span class="hljs-string">&#x27;friends.jpg&#x27;</span><br>cv.namedWindow(<span class="hljs-string">&#x27;TrackBars&#x27;</span>)<br>cv.resizeWindow(<span class="hljs-string">&#x27;TrackBars&#x27;</span>, <span class="hljs-number">640</span>, <span class="hljs-number">240</span>)<br>cv.createTrackbar(<span class="hljs-string">&#x27;Hue Min&#x27;</span>, <span class="hljs-string">&#x27;TrackBars&#x27;</span>, <span class="hljs-number">0</span>, <span class="hljs-number">179</span>, empty)<br>cv.createTrackbar(<span class="hljs-string">&#x27;Hue Max&#x27;</span>, <span class="hljs-string">&#x27;TrackBars&#x27;</span>, <span class="hljs-number">28</span>, <span class="hljs-number">179</span>, empty)<br>cv.createTrackbar(<span class="hljs-string">&#x27;Sat Min&#x27;</span>, <span class="hljs-string">&#x27;TrackBars&#x27;</span>, <span class="hljs-number">3</span>, <span class="hljs-number">355</span>, empty)<br>cv.createTrackbar(<span class="hljs-string">&#x27;Sat Max&#x27;</span>, <span class="hljs-string">&#x27;TrackBars&#x27;</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, empty)<br>cv.createTrackbar(<span class="hljs-string">&#x27;Val Min&#x27;</span>, <span class="hljs-string">&#x27;TrackBars&#x27;</span>, <span class="hljs-number">143</span>, <span class="hljs-number">255</span>, empty)<br>cv.createTrackbar(<span class="hljs-string">&#x27;Val Max&#x27;</span>, <span class="hljs-string">&#x27;TrackBars&#x27;</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, empty)<br><br>img = cv.imread(path)<br><br><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>    imgHSV = cv.cvtColor(img, cv.COLOR_BGR2HSV)<br>    h_min = cv.getTrackbarPos(<span class="hljs-string">&#x27;Hue Min&#x27;</span>, <span class="hljs-string">&#x27;TrackBars&#x27;</span>)<br>    h_max = cv.getTrackbarPos(<span class="hljs-string">&#x27;Hue Max&#x27;</span>, <span class="hljs-string">&#x27;TrackBars&#x27;</span>)<br>    s_min = cv.getTrackbarPos(<span class="hljs-string">&#x27;Sat Min&#x27;</span>, <span class="hljs-string">&#x27;TrackBars&#x27;</span>)<br>    s_max = cv.getTrackbarPos(<span class="hljs-string">&#x27;Sat Max&#x27;</span>, <span class="hljs-string">&#x27;TrackBars&#x27;</span>)<br>    v_min = cv.getTrackbarPos(<span class="hljs-string">&#x27;Val Min&#x27;</span>, <span class="hljs-string">&#x27;TrackBars&#x27;</span>)<br>    v_max = cv.getTrackbarPos(<span class="hljs-string">&#x27;Val Max&#x27;</span>, <span class="hljs-string">&#x27;TrackBars&#x27;</span>)<br>    <span class="hljs-built_in">print</span>(h_min, h_max, s_min, s_max, v_min, v_max)<br>    lower = np.array([h_min, s_min, v_min])<br>    upper = np.array([h_max, s_max, v_max])<br>    mask = cv.inRange(imgHSV, lower, upper)<br>    imgResult = cv.bitwise_and(img,img,mask=mask)<br><br>    cv.imshow(<span class="hljs-string">&#x27;Original&#x27;</span>, img)<br>    cv.imshow(<span class="hljs-string">&#x27;ImageHSV&#x27;</span>, imgHSV)<br>    cv.imshow(<span class="hljs-string">&#x27;Mask&#x27;</span>, mask)<br>    cv.imshow(<span class="hljs-string">&#x27;Result&#x27;</span>, imgResult)<br>    imgStack = stackImages(<span class="hljs-number">0.5</span>,([img,imgHSV],[mask,imgResult]))<br>    cv.imshow(<span class="hljs-string">&#x27;Stacked Images&#x27;</span>,imgStack)<br>    cv.waitKey(<span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure><p><img src="/ass/20211229-cars-color-detection-bar.png" style="zoom:60%;" /></p><p><img src="/ass/20211229-cars-color-detection.png" /></p><h1 id="轮廓形状检测">8 轮廓、形状检测</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># chapter8 contours / shape detection</span><br><span class="hljs-keyword">import</span> cv2 <span class="hljs-keyword">as</span> cv<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">stackImages</span>(<span class="hljs-params">scale,imgArray</span>):</span><br>    rows = <span class="hljs-built_in">len</span>(imgArray)<br>    cols = <span class="hljs-built_in">len</span>(imgArray[<span class="hljs-number">0</span>])<br>    rowsAvailable = <span class="hljs-built_in">isinstance</span>(imgArray[<span class="hljs-number">0</span>], <span class="hljs-built_in">list</span>)<br>    width = imgArray[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>].shape[<span class="hljs-number">1</span>]<br>    height = imgArray[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>].shape[<span class="hljs-number">0</span>]<br>    <span class="hljs-keyword">if</span> rowsAvailable:<br>        <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span> ( <span class="hljs-number">0</span>, rows):<br>            <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, cols):<br>                <span class="hljs-keyword">if</span> imgArray[x][y].shape[:<span class="hljs-number">2</span>] == imgArray[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>].shape [:<span class="hljs-number">2</span>]:<br>                    imgArray[x][y] = cv.resize(imgArray[x][y], (<span class="hljs-number">0</span>, <span class="hljs-number">0</span>), <span class="hljs-literal">None</span>, scale, scale)<br>                <span class="hljs-keyword">else</span>:<br>                    imgArray[x][y] = cv.resize(imgArray[x][y], (imgArray[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>].shape[<span class="hljs-number">1</span>], imgArray[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>].shape[<span class="hljs-number">0</span>]), <span class="hljs-literal">None</span>, scale, scale)<br>                <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(imgArray[x][y].shape) == <span class="hljs-number">2</span>: imgArray[x][y]= cv.cvtColor( imgArray[x][y], cv.COLOR_GRAY2BGR)<br>        imageBlank = np.zeros((height, width, <span class="hljs-number">3</span>), np.uint8)<br>        hor = [imageBlank]*rows<br>        hor_con = [imageBlank]*rows<br>        <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, rows):<br>            hor[x] = np.hstack(imgArray[x])<br>        ver = np.vstack(hor)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, rows):<br>            <span class="hljs-keyword">if</span> imgArray[x].shape[:<span class="hljs-number">2</span>] == imgArray[<span class="hljs-number">0</span>].shape[:<span class="hljs-number">2</span>]:<br>                imgArray[x] = cv.resize(imgArray[x], (<span class="hljs-number">0</span>, <span class="hljs-number">0</span>), <span class="hljs-literal">None</span>, scale, scale)<br>            <span class="hljs-keyword">else</span>:<br>                imgArray[x] = cv.resize(imgArray[x], (imgArray[<span class="hljs-number">0</span>].shape[<span class="hljs-number">1</span>], imgArray[<span class="hljs-number">0</span>].shape[<span class="hljs-number">0</span>]), <span class="hljs-literal">None</span>,scale, scale)<br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(imgArray[x].shape) == <span class="hljs-number">2</span>: imgArray[x] = cv.cvtColor(imgArray[x], cv.COLOR_GRAY2BGR)<br>        hor= np.hstack(imgArray)<br>        ver = hor<br>    <span class="hljs-keyword">return</span> ver<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getContours</span>(<span class="hljs-params">img</span>):</span><br>    contours,hierarchy = cv.findContours(img,cv.RETR_EXTERNAL,cv.CHAIN_APPROX_NONE)<br>    <span class="hljs-keyword">for</span> cnt <span class="hljs-keyword">in</span> contours:<br>        area = cv.contourArea(cnt) <span class="hljs-comment"># 计算contour面积</span><br>        <span class="hljs-comment"># print(area)</span><br>        <span class="hljs-keyword">if</span> area &gt; <span class="hljs-number">500</span>:<br>            cv.drawContours(imgContour,cnt,-<span class="hljs-number">1</span>,(<span class="hljs-number">255</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>),<span class="hljs-number">9</span>) <span class="hljs-comment"># -1是画出所有contour</span><br>            peri = cv.arcLength(cnt,<span class="hljs-literal">True</span>) <span class="hljs-comment"># 计算曲线长度</span><br>            <span class="hljs-comment"># print(peri)</span><br>            approx = cv.approxPolyDP(cnt,<span class="hljs-number">0.02</span>*peri,<span class="hljs-literal">True</span>) <span class="hljs-comment"># 拐点，中间值是分辨率</span><br>            <span class="hljs-built_in">print</span>(<span class="hljs-built_in">len</span>(approx)) <span class="hljs-comment"># 3是三角形，4是矩形，超过4的应该认为是圆形</span><br>            objCor = <span class="hljs-built_in">len</span>(approx) <span class="hljs-comment"># object corners</span><br>            x,y,w,h = cv.boundingRect(approx) <span class="hljs-comment"># 边界框</span><br><br>            <span class="hljs-keyword">if</span> objCor == <span class="hljs-number">3</span>: objectType = <span class="hljs-string">&quot;Tri&quot;</span><br>            <span class="hljs-keyword">elif</span> objCor == <span class="hljs-number">4</span>:<br>                aspRatio = w/<span class="hljs-built_in">float</span>(h)<br>                <span class="hljs-keyword">if</span> aspRatio &gt; <span class="hljs-number">0.95</span> <span class="hljs-keyword">and</span> aspRatio &lt; <span class="hljs-number">1.05</span>: objectType = <span class="hljs-string">&quot;Square&quot;</span><br>                <span class="hljs-keyword">else</span>: objectType = <span class="hljs-string">&quot;Rectangle&quot;</span><br>            <span class="hljs-keyword">elif</span> objCor &gt; <span class="hljs-number">4</span>: objectType = <span class="hljs-string">&quot;Circle&quot;</span><br>            <span class="hljs-keyword">else</span>: objectType = <span class="hljs-string">&quot;None&quot;</span><br>            cv.rectangle(imgContour,(x,y),(x+w,y+h),(<span class="hljs-number">0</span>,<span class="hljs-number">255</span>,<span class="hljs-number">0</span>),<span class="hljs-number">2</span>)<br>            cv.putText(imgContour,objectType,<br>                        (x+(w//<span class="hljs-number">2</span>)-<span class="hljs-number">10</span>,y+(h//<span class="hljs-number">2</span>)-<span class="hljs-number">10</span>),cv.FONT_HERSHEY_COMPLEX,<br>                        <span class="hljs-number">0.5</span>,(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>),<span class="hljs-number">2</span>)<br><br>path = <span class="hljs-string">&#x27;shapes2.png&#x27;</span><br>img = cv.imread(path)<br>imgContour = img.copy()<br><br>imgGray = cv.cvtColor(img,cv.COLOR_BGR2GRAY)<br>imgBlur = cv.GaussianBlur(imgGray,(<span class="hljs-number">7</span>,<span class="hljs-number">7</span>),<span class="hljs-number">1</span>)<br>imgCanny = cv.Canny(imgBlur,<span class="hljs-number">50</span>,<span class="hljs-number">50</span>)<br><br>getContours(imgCanny)<br><br>imgBlank = np.zeros_like(img)<br>imgStack = stackImages(<span class="hljs-number">0.8</span>,([img,imgGray,imgBlur],<br>                            [imgCanny,imgContour,imgBlank]))<br>cv.imshow(<span class="hljs-string">&#x27;Stacked Image&#x27;</span>,imgStack)<br>cv.waitKey(<span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure><p><img src="/ass/20211229-contour-detection.png" /></p><h1 id="面部检测">9 面部检测</h1><p>Viola&amp;Jones——第一个实时物体检测算法（2001）</p><p><img src="/ass/20211230-viola&amp;jones.png" /></p><p>一般内置数据集有这几个</p><p><img src="20211230-haarCascade.png" /></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># chapter9 face detection</span><br><span class="hljs-keyword">import</span> cv2 <span class="hljs-keyword">as</span> cv<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><br>faceCascade = cv.CascadeClassifier(<span class="hljs-string">&quot;/usr/local/share/opencv4/haarcascades/haarcascade_frontalface_default.xml&quot;</span>)<br>path = <span class="hljs-string">&#x27;friends.jpg&#x27;</span><br>img = cv.imread(path)<br>imgGray = cv.cvtColor(img,cv.COLOR_BGR2GRAY)<br><br>faces = faceCascade.detectMultiScale(imgGray,<span class="hljs-number">1.3</span>,<span class="hljs-number">4</span>)<br><span class="hljs-keyword">for</span> (x,y,w,h) <span class="hljs-keyword">in</span> faces:<br>    cv.rectangle(img,(x,y),(x+w,y+h),(<span class="hljs-number">255</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>),<span class="hljs-number">2</span>)<br><br>cv.imshow(<span class="hljs-string">&#x27;Original&#x27;</span>,img)<br>cv.waitKey(<span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure><p>Rachel的脸没有检测出来，应该是斜脸的原因，调了几次还是不行，看来要换数据集才行。</p><p><img src="/ass/20211229-friends-face-detection.png" /></p>]]></content>
    
    
    <categories>
      
      <category>技术</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>opencv</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>轻量级编辑器SublimeText&amp;VisualStudioCode</title>
    <link href="/posts/10013/"/>
    <url>/posts/10013/</url>
    
    <content type="html"><![CDATA[<p>PyCharm确实强大好用，但是对于新手和小项目太过笨重。而Sublime Text这一轻量级编辑器满足了这一需求。<strong>&lt;然而最后我还是转战VSCode了，Sublime的代码补全功能跟稍重一点的轻量级编辑器VSCode根本没法比！&gt;</strong><span id="more"></span></p><h1 id="下载安装">下载安装</h1><p>我是在ubuntu下使用的。下载安装参考<a href="https://www.sublimetext.com/docs/linux_repositories.html">官方文档</a>。</p><p>安装完成后需要配置一番，就可以成为我们的生产力工具了。</p><h1 id="配置">配置</h1><p>对于sublime的配置，我看了很多人写的教程博客，但基本都是一样的错误或没必要，上Youtube搜了以下，果然，配置起来不是很复杂。Sublime打开或新建一个python文件，一是易于观察后面的变化，二是你必须通过后缀名告诉sublime这是python文件，他才能加载解释器和高亮代码等。主要参考<a href="https://www.youtube.com/watch?v=xFciV6Ew5r4">这个视频</a>和<a href="https://www.youtube.com/watch?v=oHmPrjSzmwU&amp;t=456s">这个视频</a>。</p><h2 id="python3解释器">Python3解释器</h2><p>在终端输入命令（或者直接用sublime新建文件，<code>Ctrl+B</code>运行）查看python3解释器路径</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus">python3<br>import sys<br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(sys.executable)</span></span><br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(sys.version)</span></span><br></code></pre></td></tr></table></figure><p>我的路径是<code>/usr/bin/python3</code>，打开工具栏<code>Tools-&gt;Build System-&gt;New Build System...</code>，用下面代码替换原内容，注意其中路径改为刚才所得路径，重命名为Python3，后缀不要改动，保存重启即可用Python3解释器编译。</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>    <span class="hljs-attr">&quot;cmd&quot;</span>: [<span class="hljs-string">&quot;/usr/bin/python3&quot;</span>, <span class="hljs-string">&quot;-u&quot;</span>, <span class="hljs-string">&quot;$file&quot;</span>],<br>    <span class="hljs-attr">&quot;file_regex&quot;</span>: <span class="hljs-string">&quot;^[ ]*File \&quot;(...*?)\&quot;, line ([0-9]*)&quot;</span>,<br>    <span class="hljs-attr">&quot;quiet&quot;</span>: <span class="hljs-literal">true</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="python代码自动补全">Python代码自动补全</h2><p>Sublime text的强大好用很大程度得益于它的众多扩展插件。为了使用这些插件，首先要安装插件管理工具，按下<code>Ctrl+Shift+P</code>打开命令面板，输入<code>Package Control</code>，回车或点击，可以看到下方有进度条等待安装。安装完成后再次打开命令面板，输入<code>Install Package</code>回车，输入<code>jedi python auto completion</code>回车等待安装，重启sublime后敲几行代码试试看，这是应该可以<code>Tab</code>或回车补全代码了。</p><p><img src="/ass/20211228-sublime.png" /></p><h1 id="其他插件">其他插件</h1><p>侧边栏右键菜单栏增强：<code>BracketHighlighter</code></p><p>括号匹配高亮：<code>Side Bar Enhancements</code></p><p>主题1：<code>Material Theme</code></p><p>主题2：<code>Predawn</code></p><h1 id="特色及快捷键">特色及快捷键</h1><p>参考<a href="https://www.youtube.com/watch?v=TB3qztdM7V8&amp;t=1s">这个视频</a></p><p>如何使用使效能最大化？</p><p>Linux系统：新建项目文件夹-&gt;右键打开终端-&gt;<code>subl .</code>即可在sublime中打开当前文件夹，然后就开始旅程吧！</p><p>另：刚发现typora也可以这么玩！</p><h1 id="最后">最后</h1><p>转战Visual Studio Code了，只下载一个<code>python</code>插件就比Sublime配置半天要好用。当然也可能是我不会配置，但这也正说明了Sublime不适合我这种小白。</p><h2 id="vscode的简单说明">VSCode的简单说明</h2><h3 id="插件">插件</h3><p>Python：<code>Python</code></p><p>路径自动补全：<code>Path Autocomplete</code></p><h3 id="快捷键">快捷键</h3><p>终端打开命令：<code>code .</code></p><p>运行：<code>Ctrl+F5</code></p><p>命令面板：<code>Ctrl+Shift+P</code></p><h3 id="其他">其他</h3><p>如果环境中配置了ipython，也可以在VSCode中使用Jupyter Notebook。</p><p><code>Ctrl+Shift+P</code>打开命令面板，输入<code>jupyter</code>，单击<code>Jupyter: Create New Jupyter Notebook</code>，即可新建<code>.ipynb</code>文件，享受jupyter的分块代码的乐趣了。<a href="https://matters.news/@youdaily/vs-code%E4%B8%8A%E4%B9%9F%E8%83%BD%E7%8E%A9%E8%BD%ACjupyter-notebook-%E8%BF%99%E6%98%AF%E4%B8%80%E4%BB%BD%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B-bafyreic6ok64s5t773c722v2dsumg2c67bbhro6terda44umcubc6xwi2m">参考</a></p><p>快捷键：<code>Shift+Enter</code>运行当前Cell，新建Cell并跳转</p><p><code>Win+Enter</code>运行当前Cell</p>]]></content>
    
    
    <categories>
      
      <category>技术</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>VSCode</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>树莓派折腾全纪录</title>
    <link href="/posts/10012/"/>
    <url>/posts/10012/</url>
    
    <content type="html"><![CDATA[<p>最近入手了一个树莓派4B，来折腾一番吧！<span id="more"></span></p><h1 id="linux基础">0 Linux基础</h1><p>树莓派自带的操作系统是Linux内核的，要想玩转树莓派，就需要先熟悉一些基本的Linux操作。在这里不展开这一部分，详见<a href="/posts/10011/">这篇文章</a>。</p><h1 id="基础配置">1 基础配置</h1><h2 id="远程启动">远程启动</h2><p><a href="https://www.youtube.com/watch?v=h-BIBIGOYmE">远程启动视频教程</a></p><p>首先在boot目录下，新建ssh空文件，无后缀名</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">touch ssh<br></code></pre></td></tr></table></figure><p>同样在boot目录下，新建wpa_supplicant.conf文件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell">vim wpa_supplicant.conf<br>ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev<br>update_config=1<br>country=CN<br><br>network=&#123;<br> ssid=&quot;WIFI_NAME&quot;<br> psk=&quot;WIFI_PASSWORD&quot;<br>&#125;<br></code></pre></td></tr></table></figure><p>这样，不出意外我们就可以通过SSH工具远程访问树莓派了（局域网）。另外，最近发现一款免费好用的SSH工具，<a href="https://github.com/kingToolbox/WindTerm">WindTerm</a>，命令行与传输文件集于一身，颜值也不错。</p><p>要想远程桌面访问，首先需要开启VNC。在SSH工具中输入命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo raspi-config<br></code></pre></td></tr></table></figure><p>用方向键选择<code>3 Interface Options</code>，按下<code>Enter</code>，再选择<code>P3 VNC</code>，按下<code>Enter</code>。对于Windows系统，自带的远程桌面工具就挺好用，左下角输入<code>remote</code>，输入树莓派用户名和密码即可进入树莓派图形化桌面。</p><h2 id="更改下载源">更改下载源</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> 编辑 `/etc/apt/sources.list` 文件，删除原文件所有内容，用以下内容取代：</span><br>deb http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ buster main non-free contrib rpi<br>deb-src http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ buster main non-free contrib rpi<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash"> 编辑 `/etc/apt/sources.list.d/raspi.list` 文件，删除原文件所有内容，用以下内容取代：</span><br>deb http://mirrors.tuna.tsinghua.edu.cn/raspberrypi/ buster main ui<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo apt update # 更新下载源<br>sudo apt upgrade # 更新软件<br>sudo rpi-eeprom-update -d -a # 更新固件（不建议使用）<br></code></pre></td></tr></table></figure><h2 id="静态ip地址">静态IP地址</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">ip r | grep default # 查看路由器<br>sudo cat /etc/resolv.conf # 查看DNS<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo vim /etc/dhcpcd.conf<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">interface wlan0 # 有线eth0<br>static ip_address=192.168.1.200/24<br>static routers=192.168.1.1<br>static domain_name_servers=192.168.1.1 114.114.114.114<br></code></pre></td></tr></table></figure><h1 id="个人博客搭建">3 个人博客搭建</h1><p>这里是利用树莓派作为网页服务器搭建个人博客，重点是配置树莓派，使之成为服务器。</p><p>主要参考<a href="https://juejin.cn/post/6996254603767939102">这篇文章</a></p><h2 id="a.本地安装">a.本地安装</h2><p>本地安装及SSH公钥生成参考<a href="/posts/10010/">这篇文章</a></p><h2 id="b.树莓派配置">b.树莓派配置</h2><h3 id="安装git">安装Git</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo apt install git<br></code></pre></td></tr></table></figure><p>查看版本，确保安装正确</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git --version<br></code></pre></td></tr></table></figure><h3 id="安装nginx">安装Nginx</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo apt install nginx<br></code></pre></td></tr></table></figure><p>查看版本，确保安装正确</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">nginx -v<br></code></pre></td></tr></table></figure><h3 id="建立远程git仓库">建立远程git仓库</h3><p>通过git将本地代码推送到树莓派远程仓库</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo mkdir /var/repo/#创建一个文件夹<br>sudo chown -R $USER:$USER /var/repo/#给分到用户组<br>sudo chmod -R 755 /var/repo/#改变文件夹权限<br>cd /var/repo/<br>git init --bare babblingme.git<br></code></pre></td></tr></table></figure><h3 id="映射仓库">映射仓库</h3><p>将仓库映射到博客目录下</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo mkdir -p /var/www/hexo<br>sudo chown -R $USER:$USER /var/www/hexo<br>sudo chmod -R 755 /var/www/hexo<br>sudo vim /var/repo/babblingme.git/hooks/post-receive<br></code></pre></td></tr></table></figure><p>写入以下内容</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash">!/bin/bash</span><br>git --work-tree=/var/www/hexo --git-dir=/var/repo/babblingme.git checkout -f<br><br>sudo chmod +x /var/repo/babblingme.git/hooks/post-receive<br></code></pre></td></tr></table></figure><h3 id="nginx配置">Nginx配置</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo vim /etc/nginx/sites-available/default<br><br>server &#123;<br>        listen 80 default_server; <br>        listen [::]:80 default_server;<br>        ...<br>        root /var/www/hexo; # 修改这里，设置为博客根目录<br>        <br>sudo service nginx restart # 重启Nginx服务<br></code></pre></td></tr></table></figure><p>此时访问树莓派IP地址，出现<code>403 Forbidden</code>字样说明配置成功</p><h3 id="添加本地公钥到远程git仓库">添加本地公钥到远程git仓库</h3><p>在<code>C:/programfile/.ssh</code>目录下，右键Git Bash</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ssh-copy-id -p 22 pi@100.100.100.100 # 此处是树莓派的用户名和IP地址<br></code></pre></td></tr></table></figure><p>确认安装即可</p><h3 id="推送至树莓派">推送至树莓派</h3><p>修改<code>_config.yml</code>文件中的推送地址</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">url:</span> <span class="hljs-string">http://100.100.100.100</span> <span class="hljs-comment"># 此处是树莓派的IP地址</span><br><br><span class="hljs-attr">deploy:</span><br>  <span class="hljs-attr">type:</span>  <span class="hljs-string">git</span><br>  <span class="hljs-attr">repo:</span>  <span class="hljs-string">pi@100.100.100.100:/var/repo/babblingme.git</span> <span class="hljs-comment"># 此处是树莓派的IP地址</span><br>  <span class="hljs-attr">branch:</span> <span class="hljs-string">master</span><br></code></pre></td></tr></table></figure><p>在本地博客根目录右键Git Bash，<code>hexo d -g</code>，这样再访问树莓派IP地址，就能看见自己的博客了。</p><h2 id="c.内网穿透">c.内网穿透</h2><p>https://www.ngrok.cc/</p><p>想要在非局域网（公网）访问自己的树莓派，就需要一个公网IP地址，这可以通过打电话向运营商直接索取，但目前还在学生阶段的我就不尝试了，直接内网穿透来体验一下。我选用的是Sunny-Ngrok实现内网穿透。以下操作都是通过SSH工具在树莓派中进行的。</p><h3 id="下载客户端">下载客户端</h3><p>我这里选用Linux ARM版本，下载后找个文件夹解压</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">unzip</span> linux_arm.zip<br></code></pre></td></tr></table></figure><h3 id="启动隧道">启动隧道</h3><p>注册登录，然后需要实名认证，还要通过支付宝人脸识别，然后才能开通隧道，看官方教程即可。注意，本地IP一般不用修改，默认127.0.0.1即可，端口最好改一下比较安全，改成8000或者7000这种。赠送的域名较长，后期可以购买域名绑定。</p><p>进入刚才解压的文件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd linux_arm<br>./sunny cliented 隧道ID1, ID2<br></code></pre></td></tr></table></figure><p>这样就会进入下面这个界面，就代表连接成功</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell">Sunny-Ngrok www.ngrok.cc                                                                 (Ctrl+C to quit)<br>                                                                                                         <br>Tunnel Status                 online                                                                     <br>Version                       2.1.1/2.1.1                                                                <br>Forwarding                    http://xxx.xxx.xxxxx.com -&gt; 127.0.0.1:80                             <br>Web Interface                 127.0.0.1:4040                                                             <br><span class="hljs-meta">#</span><span class="bash"> Conn                        0</span>                                                                          <br>Avg Conn Time                 0.00ms <br></code></pre></td></tr></table></figure><p>在浏览器输入上方给出的网址，无论局域网或非局域网都可以访问，不过有时网络拥堵，可能打开较慢。Ngrok的原理其实就是将公网域名http://xxx.xxx.xxxxx.com映射到本地127.0.0.1:80端口上。</p><p>如果想后台启动Ngrok，输入下方命令即可</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">setsid ./sunny clientid 隧道id &amp;<br></code></pre></td></tr></table></figure><h3 id="nginx配置-1">Nginx配置</h3><p>如果你在开通隧道时修改了端口号，打开上述网址，一般会提示<code>隧道 **** 不可用</code>错误，这时需要配置一下Nginx。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo vim /etc/nginx/sites-available/default<br><br>server &#123;<br>        listen 80 default_server; # 将80改为你设置的端口号<br>        listen [::]:80 default_server; # 这里是IPv6端口，一般不用改动<br>        <br>sudo service nginx restart # 重启Nginx服务<br></code></pre></td></tr></table></figure><p>以上，就可以在任何地方访问你的博客了，其实跟Hexo+Gitee搭建个人博客的感觉差不多，只不过Gitee是有人给你搭建好了服务器给你使用，而你将树莓派搭建成一台网页服务器使用。</p><h2 id="d-远程公网ssh登录">d 远程公网SSH登录</h2><p>既然已经实现了内网穿透，我们也可以用它来实现SSH登录。访问网页使用的是http隧道，而ssh连接则使用tcp隧道。</p><ul><li><p>添加TCP隧道，跟上面添加http隧道相似，树莓派默认端口是22（安全起见，最好更改）</p></li><li><p>启动隧道</p></li><li><p>访问隧道，端口为刚才设置的远程端口</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ssh -p 10000 admin@xxx.xxxxxx.com<br></code></pre></td></tr></table></figure></li></ul><h1 id="学习环境搭建">3 学习环境搭建</h1><h2 id="安装opencv">安装OpenCV</h2><p>这里采用源码安装，因为源码安装比较自由且可以选择版本。我第一次直接安装最新版遇到了莫名其妙的问题，因此还是先安装之前的版本。安装参考<a href="https://www.youtube.com/watch?v=ylnjXbcNLJU">这个视频</a>或<a href="https://aadeshshah.medium.com/pre-installed-and-pre-configured-raspbian-with-opencv-4-1-0-for-raspberry-pi-3-model-b-b-9c307b9a993a">文章</a>。严格按照步骤来，代码可直接复制，手敲容易出错。安装过程中要耐心等待，不要随便敲击键盘。如有出错，后面附有部分debug内容，解决不了就Google it。</p><ol type="1"><li><p>更新树莓派</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo apt update &amp;&amp; sudo apt upgrade<br></code></pre></td></tr></table></figure></li><li><p>增大交换空间</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo nano /etc/dphys-swapfile<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash">CONF_SWAPSIZE=100</span><br> CONF_SWAPSIZE=2048<br></code></pre></td></tr></table></figure></li><li><p>安装工具及函数库</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo apt-get install build-essential cmake pkg-config<br>sudo apt-get install libjpeg-dev libtiff5-dev libjasper-dev libpng12-dev<br>sudo apt-get install libavcodec-dev libavformat-dev libswscale-dev libv4l-dev<br>sudo apt-get install libxvidcore-dev libx264-dev<br>sudo apt-get install libgtk2.0-dev libgtk-3-dev<br>sudo apt-get install libatlas-base-dev gfortran<br></code></pre></td></tr></table></figure></li><li><p>安装Python3和pip3</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo apt-get install python3-dev<br>sudo apt-get install python3-pip<br></code></pre></td></tr></table></figure></li><li><p>下载OpenCV源代码</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">wget -O opencv.zip https://github.com/opencv/opencv/archive/4.1.0.zip<br>wget -O opencv_contrib.zip https://github.com/opencv/opencv_contrib/archive/4.1.0.zip<br>unzip opencv.zip<br>unzip opencv_contrib.zip<br></code></pre></td></tr></table></figure></li><li><p>安装numpy</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo pip3 install numpy<br></code></pre></td></tr></table></figure></li><li><p>编译OpenCV</p><p>注意，文件夹位置如有改动，第7行要改成自己定义的位置。<code>\</code>代表暂不执行命令，只带遇到<code>..</code>。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd ~/opencv-4.1.0/<br>mkdir build<br>cd build<br>cmake -D CMAKE_BUILD_TYPE=RELEASE \<br> -D CMAKE_INSTALL_PREFIX=/usr/local \<br> -D INSTALL_PYTHON_EXAMPLES=ON \<br> -D OPENCV_EXTRA_MODULES_PATH=~/opencv_contrib-4.1.0/modules \<br> -D BUILD_EXAMPLES=ON ..<br></code></pre></td></tr></table></figure></li><li><p>Build OpenCV</p><p>要确保这一步不出现错误，若出现错误，先解决在执行后面的步骤为宜。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">make -j4<br></code></pre></td></tr></table></figure></li><li><p>安装OpenCV</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo make install &amp;&amp; sudo ldconfig<br></code></pre></td></tr></table></figure><p>若没有错误，即可重启</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo reboot<br></code></pre></td></tr></table></figure></li><li><p>检查</p><p>依次输入以下命令，如给出版本号，则安装成功。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">python3<br><span class="hljs-keyword">import</span> cv2<br>cv2.__version__<br></code></pre></td></tr></table></figure></li></ol><h3 id="debug">debug</h3><p>第一次安装时出现过错误，通过Google解决了，忘了记录下来。总之，出现错误直接复制相应错误然后Google it就可以了。</p><h2 id="摄像头选取">摄像头选取</h2><p>参考<a href="https://www.waveshare.net/study/article-901-1.html">这篇文章</a></p><h3 id="csi摄像头">CSI摄像头</h3><p>摄像头的安装与拆卸一定要在树莓派断电的情况下进行，否则容易烧坏摄像头！</p><h3 id="usb摄像头">USB摄像头</h3><h3 id="网络摄像头">网络摄像头</h3><ul><li><p>手机安装软件<code>IP摄像头</code></p></li><li><p>确保手机和树莓派处于同一局域网，打开<code>IP摄像头</code></p></li><li><p>在浏览器访问给出的IP地址即可看到摄像头画面。</p></li><li><p>给出一个Python调用摄像头的例子</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#!/usr/bin/env python</span><br><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">Waveshare OpenCV Tutorial</span><br><span class="hljs-string">01_IP_Camera.py</span><br><span class="hljs-string">A demo to show whether The OpenCV and IP camera is well installed</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> cv2<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>():</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;OpenCV Version:&#123;&#125;&quot;</span>.<span class="hljs-built_in">format</span>(cv2.__version__))<br>    <span class="hljs-comment"># 0: use CSI camera,1：use USB camera</span><br>    ip_camera_url = <span class="hljs-string">&#x27;http://admin:admin@192.168.1.1:8081&#x27;</span><br>    cap = cv2.VideoCapture(ip_camera_url)<br>    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">not</span> cap.isOpened()):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;can&#x27;t open this camera&quot;</span>)<br><br>    <span class="hljs-keyword">while</span>(<span class="hljs-literal">True</span>):<br>        ret, FrameImage = cap.read()<br>        <span class="hljs-keyword">if</span> ret == <span class="hljs-literal">True</span>:<br>            cv2.imshow(<span class="hljs-string">&#x27;Camera Capture&#x27;</span>,FrameImage)<br>            <span class="hljs-comment">#Press Q to quit</span><br>            <span class="hljs-keyword">if</span> (cv2.waitKey(<span class="hljs-number">1</span>)) == <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;q&#x27;</span>):<br>                cap.release()<br>                <span class="hljs-keyword">break</span><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">break</span><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    <span class="hljs-built_in">print</span>(__doc__)<br>    main()<br>    <span class="hljs-comment"># Release resource</span><br>    cv2.destroyAllWindows()<br></code></pre></td></tr></table></figure></li></ul><h2 id="远程监控">远程监控</h2><p>通过<a href="https://github.com/Motion-Project/motion">motion</a>将树莓派作为摄像头使用，远程监控。参考<a href="https://raspberry-valley.azurewebsites.net/Streaming-Video-with-Motion/">这篇文章</a>和<a href="https://blog.csdn.net/qq_45915007/article/details/107017819">这篇文章</a>。我自己实验了一下，不知是不是因为网络不好，非常卡，延迟能到秒量级，如果在加上内网穿透，会更卡，而且我暂时没有学会Nginx的配置，不知道怎么协调配置我的博客和将要使用的视频流。先弃之，以后再说。</p><h1 id="后续待更新">后续（待更新）</h1>]]></content>
    
    
    <categories>
      
      <category>硬件</category>
      
    </categories>
    
    
    <tags>
      
      <tag>raspberrypi</tag>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linux基础</title>
    <link href="/posts/10011/"/>
    <url>/posts/10011/</url>
    
    <content type="html"><![CDATA[<p>一起来领略Linux的强大与简洁之美。<span id="more"></span></p><h1 id="初始并走进linux">0 初始并走进Linux</h1><h2 id="linux是什么">Linux是什么</h2><p>Linux不是操作系统，而是操作系统内核（kernel），可以理解为“直接驱动硬件的软件”。内核与系统呼叫层（System Call Interface）、各种函数库等构成操作系统，而我们日常生活所使用的软件是建立在系统呼叫层与函数库之上。</p><p><img src="/ass/20211227-Linux-Kernel.png" /></p><h2 id="linux极简史">Linux极简史</h2><ul><li>1969年之前，AT&amp;T Bell Labs、MIT和General Electric同时参与的Multics操作系统研发；</li><li>1969年，Ken Thompson的小型file server system诞生；</li><li>1973年，Unix正式诞生，Ritchie等人以C语言写出第一个正式Unix核心；</li><li>1977年，Unix分支，BSD诞生；</li><li>1979年，System V架构与版权宣告；</li><li>1984年，x86架构的Minix操作系统开始撰写并于两年后诞生；Richard Stallman的GNU计划成立，Free Software Foundation基金会成立；</li><li>1988年，图形界面XFree86计划；</li><li>1991年，芬兰大学生Linus Torvalds发布一则简讯</li><li>1994年，Linux 1.0版发布</li></ul><p><img src="/ass/20211227-Unix_history-simple.svg" /></p><p><strong><a href="https://eylenburg.github.io/os_familytree.htm">Operating Systems: Timeline and Family Tree (so far 850 systems)</a></strong></p><h2 id="linux发行版">Linux发行版</h2><p>GitHub上帮助选择Linux发行版的一个<a href="https://distrochooser.de/">小测试</a>。</p><h4 id="ubuntu安装与配置">Ubuntu安装与配置</h4><p>Ubuntu的界面优雅简洁，中文用户较多，新手容易入门，因此选择安装Ubuntu。这里有安装<a href="http://youtube.com/watch?v=W-RFY4LQ6oE">教程</a>。</p><p>安装完成后，首先进行基本设置，可以看<a href="https://www.bilibili.com/video/BV1qh411U7nR?from=search&amp;seid=2286780838565637536&amp;spm_id_from=333.337.0.0">这里</a>。</p><h1 id="linux常用命令慢慢填坑">1 Linux常用命令（慢慢填坑）</h1><p><a href="https://linux.vbird.org/linux_basic/">鸟哥的Linux私房菜</a>，<a href="https://www.youtube.com/watch?v=ZtqBQ68cfJc&amp;t=10321s">50个常用命令</a></p><h2 id="文件">文件</h2><h3 id="终端命令传输文件">终端命令传输文件</h3><p>参考<a href="https://blog.csdn.net/jackghq/article/details/64124062">这篇文章</a></p><p>从本地上传至服务器</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">scp -P 1080 /path/filename username@serverip:/path/<br></code></pre></td></tr></table></figure><p>从服务器下载文件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">scp -P 1080 username@serverip:/path/filename /var/www/local_dir<br></code></pre></td></tr></table></figure><p>目录上传下载时，在端口后加<code>-r</code>递归即可。</p><h2 id="环境变量">环境变量</h2><p>参考文章<a href="https://blog.csdn.net/White_Idiot/article/details/78253004">1</a>、<a href="https://www.cnblogs.com/jpfss/p/11107080.html">2</a></p><h2 id="软件">软件</h2><h2 id="网络">网络</h2><h2 id="系统">系统</h2><h1 id="linux快捷键">2 Linux快捷键</h1><table><thead><tr class="header"><th>功能</th><th>快捷键</th><th>其他</th></tr></thead><tbody><tr class="odd"><td>置顶</td><td><code>Alt+Space</code>选择置顶或右键标题栏</td><td></td></tr><tr class="even"><td></td><td></td><td></td></tr><tr class="odd"><td></td><td></td><td></td></tr></tbody></table><h1 id="linux常用软件">3 Linux常用软件</h1><p>各处搜集到的，体验过的或正在体验中Linux/Ubuntu系统下的好工具。</p><table><colgroup><col style="width: 25%" /><col style="width: 25%" /><col style="width: 25%" /><col style="width: 25%" /></colgroup><thead><tr class="header"><th>功能</th><th>软件名称</th><th>安装方式</th><th>其他</th></tr></thead><tbody><tr class="odd"><td>截图</td><td>flameshot</td><td><code>sudo apt install flameshot</code></td><td><a href="https://github.com/flameshot-org/flameshot">快捷键设置</a></td></tr><tr class="even"><td>图像编辑</td><td>gimp</td><td><code>sudo apt install gimp</code></td><td>类似于photoshop</td></tr><tr class="odd"><td>轻量级视频剪辑软件</td><td>vidCutter</td><td><a href="https://github.com/ozmartian/vidcutter">参见</a></td><td>此外还有<a href="https://www.olivevideoeditor.org/">Olive</a>，<a href="https://kdenlive.org/en/">Kdenlive</a></td></tr><tr class="even"><td>录屏</td><td>kazam</td><td><code>sudo apt-get install kazam</code></td><td></td></tr><tr class="odd"><td>命令行视频编辑</td><td>ffmpeg</td><td>参考文章<a href="http://note.rpsh.net/posts/2015/04/21/mac-osx-ffmpeg-mp4-gif-convert/">1</a>，<a href="https://blog.csdn.net/lj402159806/article/details/54837637">2</a>，<a href="https://www.cnblogs.com/brt2/p/14006745.html#35-%E6%94%B9%E5%8F%98%E5%88%86%E8%BE%A8%E7%8E%87transsizing">3</a></td><td></td></tr><tr class="even"><td>电子书阅读管理器</td><td>Koodo Reader</td><td><a href="https://github.com/troyeguo/koodo-reader">项目地址</a></td><td></td></tr><tr class="odd"><td>办公软件</td><td>wps</td><td><code>sudo dpkg -i filename.deb</code></td><td><a href="https://blog.csdn.net/u012708193/article/details/83019896">缺失字体</a>安装<code>sudo unzip wps_symbol_fonts.zip -d /usr/share/fonts/wps-office</code></td></tr><tr class="even"><td>AppImage管理工具</td><td>AppImageLauncher</td><td>1<code>sudo add-apt-repository ppa:appimagelauncher-team/stable</code>2<code>sudo apt update</code>3<code>sudo apt install appimagelauncher</code></td><td><a href="https://github.com/TheAssassin/AppImageLauncher">项目地址</a></td></tr><tr class="odd"><td>中文输入法</td><td>fcitx5</td><td><a href="https://plumz.me/archives/12285/">安装教程</a></td><td></td></tr><tr class="even"><td></td><td></td><td></td><td></td></tr><tr class="odd"><td></td><td></td><td></td><td></td></tr></tbody></table><h1 id="遇到的问题">4 遇到的问题</h1><ul><li><p>中文名压缩包解压后乱码（<a href="https://blog.csdn.net/weixin_40009624/article/details/79019907">参考</a>）</p><p>由于zip格式中并没有指定编码格式，Windows下生成的zip文件中的编码是GBK/GB2312等。因此，导致这些zip文件在Linux下解压时出现乱码问题，因为Linux下的默认编码是UTF8。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">unzip -O CP936  xxx.zip<br><span class="hljs-comment"># 其中字符可以是CP936、GBK、GB18030三种中的任一一种</span><br></code></pre></td></tr></table></figure></li><li><p>解压多个zip压缩包</p><p><a href="https://blog.csdn.net/jaye16/article/details/74978408">参考</a>。</p></li></ul>]]></content>
    
    
    <categories>
      
      <category>技术</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hexo+Gitee个人博客搭建折腾全纪录</title>
    <link href="/posts/10010/"/>
    <url>/posts/10010/</url>
    
    <content type="html"><![CDATA[<p>好长时间没有打理博客，近期因为各种原因重新折腾了一番，做了升级与备份，将这一切记录在这，以后方便查找。<span id="more"></span></p><h1 id="一本地环境配置">一、本地环境配置</h1><p>首先需要安装<a href="https://nodejs.org/en/download/releases/">Node.js</a>和<a href="https://git-scm.com/downloads">Git</a>。需要注意的是，Node.js更新速度较快，hexo可能无法完全兼容最新版本的Node.js，所以推荐使用以前的版本，我这里使用12.14.1。</p><p>如果已经安装过新版本，后面遇到问题想退回老版本，下载老版本后直接到<code>C:\Program Files\nodejs</code>目录下覆盖原文件就可以了。</p><p>安装完成后确认安装成功</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">$ git --<span class="hljs-keyword">version</span><br>git <span class="hljs-keyword">version</span> <span class="hljs-number">2.34</span>.<span class="hljs-number">1</span>.windows.<span class="hljs-number">1</span><br>$ <span class="hljs-keyword">node</span> <span class="hljs-title">-v</span><br>v12.<span class="hljs-number">14.1</span><br>$ npm -v<br><span class="hljs-number">6.13</span>.<span class="hljs-number">4</span><br></code></pre></td></tr></table></figure><p>确认无误后安装Hexo，安装时间可能较长，耐心等待，不要有其他操作</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs avrasm">$ npm install hexo-<span class="hljs-keyword">cli</span> -g <span class="hljs-meta"># -g代表全局安装</span><br></code></pre></td></tr></table></figure><p>安装完成后查看版本，确认操作成功</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs avrasm">$ hexo -v<br>INFO  Validating config<br><span class="hljs-symbol">hexo:</span> <span class="hljs-number">5.4</span><span class="hljs-number">.0</span><br>hexo-<span class="hljs-keyword">cli</span>: <span class="hljs-number">4.3</span><span class="hljs-number">.0</span><br><span class="hljs-symbol">os:</span> win32 <span class="hljs-number">10.0</span><span class="hljs-number">.19044</span><br><span class="hljs-symbol">node:</span> <span class="hljs-number">12.14</span><span class="hljs-number">.1</span><br><span class="hljs-symbol">v8:</span> <span class="hljs-number">7.7</span><span class="hljs-number">.299</span><span class="hljs-number">.13</span>-node<span class="hljs-number">.16</span><br><span class="hljs-symbol">uv:</span> <span class="hljs-number">1.33</span><span class="hljs-number">.1</span><br><span class="hljs-symbol">zlib:</span> <span class="hljs-number">1.2</span><span class="hljs-number">.11</span><br><span class="hljs-symbol">brotli:</span> <span class="hljs-number">1.0</span><span class="hljs-number">.7</span><br><span class="hljs-symbol">ares:</span> <span class="hljs-number">1.15</span><span class="hljs-number">.0</span><br><span class="hljs-symbol">modules:</span> <span class="hljs-number">72</span><br><span class="hljs-symbol">nghttp2:</span> <span class="hljs-number">1.40</span><span class="hljs-number">.0</span><br><span class="hljs-symbol">napi:</span> <span class="hljs-number">5</span><br><span class="hljs-symbol">llhttp:</span> <span class="hljs-number">2.0</span><span class="hljs-number">.1</span><br><span class="hljs-symbol">http_parser:</span> <span class="hljs-number">2.8</span><span class="hljs-number">.0</span><br><span class="hljs-symbol">openssl:</span> <span class="hljs-number">1.1</span><span class="hljs-number">.1</span>d<br><span class="hljs-symbol">cldr:</span> <span class="hljs-number">35.1</span><br><span class="hljs-symbol">icu:</span> <span class="hljs-number">64.2</span><br><span class="hljs-symbol">tz:</span> <span class="hljs-number">2019</span>c<br><span class="hljs-symbol">unicode:</span> <span class="hljs-number">12.1</span><br></code></pre></td></tr></table></figure><p>安装成功后，初始化hexo并部署到本地服务器。新建blog文件夹，在空白处右键Git Bash，执行以下操作</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs csharp">hexo <span class="hljs-keyword">init</span> <span class="hljs-meta"># 初始化hexo，生成相关文件</span><br>hexo cl <span class="hljs-meta"># 清空已有的部署文件 hexo clean</span><br>hexo g <span class="hljs-meta"># 生成网站文件 hexo generate</span><br>hexo s <span class="hljs-meta"># 启动本地服务器 hexo server</span><br></code></pre></td></tr></table></figure><p>在浏览器输入<code>localhost:4000</code>，就可以看到hexo网页了，默认主题是landscape，后续我们在修改它。本地配置基本完成，现在来配置云端。</p><h1 id="二gitee配置">二、Gitee配置</h1><h2 id="新建仓库及分支">新建仓库及分支</h2><p>注册登录<a href="https://gitee.com/">Gitee</a>，新建仓库，输入自己的仓库名称，路径会同步生成一样的名字，不用去改动它，其他保持默认即可。仓库建好之后会自动生成master分支，然后我们顺便再新建一个backup分支，待会用于备份源文件，即：</p><ul><li>master：hexo生成的静态网页</li><li>backup：博客源文件</li></ul><h2 id="添加ssh公钥">添加SSH公钥</h2><p>首先在Git Bash中生成公钥，生成时会提示输入文件名、用户名和密码，默认文件名是<code>id_rsa</code>和<code>id_rsa.pub</code>，建议修改一下，方便管理，后文会提到相关事项。用户名和密码一般不用添加，回车即可</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">ssh-keygen -t rsa -C <span class="hljs-string">&quot;xxxxx@gmail.com&quot;</span> <span class="hljs-comment"># 填写自己的邮箱</span><br></code></pre></td></tr></table></figure><p>生成的公钥在<code>~\.ssh\id_rsa.pub</code>文件中，将其复制。在Gitee首页，进入右上角头像里的设置页面，进入安全设置中的SSH公钥，添加刚才复制的公钥。</p><h2 id="开启gitee-pages">开启Gitee Pages</h2><p>在刚才创建的仓库首页，进入上边菜单栏服务中的Gitee Pages（现在开通要实名认证，我记得几年前我开通的时候还不要的）。开通之后应该能在个人主页头像下方看到一个网址，这就是你的博客了，不过我们还没有将内容推送到这里，现在是看不到任何东西的。</p><h1 id="三本地部署">三、本地部署</h1><p>在blog文件夹下找到<code>_config.yml</code>文件，用记事本打开，找到对应代码作如下修改</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># URL</span><br><span class="hljs-comment">## Set your site url here. For example, if you use GitHub Page, set url as &#x27;https://username.github.io/project&#x27;</span><br><span class="hljs-attr">url:</span> <span class="hljs-string">https://xxxxxx.gitee.io</span> <span class="hljs-comment"># 你的网站的名字</span><br><span class="hljs-string">......</span><br><span class="hljs-attr">deploy:</span><br>  <span class="hljs-attr">type:</span> <span class="hljs-string">&#x27;git&#x27;</span> <span class="hljs-comment"># 不保留&#x27;&#x27;貌似也没事</span><br>  <span class="hljs-attr">repo:</span> <span class="hljs-string">git@gitee.com:xxxxx/xxxxx.git</span> <span class="hljs-comment"># 你的仓库地址（非地址栏地址，而是克隆地址）</span><br>  <span class="hljs-attr">branch:</span> <span class="hljs-string">master</span> <span class="hljs-comment"># 确保这里是master分支，因为我们hexo d -g都是默认到这个分支</span><br>  <span class="hljs-attr">message:</span> <span class="hljs-string">&#x27;web updata: <span class="hljs-template-variable">&#123;&#123;now(&quot;YYYY-MM-DD HH/mm/ss&quot;)&#125;&#125;</span>&#x27;</span> <span class="hljs-comment"># 自定义提交消息，这里是设置更新时间</span><br></code></pre></td></tr></table></figure><p>在Gitee仓库页面下，点击克隆/下载按钮SSH选项下的复制，在blog文件夹右键Git Bash下执行以下命令，这里用SSH能避免用https时需要输入用户名和密码的麻烦</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">git <span class="hljs-keyword">clone</span> <span class="hljs-title">git</span>@gitee.com:xxxxx/xxxxx.git <span class="hljs-comment"># 替换成你的仓库克隆地址</span><br></code></pre></td></tr></table></figure><p>执行完成后，会产生一个以仓库名命名的文件夹，将其中的<code>.git</code>文件夹复制到blog目录下，然后删除原仓库文件夹。</p><p>我们顺便将默认分支改为backup，因为我们博客的部署（hexo d）是默认到master分支的，而我们执行克隆（git clone）时，都是克隆的默认分支，两者不会产生冲突，如果不改的话，后续较为麻烦，不如索性在这里就改好。</p><p>然后我们就可以hexo三连了</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs verilog">hexo cl # 清空已有的部署文件，不一定每次都要执行 hexo clean<br>hexo g # 生成网站文件 hexo <span class="hljs-keyword">generate</span><br>hexo d # 部署到gitee hexo server<br></code></pre></td></tr></table></figure><p>可以合并命令</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">hexo</span> cl &amp;&amp; hexo d -g <span class="hljs-comment"># hexo cl &amp;&amp; hexo g -d 也行</span><br></code></pre></td></tr></table></figure><p>再次打开你的博客网站应该就可以看到hexo默认主题landscape了，待会换个好看点的主题。先来看一下备份与恢复。</p><h1 id="三备份与恢复">三、备份与恢复</h1><h2 id="推送到gitee">推送到Gitee</h2><p>假设你最开始搭建博客的电脑为A，那你需要在A电脑上的blog文件夹下执行以下，将本地博客与远程仓库关联</p><p>如果已经建立https的关联，可以通过这条命令断开关联（选用）</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">git remote rm origin</span><br></code></pre></td></tr></table></figure><p>然后建立关联</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs llvm">git remote <span class="hljs-keyword">add</span> origin git<span class="hljs-title">@gitee.com</span>:xxxxx/xxxxx.git<br></code></pre></td></tr></table></figure><p>查看<code>.gitignore</code>，通过文件名就知道，这个文件是用来忽略某些文件的推送的，通常是已经配置好的，一般如下</p><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs x86asm"><span class="hljs-meta">.DS_Store</span><br>Thumbs<span class="hljs-number">.</span><span class="hljs-built_in">db</span><br><span class="hljs-built_in">db</span><span class="hljs-number">.</span>json<br>*.log<br>node_modules/<br><span class="hljs-meta">public</span>/<br><span class="hljs-meta">.deploy</span>*/<br></code></pre></td></tr></table></figure><p>然后执行如下<code>git</code>三连</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">git add . # 将文件添加到本地暂存区<br>git commit -m &#x27;hexo backup fluid 1.8.13&#x27; # 将暂存区的内容提交到本地仓库 &#x27;&#x27;内自定义<br>git push origin backup # 将内容推送到远程仓库backup分支<br></code></pre></td></tr></table></figure><p>首次<code>git push</code>时，要加上<code>-u</code>参数，让本地分支和远程分支建立关联，形成一个管道，之后 <code>git push</code>可以直接沿着管道到达关联的分支，无需在加<code>-u</code>参数了。</p><p>这样A电脑上的博客源文件就上传到Gitee的backup分支中了。</p><h2 id="克隆拉取到本地">克隆/拉取到本地</h2><p>如果你换了电脑B或者不小心把A电脑本地博客目录删除了，只要将远程仓库的backup分支克隆下来就好了</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">git <span class="hljs-keyword">clone</span> <span class="hljs-title">git</span>@gitee.com:xxxxx/xxxxx.git<br></code></pre></td></tr></table></figure><p>因为我们设置了默认分支是backup所以这条命令会直接克隆backup分支，这样在执行正常的博客配置就可以继续使用了。</p><p>以后如果你在B电脑上编辑了一些文档，那么你需要执行上面给出的<code>git add/commit/push</code>命令，将远程仓库与B电脑保持一致，然后当你想在A电脑上编辑文档时，就需要先<code>git pull</code>一下，以确保A电脑与远程仓库保持一致，如果不<code>git push</code>，当以后<code>git push</code>时，会产生错误警告。<code>git pull</code>命令如下</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs scss">git pull git<span class="hljs-keyword">@gitee</span>.<span class="hljs-attribute">com</span>:xxxxx/xxxxx.git<br></code></pre></td></tr></table></figure><p>切记，更换电脑编辑时，最好每次都要先<code>git push</code>（A电脑）<code>git pull（</code>B电脑）一下。</p><h1 id="四多个ssh公钥配置">四、多个SSH公钥配置</h1><p>这一部分主要参考了<a href="https://showteeth.tech/posts/51573.html">这篇文章</a>。</p><p>当我们同时需要用ssh连接github、gitee和树莓派时，就需要对私钥、公钥进行管理。而且当你用多台电脑进行操作时，每台电脑都需要一个公钥，也要对网站进行相应的配置。</p><h2 id="生成ssh-key">生成SSH key</h2><p>首先，延续前文提到的概念，你的博客首次搭建在A电脑上，你在A电脑上已经按照<a href="#添加ssh公钥">前面</a>说的生成了SSH公钥，文件名最好已经修改了，没有的话可以删掉然后重新操作一遍。以下在A电脑上操作</p><p>有两种办法生成自定义文件名的公钥，第一种是先输入命令，然后中间提示修改文件名时修改</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs excel">ssh-keygen -<span class="hljs-built_in">t</span> rsa -C <span class="hljs-string">&quot;xxxxx@gmail.com&quot;</span><br></code></pre></td></tr></table></figure><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gradle">Generating <span class="hljs-keyword">public</span>/<span class="hljs-keyword">private</span> rsa key pair.<br>Enter <span class="hljs-keyword">file</span> in which to save the key (<span class="hljs-regexp">/home/</span>zhao<span class="hljs-regexp">/.ssh/i</span>d_rsa): <span class="hljs-regexp">/home/</span>zhao<span class="hljs-regexp">/.ssh/i</span>d_rsa_gitee<br></code></pre></td></tr></table></figure><p>还有一种是直接用命令自定义文件名</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">ssh-keygen -t rsa -C <span class="hljs-string">&quot;YOUR_EMAIL@YOUREMAIL.COM&quot;</span> -f ~<span class="hljs-regexp">/.ssh/i</span>d_rsa_gitee<br></code></pre></td></tr></table></figure><p>总之，这都会在<code>~/.ssh/</code>目录下生成私钥<code>id_rsa_gitee</code>和公钥<code>id_rsa_gitee.pub</code>。同样的步骤可以生成多个私钥和公钥，比如<code>id_rsa_github</code>和<code>id_rsa_github.pub</code>。不要忘了在对应的网站添加SSH公钥，公钥的标题要确保能让自己记起来是A这台电脑或当前这个用户。</p><h2 id="添加配置文件">添加配置文件</h2><p>在<code>~/.ssh/</code>目录下新建<code>config</code>文件，添加以下内容（树莓派暂时不确定配置的对不对）</p><figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs vala"><span class="hljs-meta"># gitee</span><br>Host gitee.com # Host就是git仓库的域名或者IP<br>HostName gitee.com<br>PreferredAuthentications publickey<br>IdentityFile ~/.ssh/id_rsa_gitee<br>User git # User后面的值为访问的git ssh地址的@之前的部分<br><br><span class="hljs-meta">#github</span><br><span class="hljs-meta">#Host github.com</span><br><span class="hljs-meta">#HostName github.com</span><br><span class="hljs-meta">#PreferredAuthentications publickey</span><br><span class="hljs-meta">#IdentityFile ~/.ssh/id_rsa_github</span><br><span class="hljs-meta">#User git</span><br><br><span class="hljs-meta">#raspberrypi</span><br><span class="hljs-meta">#Host 192.168.1.200</span><br><span class="hljs-meta">#HostName 192.168.1.200</span><br><span class="hljs-meta">#PreferredAuthentications publickey</span><br><span class="hljs-meta">#IdentityFile ~/.ssh/id_rsa_pi</span><br><span class="hljs-meta">#User pi</span><br></code></pre></td></tr></table></figure><p>然后测试一下配置</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">ssh -T <span class="hljs-symbol">git@</span>github.com<br></code></pre></td></tr></table></figure><p>看到有<code>You've successfully authenticated</code>这句话就代表成功了，如果报错试一下这条命令</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">chmod <span class="hljs-number">600</span> ~<span class="hljs-regexp">/.ssh/</span>config<br></code></pre></td></tr></table></figure><p>现在，A电脑上就配置完成了。对于B电脑也是同样的操作，不过要注意，B电脑也要在网站上添加SSH公钥。</p><h1 id="五主题配置">五、主题配置</h1><h2 id="fluid基础配置">fluid基础配置</h2><p><a href="https://hexo.fluid-dev.com/docs/start/#%E4%B8%BB%E9%A2%98%E7%AE%80%E4%BB%8B">fluid</a>主题简洁不失美观，个人非常喜欢。</p><p>Hexo5.0.0版本以上，在blog文件夹下执行命令</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">npm</span> install --save hexo-theme-fluid # 我安装的版本是<span class="hljs-number">1</span>.<span class="hljs-number">8</span>.<span class="hljs-number">13</span><br></code></pre></td></tr></table></figure><p>然后修改刚才的<code>_config.yml</code>文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">theme:</span> <span class="hljs-string">fluid</span>  <span class="hljs-comment"># 指定主题</span><br><br><span class="hljs-attr">language:</span> <span class="hljs-string">zh-CN</span>  <span class="hljs-comment"># 指定语言，会影响主题显示的语言，按需修改</span><br></code></pre></td></tr></table></figure><p>其他配置在官方文档查看即可。我这里将我自己做出的修改列出。</p><h2 id="自定义修改">自定义修改</h2><h3 id="特效">特效</h3><p>对于樱花飘落和雪花飘落二选一，在<code>\blog\themes\fluid\source\js</code>文件夹下新建比如skura.js文件，将对应代码复制到其中并保存。在blog文件夹下的<code>_config.fluid.yml</code>文件中做如下修改</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">custom_js:</span> <span class="hljs-string">/js/sakura.js</span><br></code></pre></td></tr></table></figure><p>刷新一下网页，或者<code>Ctrl+C</code>暂停本地服务，然后<code>hexo s</code>重启本地服务就可以看到特效了。</p><h4 id="樱花飘落">樱花飘落</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 樱花飘落bynote.cn</span><br><span class="hljs-keyword">var</span> stop, staticx; <span class="hljs-keyword">var</span> img = <span class="hljs-keyword">new</span> Image(); img.src = <span class="hljs-string">&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUgAAAEwCAYAAADVZeifAAAACXBIWXMAAACYAAAAmAGiyIKYAAAHG2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBSaWdodHM9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9yaWdodHMvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtcFJpZ2h0czpNYXJrZWQ9IkZhbHNlIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6NDFDMjQxQjYyNjIwNjgxMTgwODNEMjE2MDAzOTU1NDQiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDozNDVjOWViOC04NDc4LTFkNDctOGRjMi0yZDkyOGNhYTYxZWQiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6YjAzN2ZiMGItNTU5Mi0xYjRkLWJjZGQtOWU4NGExMDJiMGM2IiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDE4LTA1LTA5VDE0OjQ5OjM3KzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOC0wNS0wOVQxNDo1MToyNSswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOC0wNS0wOVQxNDo1MToyNSswODowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjEyMjVlZWE3LTEyY2QtMTY0NC04ZDAzLWFjOTE2ZTAxZDQ1YyIgc3RSZWY6ZG9jdW1lbnRJRD0idXVpZDoxRDIwNUFGNjZCRDlFNTExOUM5REMwMzg2RjlEQjFGNyIvPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDphYmMzNjIzMy1hOWNkLWNiNDQtODViYi0zZTgyMjEwYmIxMjYiIHN0RXZ0OndoZW49IjIwMTgtMDUtMDlUMTQ6NTE6MjUrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE4IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YjAzN2ZiMGItNTU5Mi0xYjRkLWJjZGQtOWU4NGExMDJiMGM2IiBzdEV2dDp3aGVuPSIyMDE4LTA1LTA5VDE0OjUxOjI1KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2Vx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&quot;</span>; <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Sakura</span>(<span class="hljs-params">x, y, s, r, fn</span>) </span>&#123; <span class="hljs-built_in">this</span>.x = x; <span class="hljs-built_in">this</span>.y = y; <span class="hljs-built_in">this</span>.s = s; <span class="hljs-built_in">this</span>.r = r; <span class="hljs-built_in">this</span>.fn = fn; &#125;<br>Sakura.prototype.draw = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">cxt</span>) </span>&#123;<br>    cxt.save(); <span class="hljs-keyword">var</span> xc = <span class="hljs-number">40</span> * <span class="hljs-built_in">this</span>.s / <span class="hljs-number">4</span>; cxt.translate(<span class="hljs-built_in">this</span>.x, <span class="hljs-built_in">this</span>.y); cxt.rotate(<span class="hljs-built_in">this</span>.r); cxt.drawImage(img, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">40</span> * <span class="hljs-built_in">this</span>.s, <span class="hljs-number">40</span> * <span class="hljs-built_in">this</span>.s)<br>    cxt.restore();<br>&#125;<br>Sakura.prototype.update = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123; <span class="hljs-built_in">this</span>.x = <span class="hljs-built_in">this</span>.fn.x(<span class="hljs-built_in">this</span>.x, <span class="hljs-built_in">this</span>.y); <span class="hljs-built_in">this</span>.y = <span class="hljs-built_in">this</span>.fn.y(<span class="hljs-built_in">this</span>.y, <span class="hljs-built_in">this</span>.y); <span class="hljs-built_in">this</span>.r = <span class="hljs-built_in">this</span>.fn.r(<span class="hljs-built_in">this</span>.r); <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.x &gt; <span class="hljs-built_in">window</span>.innerWidth || <span class="hljs-built_in">this</span>.x &lt; <span class="hljs-number">0</span> || <span class="hljs-built_in">this</span>.y &gt; <span class="hljs-built_in">window</span>.innerHeight || <span class="hljs-built_in">this</span>.y &lt; <span class="hljs-number">0</span>) &#123; <span class="hljs-built_in">this</span>.r = getRandom(<span class="hljs-string">&#x27;fnr&#x27;</span>); <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Math</span>.random() &gt; <span class="hljs-number">0.4</span>) &#123; <span class="hljs-built_in">this</span>.x = getRandom(<span class="hljs-string">&#x27;x&#x27;</span>); <span class="hljs-built_in">this</span>.y = <span class="hljs-number">0</span>; <span class="hljs-built_in">this</span>.s = getRandom(<span class="hljs-string">&#x27;s&#x27;</span>); <span class="hljs-built_in">this</span>.r = getRandom(<span class="hljs-string">&#x27;r&#x27;</span>); &#125; <span class="hljs-keyword">else</span> &#123; <span class="hljs-built_in">this</span>.x = <span class="hljs-built_in">window</span>.innerWidth; <span class="hljs-built_in">this</span>.y = getRandom(<span class="hljs-string">&#x27;y&#x27;</span>); <span class="hljs-built_in">this</span>.s = getRandom(<span class="hljs-string">&#x27;s&#x27;</span>); <span class="hljs-built_in">this</span>.r = getRandom(<span class="hljs-string">&#x27;r&#x27;</span>); &#125; &#125; &#125;<br>SakuraList = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123; <span class="hljs-built_in">this</span>.list = []; &#125;<br>SakuraList.prototype.push = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">sakura</span>) </span>&#123; <span class="hljs-built_in">this</span>.list.push(sakura); &#125;<br>SakuraList.prototype.update = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123; <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, len = <span class="hljs-built_in">this</span>.list.length; i &lt; len; i++) &#123; <span class="hljs-built_in">this</span>.list[i].update(); &#125; &#125;<br>SakuraList.prototype.draw = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">cxt</span>) </span>&#123; <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, len = <span class="hljs-built_in">this</span>.list.length; i &lt; len; i++) &#123; <span class="hljs-built_in">this</span>.list[i].draw(cxt); &#125; &#125;<br>SakuraList.prototype.get = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">i</span>) </span>&#123; <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.list[i]; &#125;<br>SakuraList.prototype.size = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123; <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.list.length; &#125;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getRandom</span>(<span class="hljs-params">option</span>) </span>&#123;<br>    <span class="hljs-keyword">var</span> ret, random; <span class="hljs-keyword">switch</span> (option) &#123;<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;x&#x27;</span>: ret = <span class="hljs-built_in">Math</span>.random() * <span class="hljs-built_in">window</span>.innerWidth; <span class="hljs-keyword">break</span>; <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;y&#x27;</span>: ret = <span class="hljs-built_in">Math</span>.random() * <span class="hljs-built_in">window</span>.innerHeight; <span class="hljs-keyword">break</span>; <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;s&#x27;</span>: ret = <span class="hljs-built_in">Math</span>.random(); <span class="hljs-keyword">break</span>; <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;r&#x27;</span>: ret = <span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">6</span>; <span class="hljs-keyword">break</span>; <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;fnx&#x27;</span>: random = -<span class="hljs-number">0.5</span> + <span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">1</span>; ret = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">x, y</span>) </span>&#123; <span class="hljs-keyword">return</span> x + <span class="hljs-number">0.5</span> * random - <span class="hljs-number">1.7</span>; &#125;; <span class="hljs-keyword">break</span>; <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;fny&#x27;</span>: random = <span class="hljs-number">1.5</span> + <span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">0.7</span><br>            ret = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">x, y</span>) </span>&#123; <span class="hljs-keyword">return</span> y + random; &#125;; <span class="hljs-keyword">break</span>; <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;fnr&#x27;</span>: random = <span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">0.03</span>; ret = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">r</span>) </span>&#123; <span class="hljs-keyword">return</span> r + random; &#125;; <span class="hljs-keyword">break</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> ret;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">startSakura</span>(<span class="hljs-params"></span>) </span>&#123;<br>    requestAnimationFrame = <span class="hljs-built_in">window</span>.requestAnimationFrame || <span class="hljs-built_in">window</span>.mozRequestAnimationFrame || <span class="hljs-built_in">window</span>.webkitRequestAnimationFrame || <span class="hljs-built_in">window</span>.msRequestAnimationFrame || <span class="hljs-built_in">window</span>.oRequestAnimationFrame; <span class="hljs-keyword">var</span> canvas = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&#x27;canvas&#x27;</span>), cxt; staticx = <span class="hljs-literal">true</span>; canvas.height = <span class="hljs-built_in">window</span>.innerHeight; canvas.width = <span class="hljs-built_in">window</span>.innerWidth; canvas.setAttribute(<span class="hljs-string">&#x27;style&#x27;</span>, <span class="hljs-string">&#x27;position: fixed;left: 0;top: 0;pointer-events: none;&#x27;</span>); canvas.setAttribute(<span class="hljs-string">&#x27;id&#x27;</span>, <span class="hljs-string">&#x27;canvas_sakura&#x27;</span>); <span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">&#x27;body&#x27;</span>)[<span class="hljs-number">0</span>].appendChild(canvas); cxt = canvas.getContext(<span class="hljs-string">&#x27;2d&#x27;</span>); <span class="hljs-keyword">var</span> sakuraList = <span class="hljs-keyword">new</span> SakuraList(); <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">50</span>; i++) &#123; <span class="hljs-keyword">var</span> sakura, randomX, randomY, randomS, randomR, randomFnx, randomFny; randomX = getRandom(<span class="hljs-string">&#x27;x&#x27;</span>); randomY = getRandom(<span class="hljs-string">&#x27;y&#x27;</span>); randomR = getRandom(<span class="hljs-string">&#x27;r&#x27;</span>); randomS = getRandom(<span class="hljs-string">&#x27;s&#x27;</span>); randomFnx = getRandom(<span class="hljs-string">&#x27;fnx&#x27;</span>); randomFny = getRandom(<span class="hljs-string">&#x27;fny&#x27;</span>); randomFnR = getRandom(<span class="hljs-string">&#x27;fnr&#x27;</span>); sakura = <span class="hljs-keyword">new</span> Sakura(randomX, randomY, randomS, randomR, &#123; <span class="hljs-attr">x</span>: randomFnx, <span class="hljs-attr">y</span>: randomFny, <span class="hljs-attr">r</span>: randomFnR &#125;); sakura.draw(cxt); sakuraList.push(sakura); &#125;<br>    stop = requestAnimationFrame(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123; cxt.clearRect(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, canvas.width, canvas.height); sakuraList.update(); sakuraList.draw(cxt); stop = requestAnimationFrame(<span class="hljs-built_in">arguments</span>.callee); &#125;)<br>&#125;<br><span class="hljs-built_in">window</span>.onresize = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123; <span class="hljs-keyword">var</span> canvasSnow = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;canvas_snow&#x27;</span>); &#125;<br>img.onload = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123; startSakura(); &#125;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">stopp</span>(<span class="hljs-params"></span>) </span>&#123; <span class="hljs-keyword">if</span> (staticx) &#123; <span class="hljs-keyword">var</span> child = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;canvas_sakura&quot;</span>); child.parentNode.removeChild(child); <span class="hljs-built_in">window</span>.cancelAnimationFrame(stop); staticx = <span class="hljs-literal">false</span>; &#125; <span class="hljs-keyword">else</span> &#123; startSakura(); &#125; &#125;<br></code></pre></td></tr></table></figure><h4 id="雪花飘落">雪花飘落</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">/*样式二*/</span><br><span class="hljs-comment">/* 控制下雪 */</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">snowFall</span>(<span class="hljs-params">snow</span>) </span>&#123;<br>    <span class="hljs-comment">/* 可配置属性 */</span><br>    snow = snow || &#123;&#125;;<br>    <span class="hljs-built_in">this</span>.maxFlake = snow.maxFlake || <span class="hljs-number">200</span>;   <span class="hljs-comment">/* 最多片数 */</span><br>    <span class="hljs-built_in">this</span>.flakeSize = snow.flakeSize || <span class="hljs-number">10</span>;  <span class="hljs-comment">/* 雪花形状 */</span><br>    <span class="hljs-built_in">this</span>.fallSpeed = snow.fallSpeed || <span class="hljs-number">1</span>;   <span class="hljs-comment">/* 坠落速度 */</span><br>&#125;<br><span class="hljs-comment">/* 兼容写法 */</span><br>requestAnimationFrame = <span class="hljs-built_in">window</span>.requestAnimationFrame ||<br>    <span class="hljs-built_in">window</span>.mozRequestAnimationFrame ||<br>    <span class="hljs-built_in">window</span>.webkitRequestAnimationFrame ||<br>    <span class="hljs-built_in">window</span>.msRequestAnimationFrame ||<br>    <span class="hljs-built_in">window</span>.oRequestAnimationFrame ||<br>    <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) </span>&#123; <span class="hljs-built_in">setTimeout</span>(callback, <span class="hljs-number">1000</span> / <span class="hljs-number">60</span>); &#125;;<br><br>cancelAnimationFrame = <span class="hljs-built_in">window</span>.cancelAnimationFrame ||<br>    <span class="hljs-built_in">window</span>.mozCancelAnimationFrame ||<br>    <span class="hljs-built_in">window</span>.webkitCancelAnimationFrame ||<br>    <span class="hljs-built_in">window</span>.msCancelAnimationFrame ||<br>    <span class="hljs-built_in">window</span>.oCancelAnimationFrame;<br><span class="hljs-comment">/* 开始下雪 */</span><br>snowFall.prototype.start = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;<br>    <span class="hljs-comment">/* 创建画布 */</span><br>    snowCanvas.apply(<span class="hljs-built_in">this</span>);<br>    <span class="hljs-comment">/* 创建雪花形状 */</span><br>    createFlakes.apply(<span class="hljs-built_in">this</span>);<br>    <span class="hljs-comment">/* 画雪 */</span><br>    drawSnow.apply(<span class="hljs-built_in">this</span>)<br>&#125;<br><span class="hljs-comment">/* 创建画布 */</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">snowCanvas</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-comment">/* 添加Dom结点 */</span><br>    <span class="hljs-keyword">var</span> snowcanvas = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&quot;canvas&quot;</span>);<br>    snowcanvas.id = <span class="hljs-string">&quot;snowfall&quot;</span>;<br>    snowcanvas.width = <span class="hljs-built_in">window</span>.innerWidth;<br>    snowcanvas.height = <span class="hljs-built_in">document</span>.body.clientHeight;<br>    snowcanvas.setAttribute(<span class="hljs-string">&quot;style&quot;</span>, <span class="hljs-string">&quot;position:absolute; top: 0; left: 0; z-index: 1; pointer-events: none;&quot;</span>);<br>    <span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">&quot;body&quot;</span>)[<span class="hljs-number">0</span>].appendChild(snowcanvas);<br>    <span class="hljs-built_in">this</span>.canvas = snowcanvas;<br>    <span class="hljs-built_in">this</span>.ctx = snowcanvas.getContext(<span class="hljs-string">&quot;2d&quot;</span>);<br>    <span class="hljs-comment">/* 窗口大小改变的处理 */</span><br>    <span class="hljs-built_in">window</span>.onresize = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>        snowcanvas.width = <span class="hljs-built_in">window</span>.innerWidth;<br>        <span class="hljs-comment">/* snowcanvas.height = window.innerHeight */</span><br>    &#125;<br>&#125;<br><span class="hljs-comment">/* 雪运动对象 */</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">flakeMove</span>(<span class="hljs-params">canvasWidth, canvasHeight, flakeSize, fallSpeed</span>) </span>&#123;<br>    <span class="hljs-built_in">this</span>.x = <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * canvasWidth);   <span class="hljs-comment">/* x坐标 */</span><br>    <span class="hljs-built_in">this</span>.y = <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * canvasHeight);  <span class="hljs-comment">/* y坐标 */</span><br>    <span class="hljs-built_in">this</span>.size = <span class="hljs-built_in">Math</span>.random() * flakeSize + <span class="hljs-number">2</span>;          <span class="hljs-comment">/* 形状 */</span><br>    <span class="hljs-built_in">this</span>.maxSize = flakeSize;                           <span class="hljs-comment">/* 最大形状 */</span><br>    <span class="hljs-built_in">this</span>.speed = <span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">1</span> + fallSpeed;         <span class="hljs-comment">/* 坠落速度 */</span><br>    <span class="hljs-built_in">this</span>.fallSpeed = fallSpeed;                         <span class="hljs-comment">/* 坠落速度 */</span><br>    <span class="hljs-built_in">this</span>.velY = <span class="hljs-built_in">this</span>.speed;                             <span class="hljs-comment">/* Y方向速度 */</span><br>    <span class="hljs-built_in">this</span>.velX = <span class="hljs-number">0</span>;                                      <span class="hljs-comment">/* X方向速度 */</span><br>    <span class="hljs-built_in">this</span>.stepSize = <span class="hljs-built_in">Math</span>.random() / <span class="hljs-number">30</span>;                 <span class="hljs-comment">/* 步长 */</span><br>    <span class="hljs-built_in">this</span>.step = <span class="hljs-number">0</span>                                       <span class="hljs-comment">/* 步数 */</span><br>&#125;<br>flakeMove.prototype.update = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-keyword">var</span> x = <span class="hljs-built_in">this</span>.x,<br>        y = <span class="hljs-built_in">this</span>.y;<br>    <span class="hljs-comment">/* 左右摆动(余弦) */</span><br>    <span class="hljs-built_in">this</span>.velX *= <span class="hljs-number">0.98</span>;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.velY &lt;= <span class="hljs-built_in">this</span>.speed) &#123;<br>        <span class="hljs-built_in">this</span>.velY = <span class="hljs-built_in">this</span>.speed<br>    &#125;<br>    <span class="hljs-built_in">this</span>.velX += <span class="hljs-built_in">Math</span>.cos(<span class="hljs-built_in">this</span>.step += <span class="hljs-number">.05</span>) * <span class="hljs-built_in">this</span>.stepSize;<br><br>    <span class="hljs-built_in">this</span>.y += <span class="hljs-built_in">this</span>.velY;<br>    <span class="hljs-built_in">this</span>.x += <span class="hljs-built_in">this</span>.velX;<br>    <span class="hljs-comment">/* 飞出边界的处理 */</span><br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.x &gt;= canvas.width || <span class="hljs-built_in">this</span>.x &lt;= <span class="hljs-number">0</span> || <span class="hljs-built_in">this</span>.y &gt;= canvas.height || <span class="hljs-built_in">this</span>.y &lt;= <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-built_in">this</span>.reset(canvas.width, canvas.height)<br>    &#125;<br>&#125;;<br><span class="hljs-comment">/* 飞出边界-放置最顶端继续坠落 */</span><br>flakeMove.prototype.reset = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">width, height</span>) </span>&#123;<br>    <span class="hljs-built_in">this</span>.x = <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * width);<br>    <span class="hljs-built_in">this</span>.y = <span class="hljs-number">0</span>;<br>    <span class="hljs-built_in">this</span>.size = <span class="hljs-built_in">Math</span>.random() * <span class="hljs-built_in">this</span>.maxSize + <span class="hljs-number">2</span>;<br>    <span class="hljs-built_in">this</span>.speed = <span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">1</span> + <span class="hljs-built_in">this</span>.fallSpeed;<br>    <span class="hljs-built_in">this</span>.velY = <span class="hljs-built_in">this</span>.speed;<br>    <span class="hljs-built_in">this</span>.velX = <span class="hljs-number">0</span>;<br>&#125;;<br><span class="hljs-comment">// 渲染雪花-随机形状（此处可修改雪花颜色！！！）</span><br>flakeMove.prototype.render = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ctx</span>) </span>&#123;<br>    <span class="hljs-keyword">var</span> snowFlake = ctx.createRadialGradient(<span class="hljs-built_in">this</span>.x, <span class="hljs-built_in">this</span>.y, <span class="hljs-number">0</span>, <span class="hljs-built_in">this</span>.x, <span class="hljs-built_in">this</span>.y, <span class="hljs-built_in">this</span>.size);<br>    snowFlake.addColorStop(<span class="hljs-number">0</span>, <span class="hljs-string">&quot;rgba(255, 255, 255, 0.9)&quot;</span>);  <span class="hljs-comment">/* 此处是雪花颜色，默认是白色 */</span><br>    snowFlake.addColorStop(<span class="hljs-number">.5</span>, <span class="hljs-string">&quot;rgba(255, 255, 255, 0.5)&quot;</span>); <span class="hljs-comment">/* 若要改为其他颜色，请自行查 */</span><br>    snowFlake.addColorStop(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;rgba(255, 255, 255, 0)&quot;</span>);    <span class="hljs-comment">/* 找16进制的RGB 颜色代码。 */</span><br>    ctx.save();<br>    ctx.fillStyle = snowFlake;<br>    ctx.beginPath();<br>    ctx.arc(<span class="hljs-built_in">this</span>.x, <span class="hljs-built_in">this</span>.y, <span class="hljs-built_in">this</span>.size, <span class="hljs-number">0</span>, <span class="hljs-built_in">Math</span>.PI * <span class="hljs-number">2</span>);<br>    ctx.fill();<br>    ctx.restore();<br>&#125;;<br><span class="hljs-comment">/* 创建雪花-定义形状 */</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createFlakes</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-keyword">var</span> maxFlake = <span class="hljs-built_in">this</span>.maxFlake,<br>        flakes = <span class="hljs-built_in">this</span>.flakes = [],<br>        canvas = <span class="hljs-built_in">this</span>.canvas;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; maxFlake; i++) &#123;<br>        flakes.push(<span class="hljs-keyword">new</span> flakeMove(canvas.width, canvas.height, <span class="hljs-built_in">this</span>.flakeSize, <span class="hljs-built_in">this</span>.fallSpeed))<br>    &#125;<br>&#125;<br><span class="hljs-comment">/* 画雪 */</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">drawSnow</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-keyword">var</span> maxFlake = <span class="hljs-built_in">this</span>.maxFlake,<br>        flakes = <span class="hljs-built_in">this</span>.flakes;<br>    ctx = <span class="hljs-built_in">this</span>.ctx, canvas = <span class="hljs-built_in">this</span>.canvas, that = <span class="hljs-built_in">this</span>;<br>    <span class="hljs-comment">/* 清空雪花 */</span><br>    ctx.clearRect(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, canvas.width, canvas.height);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> e = <span class="hljs-number">0</span>; e &lt; maxFlake; e++) &#123;<br>        flakes[e].update();<br>        flakes[e].render(ctx);<br>    &#125;<br>    <span class="hljs-comment">/*  一帧一帧的画 */</span><br>    <span class="hljs-built_in">this</span>.loop = requestAnimationFrame(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>        drawSnow.apply(that);<br>    &#125;);<br>&#125;<br><span class="hljs-comment">/* 调用及控制方法 */</span><br><span class="hljs-keyword">var</span> snow = <span class="hljs-keyword">new</span> snowFall(&#123;<span class="hljs-attr">maxFlake</span>:<span class="hljs-number">60</span>&#125;);<br>snow.start();<br></code></pre></td></tr></table></figure><h4 id="鼠标特效">鼠标特效</h4><p>在<code>E:\blog\themes\fluid\layout\_partial\plugins</code>新建<code>mouse-click.ejs</code>文件，将下面代码复制保存。然后在<code>E:\blog\themes\fluid\layout\_partial\scripts.ejs</code>文件中对应位置处做如下修改</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs ejs">&lt;%- partial(&#x27;_partial/plugins/typed.ejs&#x27;) %&gt;<br>&lt;%- partial(&#x27;_partial/plugins/math.ejs&#x27;) %&gt;<br>&lt;%- partial(&#x27;_partial/plugins/mermaid.ejs&#x27;) %&gt;<br>&lt;%- partial(&#x27;_partial/plugins/analytics.ejs&#x27;) %&gt;<br>&lt;%- partial(&#x27;_partial/plugins/mouse-click.ejs&#x27;) %&gt; # 添加的代码在这里<br></code></pre></td></tr></table></figure><p>还需要修改<code>_config.fluid.yml</code>文件，修改位置其实任意，我实在加载进度条之前修改的</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">mouse_click:</span>  <span class="hljs-comment"># 鼠标点击动效</span><br>    <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">style:</span> <span class="hljs-string">love</span> <span class="hljs-comment"># 目前设置两个值：values（价值观词汇） | love（爱心）</span><br><br><span class="hljs-comment"># 加载进度条</span><br><span class="hljs-comment"># Progress bar when loading</span><br><span class="hljs-attr">progressbar:</span><br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><code class="hljs ejs">&lt;% if (theme.fun_features.mouse_click &amp;&amp; theme.fun_features.mouse_click.enable) &#123; %&gt;<br>  &lt;% var style = theme.fun_features.mouse_click.style %&gt;<br>  &lt;% if (style === &#x27;values&#x27;) &#123; %&gt;<br>    &lt;script type=&quot;text/javascript&quot;&gt;<br>      //定义获取词语下标<br>      var a_idx = 0;<br>      jQuery(document).ready(function ($) &#123;<br>        //点击body时触发事件<br>        $(&quot;body&quot;).click(function (e) &#123;<br>          //需要显示的词语<br>          var a = new Array(&quot;富强&quot;, &quot;民主&quot;, &quot;文明&quot;, &quot;和谐&quot;, &quot;自由&quot;, &quot;平等&quot;, &quot;公正&quot;, &quot;法治&quot;, &quot;爱国&quot;, &quot;敬业&quot;, &quot;诚信&quot;, &quot;友善&quot;);<br>          //设置词语给span标签<br>          var $i = $(&quot;&lt;span/&gt;&quot;).text(a[a_idx]);<br>          //下标等于原来下标+1  余 词语总数<br>          a_idx = (a_idx + 1) % a.length;<br>          //获取鼠标指针的位置，分别相对于文档的左和右边缘。<br>          //获取x和y的指针坐标<br>          var x = e.pageX, y = e.pageY;<br>          //在鼠标的指针的位置给$i定义的span标签添加css样式<br>          $i.css(&#123;<br>            &quot;z-index&quot;: 999,<br>            &quot;top&quot;: y - 20,<br>            &quot;left&quot;: x,<br>            &quot;position&quot;: &quot;absolute&quot;,<br>            &quot;font-weight&quot;: &quot;bold&quot;,<br>            &quot;color&quot;: rand_color()<br>          &#125;);<br>          // 随机颜色<br>          function rand_color() &#123;<br>            return &quot;rgb(&quot; + ~~(255 * Math.random()) + &quot;,&quot; + ~~(255 * Math.random()) + &quot;,&quot; + ~~(255 * Math.random()) + &quot;)&quot;<br>          &#125;<br>          //在body添加这个标签<br>          $(&quot;body&quot;).append($i);<br>          //animate() 方法执行 CSS 属性集的自定义动画。<br>          //该方法通过CSS样式将元素从一个状态改变为另一个状态。CSS属性值是逐渐改变的，这样就可以创建动画效果。<br>          //详情请看http://www.w3school.com.cn/jquery/effect_animate.asp<br>          $i.animate(&#123;<br>            //将原来的位置向上移动180<br>            &quot;top&quot;: y - 180,<br>            &quot;opacity&quot;: 0<br>            //1500动画的速度<br>          &#125;, 1500, function () &#123;<br>            //时间到了自动删除<br>            $i.remove();<br>          &#125;);<br>        &#125;);<br>      &#125;)<br>      ;<br>    &lt;/script&gt;<br>  &lt;% &#125; else if (style === &#x27;love&#x27;) &#123; %&gt;<br>    &lt;script&gt;<br>      !function (e, t, a) &#123;<br>        function r() &#123;<br>          for (var e = 0; e &lt; s.length; e++) s[e].alpha &lt;= 0 ? (t.body.removeChild(s[e].el), s.splice(e, 1)) : (s[e].y--, s[e].scale += .004, s[e].alpha -= .013, s[e].el.style.cssText = &quot;left:&quot; + s[e].x + &quot;px;top:&quot; + s[e].y + &quot;px;opacity:&quot; + s[e].alpha + &quot;;transform:scale(&quot; + s[e].scale + &quot;,&quot; + s[e].scale + &quot;) rotate(45deg);background:&quot; + s[e].color + &quot;;z-index:99999&quot;);<br>          requestAnimationFrame(r)<br>        &#125;<br><br>        function n() &#123;<br>          var t = &quot;function&quot; == typeof e.onclick &amp;&amp; e.onclick;<br>          e.onclick = function (e) &#123;<br>            t &amp;&amp; t(), o(e)<br>          &#125;<br>        &#125;<br><br>        function o(e) &#123;<br>          var a = t.createElement(&quot;div&quot;);<br>          a.className = &quot;heart&quot;, s.push(&#123;<br>            el: a,<br>            x: e.clientX - 5,<br>            y: e.clientY - 5,<br>            scale: 1,<br>            alpha: 1,<br>            color: c()<br>          &#125;), t.body.appendChild(a)<br>        &#125;<br><br>        function i(e) &#123;<br>          var a = t.createElement(&quot;style&quot;);<br>          a.type = &quot;text/css&quot;;<br>          try &#123;<br>            a.appendChild(t.createTextNode(e))<br>          &#125; catch (t) &#123;<br>            a.styleSheet.cssText = e<br>          &#125;<br>          t.getElementsByTagName(&quot;head&quot;)[0].appendChild(a)<br>        &#125;<br><br>        function c() &#123;<br>          return &quot;rgb(&quot; + ~~(255 * Math.random()) + &quot;,&quot; + ~~(255 * Math.random()) + &quot;,&quot; + ~~(255 * Math.random()) + &quot;)&quot;<br>        &#125;<br><br>        var s = [];<br>        e.requestAnimationFrame = e.requestAnimationFrame || e.webkitRequestAnimationFrame || e.mozRequestAnimationFrame || e.oRequestAnimationFrame || e.msRequestAnimationFrame || function (e) &#123;<br>          setTimeout(e, 1e3 / 60)<br>        &#125;, i(&quot;.heart&#123;width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);&#125;.heart:after,.heart:before&#123;content: &#x27;&#x27;;width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;&#125;.heart:after&#123;top: -5px;&#125;.heart:before&#123;left: -5px;&#125;&quot;), n(), r()<br>      &#125;(window, document);<br>    &lt;/script&gt;<br>  &lt;% &#125; %&gt;<br>&lt;% &#125; %&gt;<br></code></pre></td></tr></table></figure><h3 id="文章版权信息">文章版权信息</h3><p>在<code>E:\blog\themes\fluid\layout\post.ejs</code>文件中对应位置处添加如下代码</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs ejs">&lt;% if(theme.post.copyright.enable &amp;&amp; theme.post.copyright.content &amp;&amp; page.copyright !== false) &#123; %&gt;<br>    &lt;p class=&quot;note note-warning&quot;&gt;<br>        &lt;% if (typeof page.copyright === &#x27;string&#x27; &amp;&amp; page.copyright !== &#x27;&#x27;) &#123; %&gt;<br>        &lt;%- page.copyright %&gt;<br>        &lt;% &#125; else &#123; %&gt;<br>        &lt;strong&gt;本文作者: &lt;/strong&gt;&lt;a href=&quot;&lt;%- url_for() %&gt;&quot;&gt;&lt;%- theme.about.name || config.author || config.title %&gt;&lt;/a&gt;&lt;br&gt;<br>        &lt;strong&gt;本文链接: &lt;/strong&gt;&lt;a href=&quot;&lt;%- full_url_for(page.path) %&gt;&quot;&gt;&lt;%-           full_url_for(page.path) %&gt;&lt;/a&gt;&lt;br&gt;<br>        &lt;strong&gt;版权声明: &lt;/strong&gt;&lt;%- theme.post.copyright.content %&gt;<br>        &lt;% &#125; %&gt;<br>    &lt;/p&gt;<br>&lt;% &#125; %&gt;<br></code></pre></td></tr></table></figure><p>这样在每篇文章的评论区上方就会生成版权信息，hexo自己生成的文章链接是根据<code>permalink: :year/:month/:day/:title/</code>这个格式来的，这样对于中文标题来说，解码之后的链接特别长，我们可以用<code>hexo-abbrlink</code>这个插件解决这个问题</p><p>安装插件，安装位置在<code>E:\blog\node_modules\hexo-abbrlink</code>，有需要可以自己调整代码</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">npm install hexo-abbrlink <span class="hljs-comment">--save</span><br></code></pre></td></tr></table></figure><p>然后修改hexo配置文件<code>E:\blog\_config.yml</code></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">permalink: posts<span class="hljs-regexp">/:abbrlink/</span><br></code></pre></td></tr></table></figure><p>保存后需要<code>hexo cl</code>一下缓存，然后重新部署会看到短标题了</p><h3 id="页脚">页脚</h3><h4 id="网站版权人数统计及运行时间">网站版权、人数统计及运行时间</h4><p>在<code>E:\blog\themes\fluid\layout\_partial</code>中新建<code>status.ejs</code>文件，将以下代码复制粘贴保存。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs ejs">&lt;% if(theme.footer.statistics.enable) &#123; %&gt;<br>  &lt;div&gt;<br>    &lt;br&gt;© 2020-2022 &lt;a href=&quot;https://babblingme.gitee.io&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Shixin&lt;/a&gt;. All Rights Reserved.&lt;br/&gt;<br>    &lt;% if (theme.footer.statistics.pv_format) &#123; %&gt;<br>      &lt;!-- 不蒜子统计PV --&gt;<br>      &lt;% var pv_texts = theme.footer.statistics.pv_format.split(&#x27;&#123;&#125;&#x27;) %&gt;<br>      &lt;span id=&quot;busuanzi_container_site_pv&quot; style=&quot;display: none&quot;&gt;<br>      &lt;%- pv_texts[0] %&gt;&lt;span id=&quot;busuanzi_value_site_pv&quot;&gt;&lt;/span&gt;&lt;%- pv_texts[1] %&gt;<br>    &lt;/span&gt;<br>    &lt;% &#125; %&gt;<br>    &lt;% if (theme.footer.statistics.uv_format) &#123; %&gt;<br>      &lt;!-- 不蒜子统计UV --&gt;<br>      &lt;% var uv_texts = theme.footer.statistics.uv_format.split(&#x27;&#123;&#125;&#x27;) %&gt;<br>      &lt;span id=&quot;busuanzi_container_site_uv&quot; style=&quot;display: none&quot;&gt;<br>      &lt;%- uv_texts[0] %&gt;&lt;span id=&quot;busuanzi_value_site_uv&quot;&gt;&lt;/span&gt;&lt;%- uv_texts[1] %&gt;<br>    &lt;/span&gt;<br>    &lt;% &#125; %&gt;<br><br>    &lt;!-- 网站运行时间 --&gt;<br>    &lt;span id=&quot;timeDate&quot;&gt;载入天数...&lt;/span&gt;&lt;span id=&quot;times&quot;&gt;载入时分秒...&lt;/span&gt;<br>    &lt;script&gt;<br>        var now = new Date(); <br>        function createtime() &#123; <br>            var grt= new Date(&quot;03/25/2020 00:00:00&quot;);//在此处修改你的建站时间<br>            now.setTime(now.getTime()+250); <br>            days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); <br>            hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); <br>            if(String(hnum).length ==1 )&#123;hnum = &quot;0&quot; + hnum;&#125; minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); <br>            mnum = Math.floor(minutes); if(String(mnum).length ==1 )&#123;mnum = &quot;0&quot; + mnum;&#125; <br>            seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); <br>            snum = Math.round(seconds); if(String(snum).length ==1 )&#123;snum = &quot;0&quot; + snum;&#125; <br>            document.getElementById(&quot;timeDate&quot;).innerHTML = &quot; 本站已安全运行 &quot;+dnum+&quot; 天 &quot;; <br>            document.getElementById(&quot;times&quot;).innerHTML = hnum + &quot; 小时 &quot; + mnum + &quot; 分 &quot; + snum + &quot; 秒&quot;; <br>        &#125; <br>        setInterval(&quot;createtime()&quot;,250);<br>    &lt;/script&gt;<br>  &lt;/div&gt;<br>&lt;% &#125; %&gt;<br></code></pre></td></tr></table></figure><p>在同级目录下<code>footer.ejs</code>文件对应位置处修改代码。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ejs">&lt;%- partial(&#x27;_partial/status.ejs&#x27;) %&gt; # 将statistics改为status<br>&lt;%- partial(&#x27;_partial/beian.ejs&#x27;) %&gt;<br>&lt;% if(theme.web_analytics.cnzz) &#123; %&gt;<br></code></pre></td></tr></table></figure><p>老版的fluid只有<code>busuanzi.ejs</code>一个文件，对应卜算子这一个人数统计插件，新版的是<code>statistics.ejs</code>文件，里面多了一个<code>LeanCloud</code>，但是我直接在这个文件中添加运行时间代码，显示比较奇怪，所以我干脆用之前的<code>busuanzi.ejs</code>文件，并添加代码后改名为<code>status.ejs</code>文件。我这里主要的修改是将三行信息变为两行，看起来更美观、简约一些（至少我这么觉得）。</p><h3 id="关于页友链页和自定义页">关于页、友链页和自定义页</h3><h4 id="联系方式">联系方式</h4><p>卑微的小博主不好意思留其他联系方式，只留个邮箱，但是需要折腾一番，在<code>E:\blog\themes\fluid\source\css</code>下新建<code>email.css</code>文件，将以下代码添加进去，然后修改<code>_config.fluid.yml</code>文件（两处）</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">custom_css:</span> <span class="hljs-string">/css/email.css</span><br><span class="hljs-comment"># ---------- #</span><br><span class="hljs-attr">icons:</span><br>    <span class="hljs-comment">#- &#123; class: &quot;iconfont icon-github-fill&quot;, link: &quot;https://github.com&quot;, tip: &quot;GitHub&quot; &#125;</span><br>    <span class="hljs-bullet">-</span> &#123; <span class="hljs-attr">class:</span> <span class="hljs-string">&quot;iconfont icon-youxiang&quot;</span>, <span class="hljs-attr">link:</span> <span class="hljs-string">&#x27;mailto:1837085828@qq.com&#x27;</span> &#125;<br>    <span class="hljs-comment">#- &#123; class: &quot;iconfont icon-wechat-fill&quot;, qrcode: &quot;/img/favicon.png&quot; &#125;</span><br></code></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-keyword">@font-face</span> &#123;<span class="hljs-attribute">font-family</span>: <span class="hljs-string">&quot;youxiang&quot;</span>;<br>  <span class="hljs-attribute">src</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">&#x27;iconfont.eot?t=1586331751983&#x27;</span>); <span class="hljs-comment">/* IE9 */</span><br>  <span class="hljs-attribute">src</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">&#x27;iconfont.eot?t=1586331751983#iefix&#x27;</span>) <span class="hljs-built_in">format</span>(<span class="hljs-string">&#x27;embedded-opentype&#x27;</span>), /* IE6-IE8 */<br>  <span class="hljs-built_in">url</span>(<span class="hljs-string">&#x27;data:application/x-font-woff2;charset=utf-8;base64,d09GMgABAAAAAAK4AAsAAAAABqAAAAJrAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHEIGVgCCcAqBKIEgATYCJAMICwYABCAFhG0HMhvIBRHVky9kPxKyk8z7w90Smwyh08Sb4PnXv/73SXJn8mh+GN3vCFRaPdixpMsJgM3N0DUqQrEk53k/fUc6VrgQfvjEvdM/CiiQ+c67HNfeNKkLMA6kgPbGKE6khDJuGLvAJdyHAN7Ek4u0tvcOxWKwlgkgc2fNmITNhTAYlrUIrpq9BtmKg1Xr1ENgS/h9+UyxWFA4Gqtu4PS2qTS+G2/n6aWepWN9gjAI6LADaCAXMCBDa1P9aISxNN4pQzLsq1rg3XiPx7cgezUi7K+zKn0BiIWiexK7klsVVAAYGA5FQOWo94MODAwacft5vD7yoiLg1rM4dfBp6fyAMxdELzuf7n/yLGrpudG7D19Im7QrYsqZcwdDJ55cn/6w9Nlrvzt+r59NDxdMa5ieuDfkTsjeRDAmb/X/1BfuAScWL8aL3C9S//efiEyPpBH/TB9VDxBA4NfEb80TAmr/Wh8DwMsbx2Ygg6GfB+w53AL/Styzy+hSy6yMKq7NKYrQ99DgjTfgwb5g3o7Vhd2YQ7A5MYPCTRw0llTSMHPh4EMpXFga4E0OHYd9CGExGjFeQDarAIRArkDhz31oAnlEGuYbOITzFS4CRcOb4RJypg/p4iXVwqgFHZg/JEvdO1ZRUfUdw1U1Z6Uh+418pigs41zM3rAjz7Hh/IRVxINnarCDx7BWgoMpo5UxihzbNPm6F42W2qBoYdSCDswfkqXu/f6iSp+/Y7iq5paOmvAb+UyjwzLOPcibqvfquJdnzk9YRTx4pgY7mIW1Ehz1szJaGeOIxLFNdi/fVzWur2lfdwDwxtIrsadr7BK6fkn3MAwA&#x27;</span>) <span class="hljs-built_in">format</span>(<span class="hljs-string">&#x27;woff2&#x27;</span>),<br>  <span class="hljs-built_in">url</span>(<span class="hljs-string">&#x27;iconfont.woff?t=1586331751983&#x27;</span>) <span class="hljs-built_in">format</span>(<span class="hljs-string">&#x27;woff&#x27;</span>),<br>  <span class="hljs-built_in">url</span>(<span class="hljs-string">&#x27;iconfont.ttf?t=1586331751983&#x27;</span>) <span class="hljs-built_in">format</span>(<span class="hljs-string">&#x27;truetype&#x27;</span>), /* chrome, firefox, opera, Safari, Android, iOS <span class="hljs-number">4.2</span>+ */<br>  <span class="hljs-built_in">url</span>(<span class="hljs-string">&#x27;iconfont.svg?t=1586331751983#iconfont&#x27;</span>) <span class="hljs-built_in">format</span>(<span class="hljs-string">&#x27;svg&#x27;</span>); <span class="hljs-comment">/* iOS 4.1- */</span><br>&#125;<br><br><span class="hljs-selector-class">.icon-youxiang</span> &#123;<br>  <span class="hljs-attribute">font-family</span>: <span class="hljs-string">&quot;youxiang&quot;</span> <span class="hljs-meta">!important</span>;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;<br>  <span class="hljs-attribute">font-style</span>: normal;<br>  -webkit-<span class="hljs-attribute">font-smoothing</span>: antialiased;<br>  -moz-osx-<span class="hljs-attribute">font-smoothing</span>: grayscale;<br>&#125;<br><br><span class="hljs-selector-class">.icon-youxiang</span>:before &#123;<br>  content: <span class="hljs-string">&quot;\e65e&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="自定义页面">自定义页面</h4><p>然后在关于页自定义了一个网页，在<code>E:\blog\source</code>文件夹下新建文件夹<code>rhapsody</code>（名字自定义），在其中新建文件<code>index.md</code>文件，里面可以随意编辑。</p><p>然后在关于页的源文件<code>E:\blog\source\about\index.md</code>中添加如下html代码，就可以从关于页进入这个自己创建的页面了（搞博客还是要懂一些前端的知识的）</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/rhapsody/&quot;</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;不成文的思绪&quot;</span>&gt;</span>遐想<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="友链页">友链页</h4><p>对于没人气的小博主，友链直接显示在导航栏感觉有点多余，因此对友链也做了类似自定义页面的处理</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/links/&quot;</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;优质博主up主出没&quot;</span>&gt;</span>友链<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br></code></pre></td></tr></table></figure><p>友链不用创建新文件及文件夹，只需在<code>_config.fluid.yml</code>中修改<code>links: enable: true</code>即可。要想在导航栏显示友链，再去导航栏相关配置区，将<code>menu</code>下的<code>links</code>那一行注释去掉即可。</p><h1 id="结束语">结束语</h1><p>费了近一天时间，终于写好了。博客需要折腾，生命亦如此。</p><h1 id="参考文档">参考文档</h1><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span>https://www.cnblogs.com/bndong/p/9947729.html <a href="#fnref:1" rev="footnote" class="footnote-backref"> ↩︎</a></span></span></li><li><span id="fn:2" class="footnote-text"><span>https://zhuanlan.zhihu.com/p/299161193 <a href="#fnref:2" rev="footnote" class="footnote-backref"> ↩︎</a></span></span></li><li><span id="fn:3" class="footnote-text"><span>https://zhuanlan.zhihu.com/p/136552969 <a href="#fnref:3" rev="footnote" class="footnote-backref"> ↩︎</a></span></span></li><li><span id="fn:4" class="footnote-text"><span>https://www.yangbing.club/2019/06/29/save-hexo-source-post-with-git-branch/ <a href="#fnref:4" rev="footnote" class="footnote-backref"> ↩︎</a></span></span></li><li><span id="fn:5" class="footnote-text"><span>https://blog.csdn.net/weixin_43471926/article/details/109798811 <a href="#fnref:5" rev="footnote" class="footnote-backref"> ↩︎</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>技术</category>
      
    </categories>
    
    
    <tags>
      
      <tag>blog</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>COMSOL模拟带电粒子在电磁场中的运动轨道</title>
    <link href="/posts/10009/"/>
    <url>/posts/10009/</url>
    
    <content type="html"><![CDATA[<p>COMSOL可视化单粒子轨道理论。<span id="more"></span></p><h1 id="前言">前言</h1><p>主要参考了 <a href="https://mp.weixin.qq.com/s/eEaBquM85Ze8ul-Kqxq_9w">这篇文章</a> ，但是这位老师写的较为简洁，我是新手所以自己折腾了很长时间才整好。总之，感谢老师。</p><p>另外，本文可以说是最简单的COMSOL应用了，我在学习理论的顺便模拟了一下，顺手记录下来以加深自己的理解，写的颇为详细，刚入门等离子体和COMSOL可以一看，大佬请退却。</p><p>具体理论分析见 <a href="/2020/04/27/2020-04-27-等离子体物理学导论02单粒子运动/">这篇文章</a> 。这里直接给出相应公式</p><p>动力学方程 <span class="math display">\[m\frac{d\vec{v}}{dt}=q(\vec{E}+\vec{v}\times\vec{B})\label{1}\tag{1}\]</span> 拉莫尔（回旋）半径 <span class="math display">\[r_L=\frac{mv_{\bot c}}{|q|B}\label{2}\tag{2}\]</span></p><h1 id="模拟">模拟</h1><h2 id="准备">准备</h2><p>模型向导 三维 选择AC/DC下的粒子追踪模块下的带电粒子追踪并添加研究，</p><p><img src="/ass/20200503-tracing3.png" /></p><p><img src="/ass/20200503-tracing4.png" /></p><h2 id="均匀-e-场和-b-场">均匀 E 场和 B 场</h2><h3 id="e0"><span class="math inline">\(E=0\)</span></h3><p><img src="/ass/20200503-tracing5.png" /></p><p><img src="/ass/20200503-tracing6.png" /></p><p>右键几何1添加长方体</p><p><img src="/ass/20200503-tracing7.png" /></p><p>点击形成联合体 全部构建</p><h3 id="有限-e-场待更新">有限 <span class="math inline">\(E\)</span> 场（待更新）</h3><h3 id="重力场">重力场</h3><h1 id="参考资料">参考资料</h1><p>[1]</p><p>[2]</p>]]></content>
    
    
    <categories>
      
      <category>模拟</category>
      
    </categories>
    
    
    <tags>
      
      <tag>plasma</tag>
      
      <tag>COMSOL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>等离子体物理学导论02单粒子运动</title>
    <link href="/posts/10008/"/>
    <url>/posts/10008/</url>
    
    <content type="html"><![CDATA[<p>三大理论框架之一：单粒子轨道理论。<span id="more"></span></p><h2 id="引言">2.1 引言</h2><p>等离子体的行为有时像流体，有时又像单个粒子集合，本章先研究单个粒子在电磁场中的行为。与第3章不同，本章<strong>假定 <span class="math inline">\(E\)</span> 场和 <span class="math inline">\(B\)</span> 场是预先确定的</strong>，并且不受带电粒子的影响。</p><p>单粒子轨道理论把等离子体看作大量独立的带电粒子组成的集体，只讨论单个带电粒子在外加电磁场中的运动，而忽略粒子间的相互作用。粒子轨道理论适用于稀薄等离子体，对于稠密等离子体也提供某些描述，但由于没有考虑基体效应，局限性很大。粒子轨道理论的基本方法是求解粒子的运动方程。</p><h2 id="均匀-e-和-b-场">2.2 均匀 <span class="math inline">\(E\)</span> 和 <span class="math inline">\(B\)</span> 场</h2><h3 id="e0">2.2.1 <span class="math inline">\(E=0\)</span></h3><p>运动方程 <span class="math display">\[m\frac{d\vec{v}}{dt}=q\vec{v}\times\vec{B}\label{2.1}\tag{2.1}\]</span> 取 <span class="math inline">\(\vec{B}\)</span> 沿 <span class="math inline">\(\hat{z}\)</span> 方向（ <span class="math inline">\(\vec{B}=B\hat{z}\)</span> ），定义两个量</p><ul><li>回旋频率</li></ul><p><span class="math display">\[\omega_c\equiv\frac{|q|B}{m}\label{2.3}\tag{2.3}\]</span></p><ul><li>回旋半径（拉莫尔半径）</li></ul><p><span class="math display">\[r_L\equiv\frac{v_\bot}{\omega_0}=\frac{mv_{\bot c}}{|q|B}\label{2.6}\tag{2.6}\]</span></p><p>由此求解方程 <span class="math inline">\(\eqref{2.1}\)</span> 得速度解 <span class="math display">\[\begin{aligned}v_x&amp;=v_{\bot}e^{i\omega_ct}\\v_y&amp;=\pm v_{\bot}e^{i\omega_ct}\end{aligned}\label{2.4}\tag{2.4}\]</span> 轨迹解 <span class="math display">\[x-x_0=r_Lsin\ \omega_ct,\ \ \ \ y-y_0=\pm r_Lcos\ \omega_ct,\ \ \ \ z=z_0+v_{z0}t\label{2.7}\tag{2.7}\]</span> 上式表明带电粒子在垂直于 <span class="math inline">\(\vec{B}\)</span> 方向绕导向中心（ <span class="math inline">\(x_0,y_0\)</span> ）做圆周运动。而导向中心沿 <span class="math inline">\(\vec{B}\)</span> 方向做匀速直线运动。按照右手螺旋，带电粒子的旋转方向总是使得其产生的磁场与外加磁场方向相反，也就是说，等离子体是<strong>抗磁</strong>的。通常，带电粒子的轨迹是一条螺旋线。</p><p><img src="/ass/20200504-single_charged_particle_tracing_uni_B.gif" /></p><p>带电粒子速度分量之比为 <span class="math inline">\(v_x:v_y:v_z=2:0:1\)</span> ，轨迹为等距螺旋线。电子回旋半径远小于离子（此处有意将电子回旋半径放大以方便观察），前进方向与离子相同，转动方向与离子相反。</p><h3 id="有限-e-场">2.2.2 有限 <span class="math inline">\(E\)</span> 场</h3><p>取 <span class="math inline">\({\vec{B}}\)</span> 沿 <span class="math inline">\(x-y\)</span> 平面，这样 <span class="math inline">\(E_y=0\)</span> <span class="math display">\[m\frac{d\vec{v}}{dt}=q(\vec{E}+\vec{v}\times\vec{B})\label{2.8}\tag{2.8}\]</span> 先求 <span class="math inline">\(\vec{B}\)</span> 方向（纵向）的运动 <span class="math display">\[v_z=\frac{qE_z}{m}t+v_{z0}\label{2.9}\tag{2.9}\]</span> 导向中心沿 <span class="math inline">\(\vec{B}\)</span> 方向做匀加速直线运动。再来看横向运动 <span class="math display">\[\begin{aligned}v_x&amp;=v_{\bot}e^{i\omega_ct}\\v_y&amp;=\pm v_{\bot}e^{i\omega_ct}-\frac{E_x}{B}\end{aligned}\label{2.12}\tag{2.12}\]</span> 第二式比 <span class="math inline">\(\eqref{2.4}\)</span> 多了一项，即漂移项 <span class="math inline">\(-\frac{E_x}{B}\)</span> 。具体来分析一下这一项。在拆解并求解 <span class="math inline">\(\eqref{2.8}\)</span> 过程中可以看出 <span class="math inline">\(m\frac{d\vec v}{dt}\)</span> 项只给出回旋运动，所以可以忽略这一项，方程变为 <span class="math display">\[\vec{E}+\vec{v}\times\vec{B}=0\label{2.13}\tag{2.13}\]</span> 用 <span class="math inline">\(B\)</span> 叉乘上式，得到 <span class="math display">\[\vec{v}_{\bot gc}=\frac{\vec{E}\times\vec B}{B^2}\equiv\vec{v}_E\label{2.15}\tag{2.15}\]</span> 此式即导向中心的电场漂移。注意， <span class="math display">\[v_E\]</span> 与 <span class="math display">\[q,m,v_{\bot}\]</span>​ 都无关。粒子在纵向上受电场分量加速。粒子在横向上受到磁场力和电场力的共同作用。</p><ul><li>前（右）半周：最初，粒子有一沿 <span class="math inline">\(x\)</span> 轴的初速度，磁力垂直向下，粒子完全由电场力作用加速，慢慢的粒子速度变大，磁力随之变大（回旋半径也变大），且磁力在 <span class="math inline">\(x\)</span> 轴的分量也变大，电场力加速度逐渐被削弱，到右顶点时，磁力达到最大，速度也最大，然后，粒子开始减速，到下顶点时回到初速度（只看横向）；</li><li>后（左）半周：过了下顶点，磁力分量与电场力分量叠加作用于粒子，粒子继续减速（回旋半径相应变小），左顶点达到最小，而后回到初始位置并加速到初速度（只看横向）</li></ul><p>所以，粒子整个过程只受到电场力 <span class="math inline">\(z\)</span> 轴分量的加速，电场 <span class="math inline">\(x\)</span> 轴分量在粒子前半周及后半周所作功抵消，磁力未做功。而回旋半径左小右大，无法形成闭合圆，就导致了粒子导向中心向下漂移。由下方第二张图可见一斑。</p><p>电子旋转方向相反，这样电场对它的加减速就同离子一样，是先加速在减速（纵向上是减速的，所以螺旋间距变小），这导致回旋半径也是先大后小，最终造成电子和离子漂移方向相同。</p><p><img src="/ass/20200504-single_charged_particle_tracing_uni_B+E.gif" /></p><p>注意 <span class="math inline">\(B\)</span> 和 <span class="math inline">\(E\)</span> 在 <span class="math inline">\(x-z\)</span> 平面内不垂直，<span class="math inline">\(E_x:E_y:E_z=15:0:2\)</span> ，粒子轨迹为变间距斜螺旋线。</p><p><img src="/ass/20200504-single_charged_particle_tracing_uni_B+E2.gif" /></p><p>上图图例给出粒子速度，蓝色最慢，红色最快，从轨迹左右对比可以看出，粒子在右侧时最快，在左侧时最慢。粒子整体上是加速前进的，能量来自于电场 <span class="math inline">\(z\)</span> 轴分量，电场 <span class="math inline">\(x\)</span> 轴分量在粒子前半周及后半周所作功抵消。</p><h3 id="重力场">2.2.3 重力场</h3><p>用一般力 <span class="math inline">\(\vec{F}\)</span> 代替 <span class="math inline">\(\eqref{2.8}\)</span> 中的 <span class="math inline">\(q\vec{E}\)</span> ，就可以将上述结果用到其他力场。这样则力 <span class="math inline">\(\vec{F}\)</span> 引起的导向中心漂移为 <span class="math display">\[v_f=\frac{1}{q}\frac{\vec{F}\times\vec{B}}{B^2}\label{2.17}\tag{2.17}\]</span> 如果这个力是重力，则 <span class="math display">\[v_g=\frac{m}{q}\frac{\vec{g}\times\vec{B}}{B^2}\label{2.18}\tag{2.18}\]</span> 重力漂移和电场漂移的一个重要不同是，电场对电子和离子的作用方向不同，而重力场对它们具有相同方向的作用力，这就导致如果重力对离子是先加速在减速，那么对电子就是先减速在加速，从而电子和离子漂移方向相反，所以等离子体中存在一个静电流密度 <span class="math display">\[\vec{j}=n(M+m)\frac{\vec{g}\times{\vec{B}}}{B^2}\label{2.19}\tag{2.19}\]</span> 因为粒子质量很小，所以重力非常小，<span class="math inline">\(v_g\)</span> 通常可以忽略，但当磁力线弯曲时，就存在一个因离心力而引起的有效重力。该力与质量无关，是不可忽略的。离心力是一种等离子体不稳定性的基础，它跟实际重力无关。</p><h2 id="非均匀-b-场">2.3 非均匀 <span class="math inline">\(B\)</span> 场</h2><p>以上讨论了均匀场，下面讨论非均匀场。对于非均匀场，电荷的运动方程一般是非线性的，严格求解一般不可能，我们近似求解，习惯上用小值 <span class="math inline">\(r_L/L\)</span> 展开，其中 <span class="math inline">\(L\)</span> 是非均匀性的标度长。这类理论叫做轨道理论，下面只讨论只含一种不均匀性的最简单情况。</p><h3 id="nabla-bbot-b-梯度-b-漂移">2.3.1 <span class="math inline">\(\nabla B\bot B\)</span> ：梯度 <span class="math inline">\(B\)</span> 漂移</h3><p>考虑密度在 <span class="math inline">\(y\)</span> 方向增大的直磁力线，根据回旋半径公式，在回旋半径与 <span class="math inline">\(B\)</span> 的密度成反比，即轨道底部回旋半径大于轨道顶部，这就引起了与 <span class="math inline">\(\nabla B\)</span> 和 <span class="math inline">\(B\)</span> 都垂直的漂移，且电子与离子漂移方向相反，并引起与 <span class="math inline">\(B\)</span> 垂直的电流。</p><p>洛伦兹力 <span class="math inline">\(F =qv\times B\)</span> 对粒子一个回旋周期的作用力平均值为零 <span class="math inline">\(\bar{F}_x=0\)</span> ，现在来近似计算 <span class="math inline">\(\bar{F}_y\)</span> ，取式 <span class="math inline">\(\eqref{2.4}\)</span> 实数部分，得到 <span class="math display">\[F_y=-qv_xB_z(y)=-qv_\bot(cos\ \omega_ct)[B_0\pm r_L(cos\ \omega_ct)\frac{\partial B}{\partial y}]\label{2.20}\tag{2.20}\]</span> 假设 <span class="math inline">\(r_L=v_\bot /\omega_c\ll L\)</span> ，其中 <span class="math inline">\((L=|B|/|\nabla B|)\)</span> ，即回旋半径远小于磁场发生显著变化的特征空间尺度。在导向中心附近将磁场泰勒展开 <span class="math display">\[\begin{aligned}B&amp;=B_0+(r\cdot\nabla)B+...\\B_z&amp;=B_0+y(\partial B_z/\partial y)+...\end{aligned}\label{2.21}\tag{2.21}\]</span> 式 <span class="math inline">\(\eqref{2.20}\)</span> 第一项对于一个回旋周期平均为零，第二项中 <span class="math inline">\((cos\ \omega_ct)^2\)</span> 平均为 <span class="math inline">\(1/2\)</span> ，所以 <span class="math display">\[\bar{F}_y=\mp qv_\bot r_L\frac{1}{2}\frac{\partial B}{\partial y}\label{2.22}\tag{2.22}\]</span> 由此，导向中心漂移速度为 <span class="math display">\[v_{gc}=\frac{1}{q}\frac{F\times B}{B^2}=\frac{1}{q}\frac{\bar F_y}{|B|}\hat x=\mp\frac{v_\bot r_L}{B}\frac{1}{2}\frac{\partial B}{\partial y}\hat x\label{2.23}\tag{2.23}\]</span> 因为 <span class="math inline">\(y\)</span> 轴为任意选择，将上式推广为 <span class="math display">\[v_{gc}=\pm\frac{1}{2}v_\bot r_L\frac{B\times \nabla B}{B^2}\label{2.24}\tag{2.24}\]</span></p><h3 id="弯曲-b-场曲率漂移">2.3.2 弯曲 <span class="math inline">\(B\)</span> 场：曲率漂移</h3><p>假设磁力线以常曲率半径 <span class="math inline">\(R_c\)</span> 弯曲，且 <span class="math inline">\(|B|\)</span> 为常数（即无梯度分布），粒子导向中心沿磁力线运动，受到离心力作用 <span class="math display">\[F_{cf}=\frac{mv_\parallel^2}{R_c}\hat r=mv_\parallel^2\frac{R_c}{R_c^2}\label{2.25}\tag{2.25}\]</span> 由式 <span class="math inline">\(\eqref{2.17}\)</span> 得 <span class="math display">\[v_R=\frac{1}{q}\frac{F_{cf} \times B}{B^2}=\frac{mv_\parallel^2}{qB^2}\frac{R_c\times B}{R_c^2}\label{2.26}\tag{2.26}\]</span> 这就是曲率漂移。</p><p><img src="/ass/20200503-curvedmagneticfield.png" /></p><p>但实际上当磁场存在曲率时，一定存在梯度，不然不符合麦克斯韦方程。考虑 <span class="math inline">\(|B|\)</span> 随半径减小，在真空中 <span class="math inline">\(\nabla\times B=0\)</span> 。在上图柱坐标系中， <span class="math display">\[(\nabla\times B)_z=\frac{1}{r}\frac{\partial}{\partial r}(rB_{\theta})=0,\ \ \ \ \ B_{\theta}\propto\frac{1}{r}\label{2.27}\tag{2.27}\]</span> 于是 <span class="math display">\[|B|\propto\frac{1}{R_c},\ \ \ \ \ \frac{\nabla|B|}{|B|}=-\frac{R_c}{R_c^2}\label{2.28}\tag{2.28}\]</span> 由方程 <span class="math inline">\(\eqref{2.24}\)</span> 得到 <span class="math display">\[\begin{aligned}v_{\nabla B}&amp;=\mp\frac{1}{2}\frac{v_\bot r_L}{B^2}B\times|B|\frac{R_c}{R_c^2}\\&amp;=\pm\frac{1}{2}\frac{v_\bot^2}{\omega_c}\frac{R_c\times B}{R_c^2B}\\&amp;=\frac{1}{2}\frac{m}{q}v_\bot^2\frac{R_c\times B}{R_c^2B^2}\end{aligned}\label{2.29}\tag{2.29}\]</span> 合并两者 <span class="math display">\[v_{\nabla B}+v_R=\frac{m}{q}\frac{R_c\times B}{R_c^2B^2}(v_\parallel^2+\frac{1}{2}v_\bot^2)\label{2.30}\tag{2.30}\]</span> 这就意味着，你不可能只靠磁场约束粒子，它总会漂移出环。</p><h2 id="非均匀-e-场待更新">2.4 非均匀 <span class="math inline">\(E\)</span> 场（待更新）</h2><h2 id="时变-e-场">2.5 时变 <span class="math inline">\(E\)</span> 场</h2><h2 id="时变-b-场">2.6 时变 <span class="math inline">\(B\)</span> 场</h2><h2 id="导向中心漂移概述">2.7 导向中心漂移概述</h2><h2 id="绝热不变量">2.8 绝热不变量</h2>]]></content>
    
    
    <categories>
      
      <category>笔记</category>
      
    </categories>
    
    
    <tags>
      
      <tag>plasma</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>幻灯片新工具-Marp</title>
    <link href="/posts/10007/"/>
    <url>/posts/10007/</url>
    
    <content type="html"><![CDATA[<p>如果你喜欢markdown，那么你大概率会喜欢 <a href="https://marp.app/"><abbr title= "Markdown Presentation Ecosystem">Marp</abbr></a> 。<span id="more"></span>Marp 在markdown语法基础上多加几行代码即可做出简洁精美的Slides，与markdown的简洁高效的思想一脉相承，省区排版的烦恼，精力可以转移到内容创作上，可谓效率神器。</p><p>Marp最大的优点就是简洁高效，非常适合科研人员、技术人员等一些追求严肃内容的人使用。但它不是完美的，追求复杂排版等视觉享受的还是要专注于PPT。Marp仍处于不断发展阶段，它还在变得更好。</p><p>如果你喜欢，可以在 <a href="https://gitee.com/babblingme/MyOwnMarp">这里</a> 找到本文的Slides，里面已经包含常用语法，更多语法在 <a href="https://marpit.marp.app/markdown">这里</a> 。If you like it, take it.</p><p><img src="/ass/20200419-Preview.png" /></p><h1 id="前言">前言</h1><p>前几天开组会要做Slides，但是PPT的排版对于强迫症患者异常痛苦，因此弃之，转而投向 <span class="math inline">\(LaTeX\)</span> （网页版比较轻便 <a href="https://www.overleaf.com/">overleaf</a> ），但是 <span class="math inline">\(LaTeX\)</span> 又较为复杂，需要重新学习，对于一个小组会来说太重了（以后再系统学习），然后我又把矛头指向了基于markdown的 <a href="https://revealjs.com/">reveal.js</a> ，但是它的动画效果劝退了我，科研狗比较忌讳动画，不知道能不能去掉。然后我就找到了Marp，使用过程中感觉非常顺手，做出来的Slides简洁不失优雅。</p><p><img src="/ass/20200419-Marp.png" /></p><h1 id="安装">安装</h1><p>简略说一下安装。建议采用VS Code + Marp for VS Code插件的方式，其他使用方式可到 <a href="https://marp.app/">官网</a> 查看。</p><ul><li><p>下载安装 <a href="https://code.visualstudio.com/">VS Code</a></p><p>正常安装即可，只需注意一点，进行到下图这一步时，勾选以下三项，其中第一项勾选意义不大，第二项作用：右键文件夹或文件夹的空白处可直接打开文件夹</p></li></ul><p><img src="/ass/20200420-vscode.png" /></p><ul><li><p>安装插件</p><ul><li><p>中文</p><p>如果你想用中文界面，跟下方操作一样，在商店里搜索 Chinese 即可。</p></li><li><p>Marp for VS Code</p><p>打开商店，搜索，安装，完事。</p></li></ul></li></ul><p><img src="/ass/20200420-marpforvscode.png" /></p><p>如果你想用VS Code作为markdown的主力军，可以安装 <a href="https://shd101wyy.github.io/markdown-preview-enhanced/#/">markdown preview enhanced</a> 。VS Code值得更多的探索，but not today.</p><h1 id="使用">使用</h1><p>关于使用，官方的这篇 <a href="https://marketplace.visualstudio.com/items?itemName=marp-team.marp-vscode">文档</a> 说的很清楚，可详细阅读。这里只说几点。</p><ul><li><p>实时预览Slides</p><p>点击VS Code自带预览器（源码右上角第一个按钮，绿色箭头所指）即可预览。</p></li><li><p>导出PDF，HTML</p><p>点击紫色箭头所指Marp图标，然后点击第一行Export slide deck即可。第二行为开关Marp预览，这个没啥用，手动 <code>marp: true</code> 或者 <code>marp: false</code> 即可。</p></li><li><p>HTML语法</p><p>如果你想在文档中使用HTML语法，要勾选黄色圈圈里的选择框。</p></li><li><p>自定义theme</p><p>Marp只提供3套theme，如果你想用自定义theme，可以按照红色箭头所指按123顺序添加css文件。个人不十分建议折腾主题，这样就失去了Marp简洁不折腾的初衷，我觉得default主题就挺好，不过看个人喜好啦。</p></li></ul><p><img src="/ass/20200420-marpcss.png" /></p><h1 id="结语">结语</h1><p>有人可能会说，“何必这么折腾，PPT用着挺好的，不如花点时间多学点PPT”，我对这种态度持否定态度，但对最后一句话持肯定态度。就是说，求知肯定是对的，但是多学PPT是一种求知，而多掌握一种方法也是一种求知。都是求知为何要相互否定呢？</p><p align="right">“怕什么真理无穷，进一寸有一寸的欢喜” ------ 胡适之</p><p><br/></p>]]></content>
    
    
    <categories>
      
      <category>技术</category>
      
    </categories>
    
    
    <tags>
      
      <tag>marp</tag>
      
      <tag>幻灯片</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>关于Typora插入相对路径图片问题</title>
    <link href="/posts/10006/"/>
    <url>/posts/10006/</url>
    
    <content type="html"><![CDATA[<p>本文主要解决hexo博客框架下，用绝对路径或相对路径，在typora文档中插入本地图片时博客和md文件不能都显示的问题。很多人已经写过这个问题，但有没必要之处，所以写此文指出，给后来者避坑。</p><span id="more"></span><h3 id="解决方案">解决方案</h3><p>如前所述，这里有两个问题：</p><ul><li><p>使用绝对路径（如<code>E:\blog\source\img\today.jpg</code>）时，md文件显示图片，而博客不显示；</p></li><li><p>使用相对路径（如<code>/img/tomorrow.jpg</code>）时，md不显示文件，而博客显示。</p></li></ul><p>有什么可以兼顾两者的方案呢？</p><p>我搜索了一下，大概有两种解决方案：</p><ul><li><p>开启根目录下的<code>post_assets_folder</code>，这样能在创建md文档的时候在同一文件夹下创建同名文件夹；</p></li><li><p>修改typora的设置，以此将博客所需路径和typora所需路径统一。</p></li></ul><p>第1种方法感觉有点牛刀杀鸡，毕竟一般没有很多图片，而且文件夹多了比较乱，所以采用第2种方法。</p><h3 id="两步走">两步走</h3><p>现在是，hexo只认<code>source</code>根目录下的相对路径（应该可以改，但是这里不考虑），就是说这么一个文件结构<code>E:\blog\source\img\today.jpg</code>，那么hexo只能识别<code>source</code>目录下（与<code>img</code>同级）的文件夹里的图片，那么如果我在<code>img</code>下建文件夹是不行的。</p><p>所以，要么直接用<code>img</code>文件夹，要么新建文件夹，我选择新建文件夹，将文章首页缩略图存于<code>img</code>文件夹，而将文章内插图存入另外的文件夹。</p><ul><li><p>在<code>source</code>目录下新建文件夹<code>ass</code>；</p></li><li><p>在typora主界面，<code>格式</code>→<code>图像</code>→<code>设置图像根目录</code>，选择<code>source</code>文件夹！注意！是<code>source</code>文件夹。</p></li></ul><p>这时在文章开头YAML区多了一行<code>typora-root-url: ..</code>（这里其实也可以手打输入）。接着将<code>ass</code>文件夹下的图片拖入文章，这时图片格式为<code>![](/img/yesterday.jpg)</code>，大功告成！</p><p>提醒：</p><ul><li>要插入图片的每篇文章都要这么设置；</li><li>老版本<code>设置图像目录</code>好像是在<code>编辑</code>里面，注意区分；</li><li>插入本地音频视频想用相对路径也要这样操作。</li></ul><h3 id="关于偏好设置">关于偏好设置</h3><p>我搜了很多文章，都说要设置<code>偏好设置</code>→<code>图像</code>里的<code>插入图片时...</code>，这其实完全没必要，<a href="https://support.typora.io/Images/#when-insert-images">官方文档</a>也没有给出这些操作，不知道是不是老版本的原因。这些设置倒是可以拷贝图片到特定文件夹，这里不在讨论。</p><p>一点想法，如有错误或不同意见，欢迎评论区讨论。</p>]]></content>
    
    
    <categories>
      
      <category>技术</category>
      
    </categories>
    
    
    <tags>
      
      <tag>blog</tag>
      
      <tag>typora</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Markdown语法小记</title>
    <link href="/posts/10005/"/>
    <url>/posts/10005/</url>
    
    <content type="html"><![CDATA[<p>本文主要涉及Typora编辑器的markdown语法，可能与其他编辑器稍有差异。<span id="more"></span></p><p>Typora 采用标准为 <a href="https://help.github.com/articles/github-flavored-markdown/">GitHub Flavored Markdown</a> 。详情参阅 <a href="https://support.typora.io/Markdown-Reference/">官方参考文档</a></p><h1 id="markdown">Markdown</h1><h2 id="公式">公式</h2><p><strong>想用公式一定要在front-matter里开启 <code>math: true</code> 啊！！血的教训！！！</strong></p><h3 id="公式编号及引用">公式编号及引用</h3><div class="note note-info">            <p><small>Edge浏览器公式显示有问题（加 <code>\tag{}</code> 时），暂时未解决，最好改用Chrome。</small></p>          </div><p>typora的自动编号功能不是很好用，</p><ul><li>有些公式不想编号，不知道如何去掉编号；</li><li>不知道如何更改编号样式，只能 (1) (2)... 不能 (1.1) (2.2)...</li></ul><p>我暂时没有找到解决办法， <a href="https://support.typora.io/Math/#cross-reference">官方文档</a> 也没有给出明确解答。</p><p>行间公式</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs latex">$$<br>y=sin(x) \label&#123;first&#125; \tag&#123;1.1&#125;<br>\text&#123;, 在这可加文字&#125;<br>$$<br></code></pre></td></tr></table></figure><p><span class="math display">\[y=sin(x) \label{first} \tag{1.1}\text{, 在这可加文字}\]</span></p><p>引用公式（含括号） <span class="math inline">\(\eqref{first}\)</span></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs latex">`$\eqref&#123;first&#125;$`<br></code></pre></td></tr></table></figure><p>引用公式（不含括号） <span class="math inline">\(\ref{first}\)</span></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs latex">`$\ref&#123;first&#125;$`<br></code></pre></td></tr></table></figure><p>注意，引用公式时公式内必须加 <code>\label&#123;&#125;</code> 及 <code>\tag&#123;&#125;</code> 。</p><h2 id="特殊字符">特殊字符</h2><h3 id="希腊字母">希腊字母</h3><table><thead><tr class="header"><th style="text-align: left;"><code>\delta</code></th><th style="text-align: left;"><span class="math inline">\(\delta\)</span></th></tr></thead><tbody><tr class="odd"><td style="text-align: left;"><code>\Delta</code></td><td style="text-align: left;"><span class="math inline">\(\Delta\)</span></td></tr></tbody></table><p>更多 <a href="https://blog.csdn.net/Katherine_hsr/article/details/79179622">详见</a></p><h2 id="链接">链接</h2><p>markdown插入链接 <a href="https://babblingme.gitee.io">Shixin</a></p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-attr">[Shixin]</span>(<span class="hljs-attribute">https</span>:<span class="hljs-comment">//babblingme.gitee.io)</span><br></code></pre></td></tr></table></figure><p>可如果链接中包含<code>()</code>该如何处理？ <a href="https://en.wikipedia.org/wiki/Plasma_(physics)">Plasma(physics)</a></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">[Plasma(physics)](https:<span class="hljs-regexp">//</span>en.wikipedia.org<span class="hljs-regexp">/wiki/</span>Plasma_(physics))<br></code></pre></td></tr></table></figure><p>这样最后一个右括号 <code>)</code> 会露在外边，解决办法：</p><ul><li><p>将链接转换到底部</p><p>第二行代码不会显示在网页中 <a href="https://en.wikipedia.org/wiki/Plasma_(physics)" title="可以在这里添加标题">Plasma(physics)</a></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">[Plasma(physics)][<span class="hljs-number">1</span>]<br>[<span class="hljs-number">1</span>]:https:<span class="hljs-regexp">//</span>en.wikipedia.org<span class="hljs-regexp">/wiki/</span>Plasma_(physics) 可以在这里添加标题<br></code></pre></td></tr></table></figure></li></ul><h2 id="脚注">脚注</h2><p>这里是脚注，语法为 <code>&lt;sup id="fnref:1" class="footnote-ref"&gt;&lt;a href="#fn:1" rel="footnote"&gt;&lt;span class="hint--top hint--rounded" aria-label="</code> 。 "&gt;<a href="https://en.wikipedia.org/wiki/Plasma_(physics)" title="可以在这里添加标题">1</a></span></a></sup><code>&lt;sup id="fnref:1" class="footnote-ref"&gt;&lt;a href="#fn:1" rel="footnote"&gt;&lt;span class="hint--top hint--rounded" aria-label="</code> 。 "&gt;<a href="https://en.wikipedia.org/wiki/Plasma_(physics)" title="可以在这里添加标题">1</a></span></a></sup></p><h1 id="html">HTML</h1><p>HTML语法教程可参见 <a href="https://www.runoob.com/html/html-tutorial.html">这里</a> 。</p><h2 id="字体">字体</h2><p>两种方法，字体大小不太一致</p><ul><li><p>HTML</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">font</span> <span class="hljs-attr">color</span>=<span class="hljs-string">&quot;blue&quot;</span>&gt;</span>示例<span class="hljs-tag">&lt;/<span class="hljs-name">font</span>&gt;</span><br></code></pre></td></tr></table></figure><p><font color="blue">示例</font></p></li><li><p><span class="math inline">\(LaTeX\)</span></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs latex">$\color&#123;blue&#125;&#123;好吧&#125;$ <br></code></pre></td></tr></table></figure><p><span class="math inline">\(\color{blue}{好吧}\)</span></p></li></ul><h2 id="空格">空格</h2><p>markdown中段首直接用空格键输入空格是无效的（在网页中不显示），可以采用如下几种方式</p><ul><li><p>全角空格（推荐）</p><p>一般输入法切换全角模式为 <code>Shift+空格</code> ，微软自带输入法按了没反应，是没开快捷键，可查看 <a href="https://zhidao.baidu.com/question/1691662342164738068.html">这里</a> 设置。</p><p>　　切换为全角模式之后直接按两个空格就是两个汉字的宽度。</p></li><li><p>手动全角空格 <code>&amp;emsp;</code></p><p>  这里使用了2个<abbr title="em space"><code>&amp;emsp;</code></abbr>，不要漏掉分号；em意思可以参见 <a href="https://en.wikipedia.org/wiki/Em_(typography)" title="em">这里</a></p></li><li><p>手动半角空格 <code>&amp;nbsp;</code> （不建议）</p><p>        这里使用了8个<abbr title="non-breaking space"><code>&amp;nbsp;</code></abbr>，同样不要漏掉分号；</p></li></ul><h2 id="缩写">缩写</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html">2020年是哈尔滨工业大学（<span class="hljs-tag">&lt;<span class="hljs-name">abbr</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;Harbin Institute of Technology&quot;</span>&gt;</span>HIT<span class="hljs-tag">&lt;/<span class="hljs-name">abbr</span>&gt;</span>）建校100周年。<br></code></pre></td></tr></table></figure><p>2020年是哈尔滨工业大学（<abbr title="Harbin Institute of Technology">HIT</abbr>）建校100周年。</p><h2 id="对齐">对齐</h2><ul><li><p>右对齐</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">align</span>=<span class="hljs-string">&quot;right&quot;</span>&gt;</span>哈尔滨工业大学<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br></code></pre></td></tr></table></figure><p align="right"><p>哈尔滨工业大学</p></p></li><li><p>居中</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">center</span>&gt;</span>建校100周年庆<span class="hljs-tag">&lt;/<span class="hljs-name">center</span>&gt;</span><br></code></pre></td></tr></table></figure><center><p>建校100周年庆</p></center></li></ul><h2 id="便签">便签</h2><p>可通过以下两种方式加入便签</p><ul><li><p>HTML（普适）</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;note note-info&quot;</span>&gt;</span>这里是primary便签，不支持`markdown`<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br></code></pre></td></tr></table></figure><p class="note note-info"><p>这里是primary便签，不支持<code>markdown</code></p></p></li><li><p>特定代码（需要添加此功能）</p><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mel">&#123;% note <span class="hljs-keyword">warning</span> %&#125;<br>这里是<span class="hljs-keyword">warning</span>便签，支持<span class="hljs-string">`markdown`</span><br>&#123;% endnote %&#125;<br></code></pre></td></tr></table></figure><div class="note note-warning">            <p>这里是warning便签，支持<code>markdown</code></p>          </div></li></ul><p>其他可选便签 <a href="https://fluid-dev.github.io/hexo-fluid-docs/guide/#note-%E6%A0%87%E7%AD%BE">详见</a> 。</p><h2 id="锚点">锚点</h2><p>两种方法，在markdown中不能跳转，但到网页中就可以了</p><ul><li><p>markdown</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs markdown">[<span class="hljs-string">这里链接到便签</span>](<span class="hljs-link">#便签</span>)<br></code></pre></td></tr></table></figure><p><a href="#便签">这里链接到便签</a></p></li><li><p>HTML</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#便签&quot;</span>&gt;</span>这里也链接到便签<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br></code></pre></td></tr></table></figure><p><a href="#便签">这里也链接到便签</a></p></li></ul><p>注意两点（以上两种方法都是）</p><ul><li><p>不管几级标题都用一个 <code>#</code> ，如上示例</p></li><li><p>锚点跳转目标中如有空格或英文点号 <code>.</code> ，要替换成 <code>-</code> ，如下锚点目标</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-section">### 1.1 哈工大校史</span><br></code></pre></td></tr></table></figure><p>锚点语法应该为</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs markdown">[<span class="hljs-string">示例</span>](<span class="hljs-link">#1-1-哈工大校史</span>)<br></code></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#1-1-哈工大校史&quot;</span>&gt;</span>示例<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><h2 id="折叠块">折叠块</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">details</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">summary</span>&gt;</span>点击查看<span class="hljs-tag">&lt;/<span class="hljs-name">summary</span>&gt;</span><br>    这里是隐藏的内容。<span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>    暂时不支持markdown, latex。<br>    主题开发者说会考虑支持，坐等。<br><span class="hljs-tag">&lt;/<span class="hljs-name">details</span>&gt;</span><br></code></pre></td></tr></table></figure><details><summary>点击查看</summary>这里是隐藏的内容。<br/> 暂时不支持markdown, latex。 主题开发者说会考虑支持，坐等。</details><h1 id="typora">Typora</h1><h2 id="快捷键">快捷键</h2><p>详见 <a href="http://support.typora.io/Shortcut-Keys/">官方文档</a></p><h3 id="自定义快捷键">自定义快捷键</h3><blockquote><p><code>Ctrl+,</code> → <code>通用</code> → <code>打开高级设置</code> → <code>conf.user.json</code> → <code>Custom key binding</code></p></blockquote><p>添加自定义快捷键即可，如下</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-comment">// Custom key binding, which will override the default ones.</span><br><span class="hljs-string">&quot;keyBinding&quot;</span>: &#123;<br>  <span class="hljs-comment">// for example: </span><br>  <span class="hljs-comment">// &quot;Always on Top&quot;: &quot;Ctrl+Shift+P&quot;</span><br>  <span class="hljs-attr">&quot;刷新所有数学公式&quot;</span>: <span class="hljs-string">&quot;F5&quot;</span><br>&#125;,<br></code></pre></td></tr></table></figure><p>注意，只有在菜单栏中有的功能才可以设置快捷键，且不论中英文，内容必须与菜单栏中内容一致。添加完成后重启typora，就会在菜单栏中看到原先没有快捷键功能有了你设定的快捷键。</p><p><br/></p><center>持 续 更 新 中 ， 嘤 嘤 嘤 . . .</center><br/><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span>这里是脚注内容，语法为 <code>&lt;a href="#fnref:1" rev="footnote" class="footnote-backref"&gt; ↩︎&lt;/a&gt;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span id="fn:1" class="footnote-text"&gt;&lt;span&gt;</code> 。 <a href="#fnref:1" rev="footnote" class="footnote-backref"> ↩︎</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>技术</category>
      
    </categories>
    
    
    <tags>
      
      <tag>LaTeX</tag>
      
      <tag>markdown</tag>
      
      <tag>HTML</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>等离子体物理学导论01引言</title>
    <link href="/posts/10004/"/>
    <url>/posts/10004/</url>
    
    <content type="html"><![CDATA[<p>It is estimated that 99.999% of the visible universe is in the plasma state. <span id="more"></span> <sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="https://www.plasma-universe.com/99-999-plasma/">[1]</span></a></sup></p><hr /><p><em>本系列笔记主要参考<a href="http://www.seas.ucla.edu/~ffchen/">Francis F. Chen</a>的经典教科书《<a href="https://link.springer.com/content/pdf/10.1007%2F978-3-319-22309-4.pdf">Introduction to Plasma Physics and Controlled Fusion</a>》，并结合其他参考资料和自己的理解进行适当改动或延申。</em></p><p><em>笔记类文章我会挑重点写，侧重自己的理解，起到整理知识的作用，方便以后查阅。若真有感兴趣的朋友可自行查阅资料或留言讨论。</em></p><h2 id="自然界等离子体">1.1 自然界等离子体</h2><p>如前所述，宇宙中约99.999%的<u>可观测</u>物质均为等离子体<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="不可观测物质占比要大得多。暗能量约68%，暗物质约27%，普通物质仅占约不到5%。也就是说人类处于5%中的1%。详见">[2]</span></a></sup>，如恒星、星云、星际间物质。形如对人类来说算是庞然大物的地球等行星却成了极微小的存在，足见天地之无穷。</p><p>等离子体一般称之为“物质的第四态”，但它不像固液气之间有物理量的突然变化（相变），而且近些年随着等离子体物理的发展，研究对象不在只局限于与气体性质更接近的电离气体，而出现了与液体甚至固体性质更接近的强耦合等离子体，如等离子体晶体。当然还有非中性等离子体、单分量等离子体、夸克-胶子等离子体等特殊等离子体，总之“物质第四态”这个说法是有待探讨。详见王晓刚教授所著《<a href="https://book.douban.com/subject/30434805/">等离子体物理基础</a>》（这书真的一点也不基础。。）引言的讨论。</p><p>但本文主要讨论一般意义上的等离子体，即<strong>电离气体</strong>。关于其他类型等离子体以后可以考虑写个科普性的文章。</p><h3 id="saha方程">Saha方程</h3><p>印度物理学家 <a href="https://en.wikipedia.org/wiki/Meghnad_Saha">梅格纳德·萨哈</a> 于1920年提出萨哈电离方程 <span class="math display">\[\frac{n_i}{n_n}\approx2.4\times10^{21}\frac{T^{3/2}}{n_i}e^{-{U_i/k_BT}}\label{1.1}\tag{1.1}\]</span> 这里<span class="math inline">\(n_i\)</span>和<span class="math inline">\(n_n\)</span>分别是离子密度和中性粒子密度（<span class="math inline">\(m^3\)</span>），<span class="math inline">\(T\)</span>是气体温度（<span class="math inline">\(K\)</span>），<span class="math inline">\(k_B\)</span>是玻尔兹曼常数（<span class="math inline">\(1.38\times10^{-23}m^2kgs^{-2}{K}^{-1}\)</span>），<span class="math inline">\(U_i\)</span>是电离能（剥离原子最外层电子所需的能量<span class="math inline">\(J\)</span>）。</p><p>我们来进行估算。对于室温下的普通空气，<span class="math inline">\(n_n\approx3\times10^{25}m^{-3}\)</span>，<span class="math inline">\(T\approx300K\)</span>，<span class="math inline">\(U_i=14.5eV\)</span>（氮气）（<span class="math inline">\(1\ eV=1.6\times10^{-19}J\)</span>），电离度（用MATLAB计算） <span class="math display">\[\frac{n_i}{(n_n+n_i)}\approx\frac{n_i}{n_n}\approx10^{-122}\]</span> 这是非常非常小的数。电离度随室温升高逐渐升高，当 <span class="math inline">\(k_B\)</span> 接近 <span class="math inline">\(U_i\)</span> 时，电离度急剧上升（电子雪崩），气体变成部分电离等离子体，最终变成完全电离等离子体。</p><p>电离是一个动态过程，不只有电离，还有复合，那么两者就要找到一个平衡态。萨哈方程物理意义：</p><ul><li>在冷气体中，一个原子经过一系列概率极小的有利碰撞被加速到速度很高，能量远高于平均能量，最终被电离。式 <span class="math inline">\(\eqref{1.1}\)</span> 的指数因子就表示这种快速原子随 <span class="math inline">\({U_i/k_BT}\)</span> 指数下降；</li><li>被电离原子遇到电子很可能会发生复合，又变为中性原子，即复合率依赖于电子密度，而电子密度等于<span class="math inline">\(n_i\)</span>，所以电离度随<span class="math inline">\(n_i\)</span>减小，所以式 <span class="math inline">\(\eqref{1.1}\)</span> 右边有一项<span class="math inline">\(n_i^{-1}\)</span>。</li></ul><p>快速原子会很快被电离，电离度随即增大，离子密度、电子密度增大，但这又会导致复合率增大，电离度减小，二者处于动态平衡中。</p><h2 id="等离子体定义">1.2 等离子体定义</h2><p>Chen书中给出的传统意义上的等离子体的定义，</p><blockquote><p>A plasma is a quasineutral gas of charged and neutral particles which exhibits collective behavior.</p></blockquote><p class="note note-info"><small>王晓刚老师书中给出了更广泛的定义，以此涵盖“弱电离等离子体”、“单分量”和“复杂等离子体”以及“夸克-胶子等离子体”：包含足够数量的非束缚态基本相互作用荷的多粒子体系。</small></p><p>两个重要概念</p><ul><li><p>准中性 quasineutral</p><p>见 <a href="#1-4-徳拜屏蔽">1.4</a> 节详细讨论</p></li><li><p>集体行为 collective behavior</p></li></ul><p>等离子体由带电粒子组成，当电荷运动时，由库伦力引起正负电荷局部聚集，从而产生电场、电流以及相应的磁场。这些场影响了远处其他带电粒子的运动。</p><p>考虑 <span class="math inline">\(A\)</span>，<span class="math inline">\(B\)</span> 两小块稍微带电的区域。两者库仑力随 <span class="math inline">\(1/r^2\)</span> 减小，而对于给定立体角（<span class="math inline">\(\Delta r/r=constant\)</span>），能影响 <span class="math inline">\(A\)</span> 的 <span class="math inline">\(B\)</span> 的体积随 <span class="math inline">\(r^3\)</span> 增大。所以，等离子体之间存在长程库仑力。</p><p><img src="/ass/20200423-longrange.jpg" /></p><blockquote><p>By “collective behavior” we mean motions that depend not only on local conditions but on the state of the plasma in remote regions as well.</p></blockquote><p>所谓“集体行为”，指的是不仅取决于局部条件还取决于远距离区域等离子体状态的运动。</p><h2 id="温度的概念">1.3 温度的概念</h2><p>一维麦克斯韦分布 <span class="math display">\[f(u)=Aexp(-\frac{1}{2}mu^2/k_BT)\label{1.2}\tag{1.2}\]</span></p><p>粒子数密度 <span class="math display">\[n=\int^\infty_{-\infty}f(u)du\label{1.3}\tag{1.3}\]</span></p><p><span class="math display">\[A=n(\frac{m}{2\pi k_BT})^{1/2}\label{1.4}\tag{1.4}\]</span></p><p><img src="/ass/20200423-maxwellian.jpg" /></p><p>分布宽度与常数 <span class="math inline">\(T\)</span> 有关，我们称其为温度。其确切含义是什么？先来看一下平均动能，这里不详细展开 <span class="math display">\[E_{av}=\frac{1}{2}k_BT\label{1.7}\tag{1.7}\]</span> 推广到三维就是 <span class="math inline">\(E_{av}=\frac{3}{2}k_BT\)</span> 。因此，每个自由度的平均动能为 <span class="math inline">\(\frac{1}{2}k_BT\)</span> 。</p><p>方便起见，直接用 <span class="math inline">\(T\)</span> 代表能量（将 <span class="math inline">\(k_B\)</span> 吸收进 <span class="math inline">\(T\)</span> ），或者说用能量单位（ <span class="math inline">\(eV\)</span> ）来表示温度，令 $ k_BT=1 eV=1.6^{-19} J$，则</p><p><span class="math display">\[T=\frac{1.6\times10^{-19}\ J}{1.38\times10^{-23}\ J/K}\approx11600\ K\]</span></p><p>所以转换系数为</p><p><span class="math display">\[1\,eV=11600\,K\]</span></p><p>等离子体温度为 <span class="math inline">\(2\,eV\)</span> 就是指其 <span class="math display">\[k_BT\]</span> 为 <span class="math display">\[2\,eV\]</span> ，或者说其三维平均动能 <span class="math inline">\(E_{av}=3\,eV\)</span> 。</p><p>等离子体中的离子之间以及电子之间的碰撞率要大于离子和电子之间的碰撞率，所以它们一般分别处于独立的麦克斯韦分布中（分别处于热平衡状态），所以要分开提及它的温度 <span class="math inline">\(T_i\)</span> 和 <span class="math inline">\(T_e\)</span> 。当存在磁场 <span class="math inline">\(B\)</span> 时，单一类粒子都可能处于不同温度，因为沿着 <span class="math inline">\(B\)</span> 或垂直于 <span class="math inline">\(B\)</span> 作用的力是不同的，这样就可能产生垂直和平行两个方向上的两种分布。</p><p>荧光灯管内电子温度高达 $20000,K $ ，但其实摸起来远没有那么热，一是因为荧光灯管内没有达到完全热平衡，即离子温度没有达到那么高；二是因为热容，即荧光灯管内的电子密度远低于大气压，也就是总的传输热量没有那么大。</p><h2 id="德拜屏蔽">1.4 德拜屏蔽</h2><p>在等离子体内引入如下通电圆球，由于电场作用，正电球围绕电子云，负电球围绕离子云。如果等离子体是冷的，且不存在热运动，则电子（离子）云的电荷量应该等于球上的电荷量，即电场被完全屏蔽，球间不存在电场；而如果等离子体具有有限温度，电子（离子）云边缘屏蔽不彻底，此处势能近似等于粒子热能 <span class="math inline">\(k_BT\)</span> ，稍有扰动就会逃逸，<span class="math inline">\(k_BT\)</span> 量级的电势会渗透到等离子体中并引起有限电场。</p><p><img src="/ass/20200424-debyeshielding.jpg" /></p><p>下面计算其近似厚度。在等离子体中有一极板，使其电势一直为 <span class="math inline">\(\phi_0\)</span> （<span class="math inline">\(x=0\)</span>），计算 <span class="math inline">\(\phi(x)\)</span> 。离子质量远大于电子质量，因此在实验时间尺度上，离子近似不动，而形成一个均匀正电荷本底。一维泊松方程 <span class="math display">\[\varepsilon_0\nabla^2\phi=\varepsilon_0\frac{d^2\phi}{dx^2}=-e(n_i-n_e)\ \ \ \ (Z=1)\label{1.12}\tag{1.12}\]</span> <img src="/ass/20200424-potentialdistribution.jpg" /></p><p>考虑势能 <span class="math inline">\(q\phi\)</span> ，电子分布函数为（麦克斯韦分布加上电势） <span class="math display">\[f(u)=Aexp[-(\frac{1}{2}mu^2+q\phi)/k_BT_e]\label{1.13}\tag{1.13}\]</span> 可以看出，势能越大，粒子数越少。令 <span class="math inline">\(q=-e\)</span> ，并注意到 <span class="math display">\[n_e(\phi \rightarrow 0)=n_{\infty}\]</span> ，对 <span class="math inline">\(u\)</span> 积分，得到 <span class="math display">\[n_e=n_\infty exp(e\phi/k_BT_e)\]</span> 该式详细物理考察见 3.5 节。结合式 <span class="math inline">\(\eqref{1.12}\)</span> ，有 <span class="math display">\[\varepsilon_0\frac{d^2\phi}{dx^2}=en_\infty(e^{e\phi/k_BT_e}-1)\]</span> 当 <span class="math inline">\(|e\phi/k_BT_e|\ll1\)</span> 时（极板附近不能简化，因为 <span class="math inline">\(|e\phi/k_BT_e|\)</span> 可能会很大，不过该区域电势下降非常快，对厚度影响不大），将上式泰勒展开并取线性项（第一项） <span class="math display">\[\frac{d^2\phi}{dx^2}=\frac{4\pi n_\infty e^2}{k_BT_e}\label{1.15}\tag{1.15}\]</span> 定义 <span class="math display">\[\lambda_D\equiv(\frac{\varepsilon_0 k_BT_e}{ne^2})^{1/2}\label{1.16}\tag{1.16}\]</span> 其中 <span class="math inline">\(n\)</span> 表示 <span class="math display">\[n_\infty\]</span> ，<span class="math display">\[k_BT\]</span> 单位为焦耳，一般简写为 <span class="math display">\[T_{eV}\]</span>​ 时单位为 <span class="math inline">\(eV\)</span> ，式 <span class="math inline">\(\eqref{1.15}\)</span> 的解为 <span class="math display">\[\phi=\phi_0 exp(-|x|/\lambda_D)\label{1.17}\tag{1.17}\]</span> <span class="math inline">\(\lambda_D\)</span> 称为德拜长度，是屏蔽距离或鞘层厚度的度量。</p><p>由公式分析，当密度增加时，<span class="math inline">\(\lambda_D\)</span> 减小，因为电荷云中包含的电子数量增加，屏蔽效果变好了；此外，<span class="math inline">\(\lambda_D\)</span> 还随 <span class="math inline">\(KT_e\)</span> 增大而增大，因为热运动使得电子“不老实”，更容易逃逸，从而增大电荷云厚度；最后，注意 <span class="math inline">\(\lambda_D\)</span> 定义中使用的是电子温度（完全稳恒状态采用较冷的那类粒子的温度）。</p><p>将 <span class="math inline">\(\varepsilon_0=8.85\times10^{-12}\ F/m\)</span> 、<span class="math inline">\(k_B=1.38\times10^{-23}\ J/K\)</span> 和 <span class="math inline">\(e=1.6\times10{-19}\ C\)</span> 带入式 <span class="math inline">\(\eqref{1.16}\)</span> 可得第一式， <span class="math display">\[\begin{split}\lambda_D&amp;=69(T_e/n)^{1/2}\ m,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ T_e为\ K\\\lambda_D&amp;=7430(k_BT_e/n)^{1/2}\ m,\ \ \ \ \ \ k_BT_e为\ eV\end{split}\label{1.18}\tag{1.18}\]</span></p><hr /><p>这里有点绕，脑子不清晰搞了一晚上。除了 Chen 的书，还参考了郑坚老师的《<a href="http://muchong.com/t-3603837-1">等离子体物理理论</a>》一书（这本书理论推导极好，能看出老师的一番苦心），以及 <a href="https://en.wikipedia.org/wiki/Electronvolt#Temperature">维基百科</a> （把单位列出来就清晰多了）。在我看来，这里有两种思路：</p><p>Chen：直接令 <span class="math inline">\(k_BTe\)</span> 单位为 <span class="math inline">\(eV\)</span> ，为了保持整个式子量纲不变，只要能量单位仍为 <span class="math inline">\(J\)</span> 即可，也就是将 <span class="math inline">\(k_BTe\ (eV)\)</span> 乘以 <span class="math inline">\(1.6\times10^{-19}\ J/eV\)</span> 。这样，将第一式根号内同乘 <span class="math inline">\(k_B\)</span> ，再将能量和电子伏特的转换系数乘进去就可以了。</p><p>郑坚：这个没有第一个这么绕。为了便于区分，将以 <span class="math inline">\(K\)</span> 为单位的温度表示为 <span class="math display">\[T_k\]</span> ，而将以 <span class="math inline">\(eV\)</span> 为单位的温度表示为 <span class="math inline">\(T_{eV}\)</span></p><ul><li><span class="math inline">\(T_k\,(K)\)</span> 为温度 → <span class="math inline">\(k_BT_k\ (J)\)</span> 为能量 →</li><li><span class="math inline">\(\frac{k_BT_k\ (J)}{1.6\times10^{-19}\ (J/eV)}\)</span> 也为能量，而单位变为 <span class="math inline">\(eV\)</span> →</li><li><span class="math inline">\(\frac{1.38\times10^{-23}\ (J/K)}{1.6\times10^{-19}\ (J/eV)}\ T_k\ (K)\)</span> → <span class="math inline">\(\frac{T_k\ (K)}{11600\ (eV/K)}\)</span> →</li><li><span class="math display">\[\frac{T_k}{11600}\ (eV)\]</span> → <span class="math inline">\(T_{eV}\ (eV)\)</span> 为温度</li></ul><p><span class="math display">\[T_k=11600\ T_{eV}\ (K)\]</span> 然后直接将此式带入第一式就可以了，不需要出现 <span class="math inline">\(k_B\)</span> 。</p><ul><li>Chen 的思路是保留 <span class="math inline">\(k_B\)</span> ，整体作为能量进行单位变换，<span class="math inline">\(J\)</span> → <span class="math inline">\(eV\)</span>；</li><li>郑坚的思路是直接将 <span class="math inline">\(k_B\)</span> 吸收进温度里，温度就是能量，然后进行单位变换，即 <span class="math inline">\(K\)</span> → <span class="math inline">\(J\)</span> → <span class="math inline">\(eV\)</span>。</li></ul><hr /><p>现在来看“准中性”的意义。如果系统尺寸 <span class="math inline">\(L\)</span> 远大于 <span class="math inline">\(\lambda_D\)</span> ，那么当系统引入外电势时，该电势就会在远小于 <span class="math inline">\(L\)</span> 的尺寸内被屏蔽掉，使得等离子体的大部分区域免受大电势或电场的影响。在壁或障碍物的鞘层外，<span class="math inline">\(\nabla^2\phi\)</span> 非常小，<span class="math inline">\(n_i\)</span> 近似等于 <span class="math inline">\(n_e\)</span> ，通常小于 <span class="math inline">\(1/10^6\)</span> 。只能有小的电荷不平衡引起 <span class="math inline">\(k_BT/e\)</span> 量级的电势。等离子体是准中性的，即 <span class="math inline">\(n_i \simeq n_e \simeq n\)</span> ，其中 <span class="math inline">\(n\)</span> 为公共密度，称为等离子体密度，但还没有准中性到所有电磁力都消失。</p><p>一个电离气体能成为等离子体的一个重要判据是：气体足够稠密，使得 <span class="math inline">\(\lambda_D\)</span> 远小于 <span class="math inline">\(L\)</span> 。</p><p>如果电子速度太快，它们之间的碰撞不足以维持热分布，那么就可以阻止德拜屏蔽。如果电子非常热，电子碰撞不频繁，就会有这个现象。在这种情况下，一些电子被离子捕获，以一个角度切入离子，但是电子速度太快，导致电子像卫星一样绕离子转动。有人称这种现象为“反屏蔽“讲到朗缪尔探针时细说。</p><h2 id="等离子体参数">1.5 等离子体参数</h2><p>只有当电荷云中有足够数量粒子时，徳拜屏蔽才有效，否则在统计学上就不是一个有效的概念。由式 <span class="math inline">\(\eqref{1.17}\)</span> 可以计算出徳拜球内的粒子数 <span class="math inline">\(N_D\)</span> <span class="math display">\[N_D=n\frac{4}{3}\pi\lambda_D^3=1.38\times10^6T^{3/2}/n^{1/2}\ \ \ \ (T单位K)\label{1.19}\tag{1.19}\]</span> 除了 <span class="math inline">\(\lambda_D\ll L\)</span> ，"集体行为"还要求 <span class="math display">\[N_D\ggg1\label{1.20}\tag{1.20}\]</span></p><h2 id="等离子体判据">1.6 等离子体判据</h2><p>碰撞就要牵扯到碰撞频率（时间）的问题。例如，飞机尾气中的弱电离气体的碰撞太过频繁，以至于他们受普通流体动力而不是电磁力支配，所以不能认为是等离子体。如果 <span class="math inline">\(\omega\)</span> 是等离子体振荡频率，<span class="math inline">\(\tau\)</span> 是带电粒子与中性原子的平均碰撞时间，则等离子体应满足 <span class="math inline">\(\omega\tau&gt;1\)</span> 。</p><p>至此，等离子体必须满足三个条件</p><ul><li><span class="math inline">\(\lambda_D\ll L\)</span></li><li><span class="math inline">\(N_D\ggg1\)</span></li><li><span class="math inline">\(\omega\tau&gt;1\)</span></li></ul><h2 id="等离子体物理应用">1.7 等离子体物理应用</h2><p>等离子体可以由两个参量 <span class="math inline">\(n\)</span> 和 <span class="math inline">\(T\)</span> （以后一般 <span class="math inline">\(T\)</span> 单位为 <span class="math inline">\(eV\)</span> ）来表征：<span class="math inline">\(n\)</span> 从 <span class="math inline">\(10^6\)</span> 到 <span class="math inline">\(10^{34}m^{-3}\)</span> 跨越 <span class="math inline">\(28\)</span> 个量级，<span class="math inline">\(T\)</span> 从 <span class="math inline">\(0.1\)</span> 到 <span class="math inline">\(10^6eV\)</span> 跨越 <span class="math inline">\(7\)</span> 个量级，而空气和水只差 <span class="math inline">\(10^3\)</span> ，水和白矮星只差 <span class="math inline">\(10^5\)</span> ，即使中子星和水也只差 <span class="math inline">\(10^{15}\)</span> ，等离子体跨度之广泛可见一斑。</p><h4 id="气体放电气体电子学">1.7.1 气体放电（气体电子学）</h4><p>等离子体最早是朗缪尔（Langmuir）、汤克斯（Tonks）等人于1920年代开始的。</p><h4 id="受控热核聚变">1.7.2 受控热核聚变</h4><p>现代等离子体物理学始于1952年左右，当时有人提出控制氢弹聚变反应。等离子体的发展很大一部分要归功于受控热核聚变。</p><h4 id="空间物理">1.7.3 空间物理</h4><p>2014年，哈尔滨工业大学被国家发改委正式确认为国家重大科技基础设施项目 <a href="http://space.hit.edu.cn/sesri">空间环境地面模拟装置</a>（ <abbr title="Space Environment Simulation Research Infrastructure">SESRI</abbr> ）牵头建设单位。</p><h4 id="现代天体物理学">1.7.4 现代天体物理学</h4><h4 id="mhd-能量变换和离子推进">1.7.5 MHD 能量变换和离子推进</h4><p>Magnetohydrodynamic (MHD) 能量转换利用致密等离子体射流穿过磁场来发电。<span class="math inline">\(\vec{F}=q\vec{v}\times\vec{B}\)</span> ，离子上移，电子下移，以此来产生电势差</p><p><img src="/ass/20200424-MHDgenerator.jpg" /></p><p>一个重要应用是 <a href="https://www.youtube.com/watch?v=Isn7FoJvtRY">霍尔推进器</a> 。</p><p><img src="/ass/20200427-hall_thruster.png" /></p><h4 id="固态等离子体">1.7.6 固态等离子体</h4><h4 id="气体激光器">1.7.7 气体激光器</h4><h4 id="粒子加速器">1.7.8 粒子加速器</h4><h4 id="工业等离子体">1.7.9 工业等离子体</h4><p>半导体生产，磁控溅射镀膜（眼镜），弧光灯，清洁医学器具。</p><h4 id="大气等离子体">1.7.10 大气等离子体</h4><p>氩气、氦气射流（射频源）可以用来烧和伤口，大面积处理工业基材。</p><p><br/></p><hr /><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span>https://www.plasma-universe.com/99-999-plasma/ <a href="#fnref:1" rev="footnote" class="footnote-backref"> ↩︎</a></span></span></li><li><span id="fn:2" class="footnote-text"><span>不可观测物质占比要大得多。暗能量约68%，暗物质约27%，普通物质仅占约不到5%。也就是说人类处于5%中的1%。<a href="https://science.nasa.gov/astrophysics/focus-areas/what-is-dark-energy">详见</a> <a href="#fnref:2" rev="footnote" class="footnote-backref"> ↩︎</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>笔记</category>
      
    </categories>
    
    
    <tags>
      
      <tag>plasma</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Is It Possible to Run CUDA on AMD GPUs?</title>
    <link href="/posts/10003/"/>
    <url>/posts/10003/</url>
    
    <content type="html"><![CDATA[<p>MATLAB工具箱之GPU计算之AMD or NVIDIA</p><span id="more"></span><hr /><p>奶盖高中同学今晚突然找她问我是不是用MATLAB，打算让我帮他看一下代码，虽然我是个辣鸡，但本着试试看的心态我就答应了，结果一运行，出现了这么一个问题</p><figure><img src="/ass/20200405-CUDA1.png" alt="图1" /><figcaption aria-hidden="true">图1</figcaption></figure><p>他说他朋友电脑可以跑，有点郁闷。</p><p>先看错误行<code>bone=zeros(NX,NY,'single','gpuArray');</code>，出现了gpu字样，不懂什么东西，先help一下<code>help zeros</code>，然后在参考页最下方的“扩展功能”处有“GPU数组”，让我参阅<strong>Parallel Computing Toolbox</strong>文档中的zeros，工具箱？有意思，老早就听说过MATLAB的工具箱了，一直没机会尝试，瞬间兴趣来了，进去看看</p><figure><img src="/ass/20200405-CUDA2.jpg" alt="图2" /><figcaption aria-hidden="true">图2</figcaption></figure><p>出现了！<code>gpuArray</code>与报错一致，而这是<strong><abbr title= "Parallel Computing Toolbox">PCT</abbr></strong>的类型名，应该要安装这个并行运算工具箱，ok，回到MATLAB主界面，工具栏APP，获取更多APP，瞬间乡下人进村，竟然还有Super Mario，可以可以。</p><figure><img src="/ass/20200405-CUDA3.png" alt="图3" /><figcaption aria-hidden="true">图3</figcaption></figure><p>先去找<strong>PCT</strong>，途中看到一个GPU Coder，心想搞不好一会还要用到它，暂时先不管。下载安装<strong>PCT</strong>，运行程序</p><figure><img src="/ass/20200405-CUDA4.png" alt="图4" /><figcaption aria-hidden="true">图4</figcaption></figure><p>又错了。。。什么原因？缺少<strong>CUDA</strong>驱动，哎，等等，<strong>CUDA</strong>好像在哪见过，刚才的GPU Coder是干啥的来着？</p><figure><img src="/ass/20200405-CUDA5.png" alt="图5" /><figcaption aria-hidden="true">图5</figcaption></figure><p>产生<strong>CUDA</strong>代码，好，不管其他的了，先试试再说。进去之后，还需要安装两个东西，一个刚才已经安装了<strong>PCT</strong>，还有一个MATLAB Coder，一并装上，万事大吉，激动人心的时刻就要到来了，运行代码</p><center>😭</center><p>依然是一样的错误，</p><blockquote><p>The CUDA driver could not be loaded. The library name used was 'nvcuda.dll'. The error was: 找不到指定的模块。</p></blockquote><p>行吧，逼我上Google。一番搜索之后，锁定一个2016年来自MathWorks官方 MathWorks Support Team 的<a href="https://www.mathworks.com/matlabcentral/answers/278938-why-can-i-not-use-my-gpu-within-matlab-for-gpu-computing">优质回答</a>，</p><blockquote><p>\1. Make sure your license of Parallel Computing Toolbox works</p><p>In MATLAB you can run the following command to check your license:</p><p><code>license checkout Distrib_Computing_Toolbox</code></p><p>You will receive the output "<strong>ANS=1</strong>" if the license is working. Otherwise, you will see a license manager error. In that case, searching for the license error message should give a solution for how to solve your issue.</p><p>\2. Check you have a supported GPU card, see <strong>NVIDIA website</strong> to check compute capability (<a href="https://developer.nvidia.com/cuda-gpus" class="uri">https://developer.nvidia.com/cuda-gpus</a> for older cards consult https://developer.nvidia.com/cuda-legacy-gpus). Compute capability must be 1.3 or higher for versions R2014a and earlier and 2.0 or higher for versions R2014b or later and 3.0 or higher for convolution neural networks (introduced in R2016a).</p><p>\3. Update your NVIDIA graphics drivers to their latest version for your card (<a href="http://www.nvidia.com/Download/index.aspx" class="uri">http://www.nvidia.com/Download/index.aspx</a>). It is not necessary to download the CUDA SDK for built-in GPU functionality in MATLAB. The CUDA SDK is required if you wish to compile your own CUDA code to use with MATLAB.</p><p>\4. If you still cannot access your CUDA enabled device from within MATLAB check whether the device is correctly identified by your operating system using a program like NVIDIA-smi. If it is not seek advice from your sysadmin or NVIDIA support.</p><p>To run NVIDIA-smi:</p><p>Windows: Navigate to "C:FilesCorporation" and execute nvidia-smi in a command window.</p><p>Linux: nvidia-smi from terminal window. Normally installed into /usr/bin/</p><p>Mac: Not available.</p><p>\5. In some environments such as computing clusters access to CUDA capable devices on machines are handled at a system level by techniques like control groups or general resource allocation. Checking for the presence of these systems can explain why GPUs are visible but restricted in access for other programs.</p><p>CUDA_VISIBLE_DEVICES is an environment variable which when set will only allow access to the valid CUDA devices listed in the variable. The environment variable acts as a mask on any underlying CUDA devices.</p><p>CUDA_VISIBLE_DEVICES = '0' %Only device 0 is accessible and usable.</p><p>CUDA_VISIBLE_DEVICES = '0, 1' %Devices 0 and 1 are accessible and usable.</p><p>CUDA_VISIBLE_DEVICES= 'NoDevApps' %(or any other invalid input) no CUDA devices are accessible.</p><p>If CUDA_VISIBLE_DEVICES is unset then all CUDA devices are unrestricted.</p><p>In a cgroup (Linux) setup resource accessibility is controlled at a kernel level. This is a sysadmin level setting. This is more likely to exist on controlled HPC clusters.</p><p>If the steps in this support solution have not helped you resolve the problem, please contact MathWorks support directly:</p><p>http://www.mathworks.com/support/contact_us/</p></blockquote><p>第一步check，第二步为什么去NVIDIA网站看？AMD不行吗？搜一下吧，Google “AMD Parallel Computing Toolbox”，</p><p>有这么几个答案</p><blockquote><p>https://www.mathworks.com/matlabcentral/answers/477269-is-native-macintosh-amd-opencl-support-available</p><p>https://www.mathworks.com/matlabcentral/answers/96468-are-amd-graphics-cards-supported-for-gpu-computation-with-the-parallel-computing-toolbox-5-2-r2011b</p><p>https://stackoverflow.com/questions/12828268/is-it-possible-to-run-cuda-on-amd-gpus</p></blockquote><p>而答案就是==Nope==.</p><p>折腾一晚上，竟然是AMD和NVIDIA的差别，那我没办法了​​。看答案说用OpenCL替代，但是这要麻烦的多，让他用朋友电脑跑吧。继续研究下去就又是一个故事了。</p><hr /><p>总结：以后买电脑要NVIDIA显卡的。</p><hr />]]></content>
    
    
    <categories>
      
      <category>技术</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MATLAB</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>博客与博客之外</title>
    <link href="/posts/10002/"/>
    <url>/posts/10002/</url>
    
    <content type="html"><![CDATA[<hr /><ul><li><p>克服惰性需要极大的能量，社会学中的牛顿力学；</p></li><li><p>写博客是为了自己，关键在于积极坚持；</p></li><li><p>自媒体时代，人人都可以发声，但其中利弊需谨慎对待。</p></li></ul><hr /><span id="more"></span><h2 id="博客">博客</h2><h3 id="博客之前">博客之前</h3><p>其实，这算是我的第二个博客。第一个博客始于18年考完研的空档期（一如现在疫情空档期），公众号也是那段时间整的，但写了几篇文章之后二者都闲置了。如今那博客早已变成了404，不过公众号竟依然在涨粉，属实让我感觉对不起那些粉丝，不知那位留言19考研的老兄现今如何。</p><p>前几天翻看一些大佬的博客，他们的坚韧的意志力与渊博的学识从他们n年如一日的一篇篇博文中便可见一斑。而我，想效仿之。我知道这是颇有野心之举，恐半途而废，但先开始再说吧，就不立flag了，以免过几天打脸。</p><h3 id="谈谈坚持">谈谈坚持</h3><p>注意到这么一个小现象，b站的学习类视频的播放量基本随p递减。大部分人就是这样，三分钟热度，包括我自己。想起考研那段时间可能算是这辈子最高光时刻了（可也不过坚持学了几个月而已）。总结一下倒也能看出几分端倪：</p><ul><li><p>专注;</p></li><li><p>目标。</p></li></ul><p>专注，不仅指自己心无旁骛，还要别人不会来打扰。考研那段时间基本杜绝一切社交，有几门课也基本都逃了。目标的重要性不必多说，要有奔头。但不能只有考上研究生这个大目标，还要有明天做多少题这种小目标。就是这个专注和目标克服了惰性，从社会学角度小小的验证了牛顿力学。反观现在，手机、同学、导师全都成了惰性的”帮凶“（同学、导师：a~tiu！）（没有恶意只是对照说明，需要更多时间来处理人际关系等），而目标不到deadline是不会出现在脑子里的，坚持失去了目标的帮助，自然败落。</p><p>到这，解决办法也就呼之欲出了：</p><ul><li><p>更专注；</p></li><li><p>设定目标。</p></li></ul><p>同学、导师等的必要之事无法避免，那就少刷点手机，更专注于有助于自己成长的事情，然后设定长远的及眼前的目标。对我目前来说就是读书、写博客。</p><p>前些天看到白岩松的观点挺有意思：一旦坚持就离死不远了。坚持就咬牙了，没乐趣了，没方法了，就靠坚持了。坚持有的时候很重要，但是相当多的时候这句话要有AB面。<a href="https://www.bilibili.com/video/BV1J4411t7R8?from=search&amp;seid=18297747687514921855">白岩松一刻演讲</a></p><p>不要消极坚持，要积极坚持，带有动力，带有乐趣，带有好奇的去坚持吧。</p><h3 id="为何写博客">为何写博客</h3><p>为什么要写博客？有点时间<del>打打游戏</del>陪陪女朋友不好吗？</p><p>写博客当然是为了让自己变的🐮🍺一点。这个🐮🍺在于以下几点，</p><ul><li><p>提升文笔；</p><p>文人用笔作战，自然科学工作者（又名科研🐶）可能不重视，但其实所写paper不都如博客一般吗，都是思想的整理与输出。能不能把一件事讲明白，字里行间有没有逻辑非常重要。演讲其实也是如此。这需要一点磨练。</p></li><li><p>知识仓库；</p><p>博客像大脑的外接硬盘，即减轻大脑负担，又可以记录思想。</p></li><li><p>私人定制。</p><p>个人博客入门门槛相对较高，相对小众，这样的一个好处就是清净，不像微博朋友圈那般喧哗吵闹，可以安静的思考<del>明早吃点啥</del>人生。当然还有颜值啊！✌</p></li></ul><p>这一段出现了好多莫名其妙的小表情😀。</p><h2 id="博客之外">博客之外</h2><h3 id="主副业">主副业</h3><p>建博之初，我多少有点急于求成，好似要一天10篇文章，每天花很多时间在上边，惹得奶盖不高兴了。我想说博客怎么说也是一个副业、一个爱好，慢慢的我会把精力逐步转移到主业上来，继续每天的看论文生涯。毕竟以后还要挣钱养家。还有我也要抽时间逐步的将专业知识体系搭建起来。</p><p>又看到大佬的博客，更新时间为12年至今。从刚开始的寥寥数字到现如今的长篇大论，能感觉到他的成长。每篇文章所承载的知识不多，但累积起来就能看到变化。不再悠哉游哉，不再贪多，做事不能急，心急吃不了热豆腐，一点一点积累，慢慢的变好。</p><h3 id="媒体">媒体</h3><p>多聊一点。</p><p>要警惕现代媒体报道中的不实、偏见以及筛选。西方社会普遍对中国抱有偏见，很大一部分的锅都要西方媒体来背，很多人都没来过中国就用他们的一贯思维设立假想敌来批判中国，甚至有一部分故意造假，难怪特朗普说他们"fake news"，其傲慢自大我行我素在这次疫情中暴露无遗。当然也有难得的国际友人，感谢他们。<a href="https://www.bilibili.com/video/BV1qt41187G9">火锅大王怼纽约时报</a></p><p>现在是自媒体时代，人人都可以发声，更要警惕这些问题。疫情期间无数的谣言假消息四处乱窜，微博上热闹的不得了，许多人都被某些言论煽动的要炸天。流言止于智者，我们要做的就是独立思考，不被洪流所裹挟。</p><p><br/></p><hr /><p><em>写后感</em></p><p><em>从高中之后就没主动写过这么长的文章了，这篇文章我竟写了3天。文章是否好看倒是其次，我自觉脑子思维混乱，常常一个点能分出几条岔路，而不知走那一条。</em></p><p><em>路漫漫求修远兮，吾将上下而求索。</em></p><hr />]]></content>
    
    
    <categories>
      
      <category>随笔</category>
      
    </categories>
    
    
    <tags>
      
      <tag>blog</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>两首小诗</title>
    <link href="/posts/10001/"/>
    <url>/posts/10001/</url>
    
    <content type="html"><![CDATA[<hr /><p>奶盖今早给我读的，想你的第xx天。</p><p>奶盖刚才切到手了，好心疼~</p><hr /><span id="more"></span><p><font face="楷体" size="4" color="black"></p><center>✘</center><center>突然间惊醒，</center><center>近来又做过很多彩色的梦：</center><center>有雪山，</center><center>有牧场，</center><center>也有墓园。</center><center>刚刚过去的那一年，</center><center>究竟发生过什么，</center><center>只有我自己知道。</center><center>很多时候我问上帝：</center><center>前面的路我看不到了，</center><center>再多走一步会是悬崖吗？</center><center>他跟我说：</center><center>去吧，</center><center>如果真的是悬崖，</center><center>我会托住你。</center><center>就这样我安然无恙，</center><center>转过身去抱紧依然熟睡的你。</center><p><br/></p><center>✘</center><center>我相信每个人的心里都有一座城阙。</center><center>那座城阙里，</center><center>放着他最珍爱的东西。</center><center>很久以前，</center><center>当我还不知道如何去形容这座城阙时，</center><center>我跟一个人说，</center><center>这是我的小小江山。</center><center>那个人容颜清俊，</center><center>衣衫上盛满朝阳初上的清辉，</center><center>他温润一笑，</center><center>问我的小江山中是否有他。</center><p></font></p>]]></content>
    
    
    <categories>
      
      <category>随笔</category>
      
    </categories>
    
    
    <tags>
      
      <tag>奶盖</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
